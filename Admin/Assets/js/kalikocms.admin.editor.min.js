!function(n,t){"use strict";function sf(n,t){for(var r,u=[],i=0;i<n.length;++i){if(r=et[n[i]]||hf(n[i]),!r)throw"module definition dependecy not found: "+n[i];u.push(r)}t.apply(null,u)}function i(n,i,r){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";sf(i,function(){et[n]=r.apply(null,arguments)})}function hf(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function cf(i){for(var e=0;e<i.length;e++){for(var u=n,o=i[e],r=o.split(/[.\/]/),f=0;f<r.length-1;++f)u[r[f]]===t&&(u[r[f]]={}),u=u[r[f]];u[r[r.length-1]]=et[o]}}var et={},ot="tinymce/dom/Sizzle",y="tinymce/dom/EventUtils",r="tinymce/util/Tools",u="tinymce/Env",g="tinymce/dom/DomQuery",ri="tinymce/html/Styles",s="tinymce/dom/TreeWalker",ui="tinymce/dom/Range",h="tinymce/html/Entities",kr="tinymce/dom/StyleSheetLoader",o="tinymce/dom/DOMUtils",nt="tinymce/dom/ScriptLoader",st="tinymce/AddOnManager",c="tinymce/dom/RangeUtils",dr="tinymce/NodeChange",p="tinymce/html/Node",l="tinymce/html/Schema",ht="tinymce/html/SaxParser",ct="tinymce/html/DomParser",fi="tinymce/html/Writer",tt="tinymce/html/Serializer",ei="tinymce/dom/Serializer",oi="tinymce/dom/TridentSelection",lt="tinymce/util/VK",si="tinymce/dom/ControlSelection",it="tinymce/dom/BookmarkManager",hi="tinymce/dom/Selection",at="tinymce/dom/ElementUtils",gr="tinymce/fmt/Preview",ci="tinymce/Formatter",li="tinymce/UndoManager",ai="tinymce/EnterKey",vi="tinymce/ForceBlocks",yi="tinymce/EditorCommands",vt="tinymce/util/URI",w="tinymce/util/Class",yt="tinymce/util/EventDispatcher",pt="tinymce/ui/Selector",wt="tinymce/ui/Collection",f="tinymce/ui/DomUtils",a="tinymce/ui/Control",b="tinymce/ui/Factory",pi="tinymce/ui/KeyboardNavigation",v="tinymce/ui/Container",k="tinymce/ui/DragHelper",wi="tinymce/ui/Scrollable",rt="tinymce/ui/Panel",bt="tinymce/ui/Movable",bi="tinymce/ui/Resizable",d="tinymce/ui/FloatPanel",kt="tinymce/ui/Window",ki="tinymce/ui/MessageBox",di="tinymce/WindowManager",gi="tinymce/util/Quirks",dt="tinymce/util/Observable",nr="tinymce/EditorObservable",tr="tinymce/Shortcuts",ir="tinymce/Editor",rr="tinymce/util/I18n",ur="tinymce/FocusManager",ut="tinymce/EditorManager",nu="tinymce/LegacyInput",fr="tinymce/util/XHR",er="tinymce/util/JSON",tu="tinymce/util/JSONRequest",iu="tinymce/util/JSONP",ru="tinymce/util/LocalStorage",uu="tinymce/Compat",gt="tinymce/ui/Layout",ft="tinymce/ui/AbsoluteLayout",or="tinymce/ui/Tooltip",e="tinymce/ui/Widget",ni="tinymce/ui/Button",fu="tinymce/ui/ButtonGroup",sr="tinymce/ui/Checkbox",ti="tinymce/ui/ComboBox",eu="tinymce/ui/ColorBox",hr="tinymce/ui/PanelButton",ou="tinymce/ui/ColorButton",cr="tinymce/util/Color",su="tinymce/ui/ColorPicker",lr="tinymce/ui/Path",hu="tinymce/ui/ElementPath",ar="tinymce/ui/FormItem",vr="tinymce/ui/Form",cu="tinymce/ui/FieldSet",lu="tinymce/ui/FilePicker",au="tinymce/ui/FitLayout",vu="tinymce/ui/FlexLayout",yr="tinymce/ui/FlowLayout",yu="tinymce/ui/FormatControls",pu="tinymce/ui/GridLayout",wu="tinymce/ui/Iframe",bu="tinymce/ui/Label",pr="tinymce/ui/Toolbar",wr="tinymce/ui/MenuBar",ii="tinymce/ui/MenuButton",ku="tinymce/ui/ListBox",br="tinymce/ui/MenuItem",du="tinymce/ui/Menu",gu="tinymce/ui/Radio",nf="tinymce/ui/ResizeHandle",tf="tinymce/ui/Spacer",rf="tinymce/ui/SplitButton",uf="tinymce/ui/StackLayout",ff="tinymce/ui/TabPanel",ef="tinymce/ui/TextBox",of="tinymce/ui/Throbber";i(ot,[],function(){if(!window.jQuery)throw new Error("Load jQuery first");return jQuery.find});i(y,[],function(){function t(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r||!1):n.attachEvent&&n.attachEvent("on"+t,i)}function r(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r||!1):n.detachEvent&&n.detachEvent("on"+t,i)}function n(n,t){function s(){return!1}function h(){return!0}var f,i=t||{},c;for(f in n)o[f]||(i[f]=n[f]);if(i.target||(i.target=i.srcElement||document),n&&e.test(n.type)&&n.pageX===c&&n.clientX!==c){var l=i.target.ownerDocument||document,r=l.documentElement,u=l.body;i.pageX=n.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0);i.pageY=n.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=h;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=h;n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=h;i.stopPropagation()},i.isDefaultPrevented||(i.isDefaultPrevented=s,i.isPropagationStopped=s,i.isImmediatePropagationStopped=s),i}function u(n,i,u){function e(){u.domLoaded||(u.domLoaded=!0,i(h))}function o(){("complete"===f.readyState||"interactive"===f.readyState&&f.body)&&(r(f,"readystatechange",o),e())}function s(){try{f.documentElement.doScroll("left")}catch(n){return void setTimeout(s,0)}e()}var f=n.document,h={type:"ready"};return u.domLoaded?void i(h):(f.addEventListener?"complete"===f.readyState?e():t(n,"DOMContentLoaded",e):(t(f,"readystatechange",o),f.documentElement.doScroll&&n.self===n.top&&s()),void t(n,"load",e))}function i(){function s(n,t){var u,i,f,r,e=o[t];if(u=e&&e[n.type])for(i=0,f=u.length;f>i;i++)if(r=u[i],r&&r.func.call(r.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}var i=this,o={},h,e,c,l,a;e=f+(+new Date).toString(32);l="onmouseenter"in document.documentElement;c="onfocusin"in document.documentElement;a={mouseenter:"mouseover",mouseleave:"mouseout"};h=1;i.domLoaded=!1;i.events=o;i.bind=function(r,f,v,y){function it(t){s(n(t||tt.event),w)}var w,b,nt,p,k,d,g,tt=window;if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[e]?w=r[e]:(w=h++,r[e]=w,o[w]={}),y=y||r,f=f.split(" "),nt=f.length;nt--;)p=f[nt],d=it,k=g=!1,"DOMContentLoaded"===p&&(p="ready"),i.domLoaded&&"ready"===p&&"complete"==r.readyState?v.call(y,n({type:p})):(l||(k=a[p],k&&(d=function(t){var r,i;if(r=t.currentTarget,i=t.relatedTarget,i&&r.contains)i=r.contains(i);else for(;i&&i!==r;)i=i.parentNode;i||(t=n(t||tt.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=r,s(t,w))})),c||"focusin"!==p&&"focusout"!==p||(g=!0,k="focusin"===p?"focus":"blur",d=function(t){t=n(t||tt.event);t.type="focus"===t.type?"focusin":"focusout";s(t,w)}),b=o[w][p],b?"ready"===p&&i.domLoaded?v({type:p}):b.push({func:v,scope:y}):(o[w][p]=b=[{func:v,scope:y}],b.fakeName=k,b.capture=g,b.nativeHandler=d,"ready"===p?u(r,d,i):t(r,k||p,d,g)));return r=b=0,v}};i.unbind=function(n,t,u){var l,f,a,c,s,h;if(!n||3===n.nodeType||8===n.nodeType)return i;if(l=n[e]){if(h=o[l],t){for(t=t.split(" "),a=t.length;a--;)if(s=t[a],f=h[s]){if(u)for(c=f.length;c--;)if(f[c].func===u){var v=f.nativeHandler,y=f.fakeName,p=f.capture;f=f.slice(0,c).concat(f.slice(c+1));f.nativeHandler=v;f.fakeName=y;f.capture=p;h[s]=f}u&&0!==f.length||(delete h[s],r(n,f.fakeName||s,f.nativeHandler,f.capture))}}else{for(s in h)f=h[s],r(n,f.fakeName||s,f.nativeHandler,f.capture);h={}}for(s in h)return i;delete o[l];try{delete n[e]}catch(w){n[e]=null}}return i};i.fire=function(t,r,u){var f;if(!t||3===t.nodeType||8===t.nodeType)return i;u=n(null,u);u.type=r;u.target=t;do f=t[e],f&&s(u,f),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!u.isPropagationStopped());return i};i.clean=function(n){var t,r,u=i.unbind;if(!n||3===n.nodeType||8===n.nodeType)return i;if(n[e]&&u(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName)for(u(n),r=n.getElementsByTagName("*"),t=r.length;t--;)n=r[t],n[e]&&u(n);return i};i.destroy=function(){o={}};i.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}}var f="mce-data-",e=/^(?:mouse|contextmenu)|click/,o={keyLocation:1,layerX:1,layerY:1,returnValue:1};return i.Event=new i,i.Event.bind(window,"ready",function(){}),i});i(r,[],function(){function r(n){return null===n||n===t?"":(""+n).replace(w,"")}function u(n,r){return r?"array"==r&&i(n)?!0:typeof n==r:n!==t}function o(n){var r=n,t,u;if(!i(n))for(r=[],t=0,u=n.length;u>t;t++)r[t]=n[t];return r}function s(n,t,i){var r;for(n=n||[],t=t||",","string"==typeof n&&(n=n.split(t)),i=i||{},r=n.length;r--;)i[n[r]]={};return i}function n(n,i,r){var u,f;if(!n)return 0;if(r=r||n,n.length!==t){for(u=0,f=n.length;f>u;u++)if(i.call(r,n[u],u,n)===!1)return 0}else for(u in n)if(n.hasOwnProperty(u)&&i.call(r,n[u],u,n)===!1)return 0;return 1}function f(t,i){var r=[];return n(t,function(n){r.push(i(n))}),r}function h(t,i){var r=[];return n(t,function(n){(!i||i(n))&&r.push(n)}),r}function c(n,t,i){var e=this,f,u,r,o,s,h=0;if(n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n),r=n[3].match(/(^|\.)(\w+)$/i)[2],u=e.createNS(n[3].replace(/\.\w+$/,""),i),!u[r]){if("static"==n[2])return u[r]=t,void(this.onCreate&&this.onCreate(n[2],n[3],u[r]));t[r]||(t[r]=function(){},h=1);u[r]=t[r];e.extend(u[r].prototype,t);n[5]&&(f=e.resolve(n[5]).prototype,o=n[5].match(/\.(\w+)$/i)[1],s=u[r],u[r]=h?function(){return f[o].apply(this,arguments)}:function(){return this.parent=f[o],s.apply(this,arguments)},u[r].prototype[r]=u[r],e.each(f,function(n,t){u[r].prototype[t]=f[t]}),e.each(t,function(n,t){f[t]?u[r].prototype[t]=function(){return this.parent=f[t],n.apply(this,arguments)}:t!=r&&(u[r].prototype[t]=n)}));e.each(t["static"],function(n,t){u[r][t]=n})}}function l(n,t){var i,r;if(n)for(i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1}function a(n,i){for(var u,o=arguments,f,r=1,e=o.length;e>r;r++){i=o[r];for(u in i)i.hasOwnProperty(u)&&(f=i[u],f!==t&&(n[u]=f))}return n}function e(t,i,r,u){u=u||this;t&&(r&&(t=t[r]),n(t,function(n,t){return i.call(u,n,t,r)===!1?!1:void e(n,i,r,u)}))}function v(n,t){var i,r;for(t=t||window,n=n.split("."),i=0;i<n.length;i++)r=n[i],t[r]||(t[r]={}),t=t[r];return t}function y(n,t){var i,r;for(t=t||window,n=n.split("."),i=0,r=n.length;r>i&&(t=t[n[i]],t);i++);return t}function p(n,t){return!n||u(n,"array")?n:f(n.split(t||","),r)}var w=/^\s*|\s*$/g,i=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return{trim:r,isArray:i,is:u,toArray:o,makeMap:s,each:n,map:f,grep:h,inArray:l,extend:a,create:c,walk:e,createNS:v,resolve:y,explode:p}});i(u,[],function(){var r=navigator,n=r.userAgent,u,i,t,f,o,s,e,h;return u=window.opera&&window.opera.buildNumber,i=/WebKit/.test(n),t=!i&&!u&&/MSIE/gi.test(n)&&/Explorer/gi.test(r.appName),t=t&&/MSIE (\w+)\./.exec(n)[1],f=-1==n.indexOf("Trident/")||-1==n.indexOf("rv:")&&-1==r.appName.indexOf("Netscape")?!1:11,t=t||f,o=!i&&!f&&/Gecko/.test(n),s=-1!=n.indexOf("Mac"),e=/(iPad|iPhone)/.test(n),h=!e||n.match(/AppleWebKit\/(\d*)/)[1]>=534,{opera:u,webkit:i,ie:t,gecko:o,mac:s,iOS:e,contentEditable:h,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=t,range:window.getSelection&&"Range"in window,documentMode:t?document.documentMode||7:10}});i(g,[y,ot,r,u],function(n,i,r,u){function h(n){return"undefined"!=typeof n}function v(n){return"string"==typeof n}function b(n,t){var i,u,r;for(t=t||it,r=t.createElement("div"),i=t.createDocumentFragment(),r.innerHTML=n;u=r.firstChild;)i.appendChild(u);return i}function s(n,t,i,r){var u;if(v(t))t=b(t);else if(t.length&&!t.nodeType){if(t=f.makeArray(t),r)for(u=t.length-1;u>=0;u--)s(n,t[u],i,r);else for(u=0;u<t.length;u++)s(n,t[u],i,r);return n}if(t.nodeType)for(u=n.length;u--;)i.call(n[u],t);return n}function k(n,t){return n&&t&&-1!==(" "+n.className+" ").indexOf(" "+t+" ")}function d(n,t,i){var u,r;return t=f(t)[0],n.each(function(){var n=this;i&&u==n.parentNode?r.appendChild(n):(u=n.parentNode,r=t.cloneNode(!1),n.parentNode.insertBefore(r,n),r.appendChild(n))}),n}function f(n,t){return new f.fn.init(n,t)}function ut(n,t){var i;if(t.indexOf)return t.indexOf(n);for(i=t.length;i--;)if(t[i]===n)return i;return-1}function g(n){return null===n||n===o?"":(""+n).replace(ct,"")}function e(n,t){var f,u,r,e,i;if(n)if(f=n.length,f===e){for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],t.call(i,u,i)===!1))break}else for(r=0;f>r&&(i=n[r],t.call(i,r,i)!==!1);r++);return n}function nt(n,i,r){var e=[],u=n[i];for("string"!=typeof r&&r instanceof f&&(r=r[0]);u&&9!==u.nodeType;){if(r!==t){if(u===r)break;if("string"==typeof r&&f(u).is(r))break}1===u.nodeType&&e.push(u);u=u[i]}return e}function y(n,i,r,u){var e=[];for(u instanceof f&&(u=u[0]);n;n=n[i])if(!r||n.nodeType===r){if(u!==t){if(n===u)break;if("string"==typeof u&&f(n).is(u))break}e.push(n)}return e}function tt(n,t,i){for(n=n[t];n;n=n[t])if(n.nodeType==i)return n;return null}function p(n,t,i){e(i,function(i,r){n[i]=n[i]||{};n[i][t]=r})}var it=document,w=Array.prototype.push,ft=Array.prototype.slice,et=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=n.Event,o,ot=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),st=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),ht={"for":"htmlFor","class":"className",readonly:"readOnly"},rt={float:"cssFloat"},l={},a={},ct=/^\s*|\s*$/g;return f.fn=f.prototype={constructor:f,selector:"",context:null,length:0,init:function(n,t){var i=this,u,r;if(!n)return i;if(n.nodeType)return i.context=i[0]=n,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return f(n).attr(t);i.context=t=document}if(v(n)){if(i.selector=n,u="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:et.exec(n),!u)return f(t).find(n);if(u[1])for(r=b(n,t).firstChild;r;)w.call(i,r),r=r.nextSibling;else{if(r=it.getElementById(u[2]),r.id!==u[2])return i.find(n);i.length=1;i[0]=r}}else this.add(n,!1);return i},toArray:function(){return r.toArray(this)},add:function(n,t){var i=this,u,r;if(v(n))return i.add(f(n));if(n.nodeType)return i.add([n]);if(t!==!1)for(u=f.unique(i.toArray().concat(f.makeArray(n))),i.length=u.length,r=0;r<u.length;r++)i[r]=u[r];else w.apply(i,f.makeArray(n));return i},attr:function(n,t){var i=this,r;if("object"==typeof n)e(n,function(n,t){i.attr(n,t)});else{if(!h(t)){if(i[0]&&1===i[0].nodeType){if(r=l[n],r&&r.get)return r.get(i[0],n);if(st[n])return i.prop(n)?n:o;t=i[0].getAttribute(n,2);null===t&&(t=o)}return t}this.each(function(){var i;if(1===this.nodeType){if(i=l[n],i&&i.set)return void i.set(this,t);null===t?this.removeAttribute(n,2):this.setAttribute(n,t,2)}})}return i},removeAttr:function(n){return this.attr(n,null)},prop:function(n,t){var i=this;if(n=ht[n]||n,"object"==typeof n)e(n,function(n,t){i.prop(n,t)});else{if(!h(t))return i[0]&&i[0].nodeType&&n in i[0]?i[0][n]:t;this.each(function(){1==this.nodeType&&(this[n]=t)})}return i},css:function(n,t){function f(n){return n.replace(/-(\D)/g,function(n,t){return t.toUpperCase()})}function s(n){return n.replace(/[A-Z]/g,function(n){return"-"+n})}var u=this,r,i;if("object"==typeof n)e(n,function(n,t){u.css(n,t)});else if(h(t))n=f(n),"number"!=typeof t||ot[n]||(t+="px"),u.each(function(){var r=this.style;if(i=a[n],i&&i.set)return void i.set(this,t);try{this.style[rt[n]||n]=t}catch(u){}(null===t||""===t)&&(r.removeProperty?r.removeProperty(s(n)):r.removeAttribute(n))});else{if(r=u[0],i=a[n],i&&i.get)return i.get(r);if(r.ownerDocument.defaultView)try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(s(n))}catch(c){return o}else if(r.currentStyle)return r.currentStyle[f(n)]}return u},remove:function(){for(var i=this,n,t=this.length;t--;)n=i[t],c.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var i=this,n,t=this.length;t--;)for(n=i[t];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(n){var t=this,i;if(h(n)){i=t.length;try{for(;i--;)t[i].innerHTML=n}catch(r){f(t[i]).empty().append(n)}return t}return t[0]?t[0].innerHTML:""},text:function(n){var t=this,i;if(h(n)){for(i=t.length;i--;)"innerText"in t[i]?t[i].innerText=n:t[0].textContent=n;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return s(this,arguments,function(n){1===this.nodeType&&this.appendChild(n)})},prepend:function(){return s(this,arguments,function(n){1===this.nodeType&&this.insertBefore(n,this.firstChild)},!0)},before:function(){var n=this;return n[0]&&n[0].parentNode?s(n,arguments,function(n){this.parentNode.insertBefore(n,this)}):n},after:function(){var n=this;return n[0]&&n[0].parentNode?s(n,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):n},appendTo:function(n){return f(n).append(this),this},prependTo:function(n){return f(n).prepend(this),this},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){return d(this,n)},wrapAll:function(n){return d(this,n,!0)},wrapInner:function(n){return this.each(function(){f(this).contents().wrapAll(n)}),this},unwrap:function(){return this.parent().each(function(){f(this).replaceWith(this.childNodes)})},clone:function(){var n=[];return this.each(function(){n.push(this.cloneNode(!0))}),f(n)},addClass:function(n){return this.toggleClass(n,!0)},removeClass:function(n){return this.toggleClass(n,!1)},toggleClass:function(n,t){var i=this;return"string"!=typeof n?i:(-1!==n.indexOf(" ")?e(n.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,r){var u,f;f=k(r,n);f!==t&&(u=r.className,f?r.className=g((" "+u+" ").replace(" "+n+" "," ")):r.className+=u?" "+n:n)}),i)},hasClass:function(n){return k(this[0],n)},each:function(n){return e(this,n)},on:function(n,t){return this.each(function(){c.bind(this,n,t)})},off:function(n,t){return this.each(function(){c.unbind(this,n,t)})},trigger:function(n){return this.each(function(){"object"==typeof n?c.fire(this,n.type,n):c.fire(this,n)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(ft.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(n){for(var r=[],t=0,i=this.length;i>t;t++)f.find(n,this[t],r);return f(r)},filter:function(n){return f(f.filter(n,this.toArray()))},closest:function(n){var t=[];return n instanceof f&&(n=n[0]),this.each(function(i,r){for(;r;){if("string"==typeof n&&f(r).is(n)){t.push(r);break}if(r==n){t.push(r);break}r=r.parentNode}}),f(t)},push:w,sort:[].sort,splice:[].splice},r.extend(f,{extend:r.extend,makeArray:r.toArray,inArray:ut,isArray:r.isArray,each:e,trim:g,find:i,expr:i.selectors,unique:i.uniqueSort,text:i.getText,contains:i.contains,filter:function(n,t,i){return i&&(n=":not("+n+")"),t=1===t.length?f.find.matchesSelector(t[0],n)?[t[0]]:[]:f.find.matches(n,t)}}),e({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return nt(n,"parentNode")},next:function(n){return tt(n,"nextSibling",1)},prev:function(n){return tt(n,"previousSibling",1)},children:function(n){return y(n.firstChild,"nextSibling",1)},contents:function(n){return r.toArray(("iframe"===n.nodeName?n.contentDocument||n.contentWindow.document:n).childNodes)}},function(n,t){f.fn[n]=function(i){var u=this,r=[];return u.each(function(){var n=t.call(r,this,i,r);n&&(f.isArray(n)?r.push.apply(r,n):r.push(n))}),this.length>1&&(r=f.unique(r),0===n.indexOf("parents")&&(r=r.reverse())),r=f(r),i?r.filter(i):r}}),e({parentsUntil:function(n,t){return nt(n,"parentNode",t)},nextUntil:function(n,t){return y(n,"nextSibling",1,t).slice(1)},prevUntil:function(n,t){return y(n,"previousSibling",1,t).slice(1)}},function(n,t){f.fn[n]=function(i,r){var e=this,u=[];return e.each(function(){var n=t.call(u,this,i,u);n&&(f.isArray(n)?u.push.apply(u,n):u.push(n))}),this.length>1&&(u=f.unique(u),(0===n.indexOf("parents")||"prevUntil"===n)&&(u=u.reverse())),u=f(u),r?u.filter(r):u}}),f.fn.is=function(n){return!!n&&this.filter(n).length>0},f.fn.init.prototype=f.fn,f.overrideDefaults=function(n){function i(r,u){return t=t||n(),0===arguments.length&&(r=t.element),u||(u=t.context),new i.fn.init(r,u)}var t;return f.extend(i,this),i},u.ie&&u.ie<8&&(p(l,"get",{maxlength:function(n){var t=n.maxLength;return 2147483647===t?o:t},size:function(n){var t=n.size;return 20===t?o:t},"class":function(n){return n.className},style:function(n){var t=n.style.cssText;return 0===t.length?o:t}}),p(l,"set",{"class":function(n,t){n.className=t},style:function(n,t){n.style.cssText=t}})),u.ie&&u.ie<9&&(rt.float="styleFloat",p(a,"set",{opacity:function(n,t){var i=n.style;null===t||""===t?i.removeAttribute("filter"):(i.zoom=1,i.filter="alpha(opacity="+100*t+")")}})),f.attrHooks=l,f.cssHooks=a,f});i(ri,[],function(){return function(n,t){function s(n,t,i,r){function u(n){return n=parseInt(n,10).toString(16),n.length>1?n:"0"+n}return"#"+u(t)+u(i)+u(r)}var h=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,a,i,r={},u,e,f,o="﻿";for(n=n||{},t&&(e=t.getValidStyles(),f=t.getInvalidStyles()),u=("\\\" \\' \\; \\: ; : "+o).split(" "),i=0;i<u.length;i++)r[u[i]]=o+i,r[o+i]=u[i];return{toHex:function(n){return n.replace(h,s)},parse:function(t){function o(n,t,r){var e,o,s,h,f;if(e=u[n+"-top"+t],e&&(o=u[n+"-right"+t],o&&(s=u[n+"-bottom"+t],s&&(h=u[n+"-left"+t])))){for(f=[e,o,s,h],i=f.length-1;i--&&f[i]===f[i+1];);i>-1&&r||(u[n+t]=-1==i?f[0]:f.join(" "),delete u[n+"-top"+t],delete u[n+"-right"+t],delete u[n+"-bottom"+t],delete u[n+"-left"+t])}}function y(n){var t=u[n],i;if(t){for(t=t.split(" "),i=t.length;i--;)if(t[i]!==t[0])return!1;return u[n]=t[0],!0}}function d(n,t,i,r){y(t)&&y(i)&&y(r)&&(u[n]=u[t]+" "+u[i]+" "+u[r],delete u[t],delete u[i],delete u[r])}function b(n){return w=!0,r[n]}function p(n,t){return w&&(n=n.replace(/\uFEFF[0-9]/g,function(n){return r[n]})),t||(n=n.replace(/\\([\'\";:])/g,"$1")),n}function g(t,i,r,u,f,e){if(f=f||e)return f=p(f),"'"+f.replace(/\'/g,"\\'")+"'";if(i=p(i||r||u),!n.allow_script_urls){var o=i.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(o)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(o))return""}return k&&(i=k.call(nt,i,"style")),"url('"+i.replace(/\'/g,"\\'")+"')"}var u={},a,e,f,w,k=n.url_converter,nt=n.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(n){return n.replace(/[;:]/g,b)});a=c.exec(t);){if(e=a[1].replace(l,"").toLowerCase(),f=a[2].replace(l,""),f=f.replace(/\\[0-9a-f]+/g,function(n){return String.fromCharCode(parseInt(n.substr(1),16))}),e&&f.length>0){if(!n.allow_script_urls&&("behavior"==e||/expression\s*\(|\/\*|\*\//.test(f)))continue;"font-weight"===e&&"700"===f?f="bold":("color"===e||"background-color"===e)&&(f=f.toLowerCase());f=f.replace(h,s);f=f.replace(v,g);u[e]=w?p(f,!0):f}c.lastIndex=a.index+a[0].length}o("border","",!0);o("border","-width");o("border","-color");o("border","-style");o("padding","");o("margin","");d("border","border-width","border-style","border-color");"medium none"===u.border&&delete u.border;"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:function(n,t){function o(t){var f,r,o,u;if(f=e[t])for(r=0,o=f.length;o>r;r++)t=f[r],u=n[t],u!==a&&u.length>0&&(i+=(i.length>0?" ":"")+t+": "+u+";")}function s(n,t){var i;return i=f["*"],i&&i[n]?!1:(i=f[t],i&&i[n]?!1:!0)}var i="",r,u;if(t&&e)o("*"),o(t);else for(r in n)u=n[r],u!==a&&u.length>0&&(!f||s(r,t))&&(i+=(i.length>0?" ":"")+r+": "+u+";");return i}}}});i(s,[],function(){return function(n,t){function r(n,i,r,u){var e,f;if(n){if(!u&&n[i])return n[i];if(n!=t){if(e=n[r])return e;for(f=n.parentNode;f&&f!=t;f=f.parentNode)if(e=f[r])return e}}}var i=n;this.current=function(){return i};this.next=function(n){return i=r(i,"firstChild","nextSibling",n)};this.prev=function(n){return i=r(i,"lastChild","previousSibling",n)}}});i(ui,[r],function(n){function t(i){function b(){return w.createDocumentFragment()}function k(n,t){ut(o,n,t)}function d(n,t){ut(c,n,t)}function tt(n){k(n.parentNode,v(n))}function st(n){k(n.parentNode,v(n)+1)}function ht(n){d(n.parentNode,v(n))}function it(n){d(n.parentNode,v(n)+1)}function ct(n){n?(r[e]=r[u],r[s]=r[f]):(r[u]=r[e],r[f]=r[s]);r.collapsed=o}function lt(n){tt(n);it(n)}function at(n){k(n,0);d(n,1===n.nodeType?n.childNodes.length:n.nodeValue.length)}function vt(n,t){var i=r[u],o=r[f],h=r[e],c=r[s],l=t.startContainer,a=t.startOffset,v=t.endContainer,p=t.endOffset;return 0===n?y(i,o,l,a):1===n?y(h,c,l,a):2===n?y(h,c,v,p):3===n?y(i,o,v,p):void 0}function yt(){nt(h)}function pt(){return nt(ui)}function rt(){return nt(l)}function wt(n){var t=this[u],r=this[f],o,e;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(e=t.childNodes[r]),e?t.insertBefore(n,e):3==t.nodeType?i.insertAfter(n,t):t.appendChild(n)):r?r>=t.nodeValue.length?i.insertAfter(n,t):(o=t.splitText(r),t.parentNode.insertBefore(n,o)):t.parentNode.insertBefore(n,t)}function bt(n){var t=r.extractContents();r.insertNode(n);n.appendChild(t);r.selectNode(n)}function kt(){return ot(new t(i),{startContainer:r[u],startOffset:r[f],endContainer:r[e],endOffset:r[s],collapsed:r.collapsed,commonAncestorContainer:r.commonAncestorContainer})}function g(n,t){var i;if(3==n.nodeType||0>t)return n;for(i=n.firstChild;i&&t>0;)--t,i=i.nextSibling;return i?i:n}function dt(){return r[u]==r[e]&&r[f]==r[s]}function y(n,t,r,u){var f,h,e,c,o,s;if(n==r)return t==u?0:u>t?-1:1;for(f=r;f&&f.parentNode!=n;)f=f.parentNode;if(f){for(h=0,e=n.firstChild;e!=f&&t>h;)h++,e=e.nextSibling;return h>=t?-1:1}for(f=n;f&&f.parentNode!=r;)f=f.parentNode;if(f){for(h=0,e=r.firstChild;e!=f&&u>h;)h++,e=e.nextSibling;return u>h?-1:1}for(c=i.findCommonAncestor(n,r),o=n;o&&o.parentNode!=c;)o=o.parentNode;for(o||(o=c),s=r;s&&s.parentNode!=c;)s=s.parentNode;if(s||(s=c),o==s)return 0;for(e=c.firstChild;e;){if(e==o)return-1;if(e==s)return 1;e=e.nextSibling}}function ut(n,t,o){var h,c;for(n?(r[u]=t,r[f]=o):(r[e]=t,r[s]=o),h=r[e];h.parentNode;)h=h.parentNode;for(c=r[u];c.parentNode;)c=c.parentNode;c==h?y(r[u],r[f],r[e],r[s])>0&&r.collapse(n):r.collapse(n);r.collapsed=dt();r.commonAncestorContainer=i.findCommonAncestor(r[u],r[e])}function nt(n){var i,l=0,a=0,t,s,f,o,h,c;if(r[u]==r[e])return gt(n);for(i=r[e],t=i.parentNode;t;i=t,t=t.parentNode){if(t==r[u])return ni(i,n);++l}for(i=r[u],t=i.parentNode;t;i=t,t=t.parentNode){if(t==r[e])return ti(i,n);++a}for(s=a-l,f=r[u];s>0;)f=f.parentNode,s--;for(o=r[e];0>s;)o=o.parentNode,s++;for(h=f.parentNode,c=o.parentNode;h!=c;h=h.parentNode,c=c.parentNode)f=h,o=c;return ii(f,o,n)}function gt(n){var i,y,e,t,c,k,d,a,v;if(n!=h&&(i=b()),r[f]==r[s])return i;if(3==r[u].nodeType)return(y=r[u].nodeValue,e=y.substring(r[f],r[s]),n!=l&&(t=r[u],a=r[f],v=r[s]-r[f],0===a&&v>=t.nodeValue.length-1?t.parentNode.removeChild(t):t.deleteData(a,v),r.collapse(o)),n==h)?void 0:(e.length>0&&i.appendChild(w.createTextNode(e)),i);for(t=g(r[u],r[f]),c=r[s]-r[f];t&&c>0;)k=t.nextSibling,d=p(t,n),i&&i.appendChild(d),--c,t=k;return n!=l&&r.collapse(o),i}function ni(n,t){var i,u,o,e,s,a;if(t!=h&&(i=b()),u=ft(n,t),i&&i.appendChild(u),o=v(n),e=o-r[f],0>=e)return t!=l&&(r.setEndBefore(n),r.collapse(c)),i;for(u=n.previousSibling;e>0;)s=u.previousSibling,a=p(u,t),i&&i.insertBefore(a,i.firstChild),--e,u=s;return t!=l&&(r.setEndBefore(n),r.collapse(c)),i}function ti(n,t){var u,f,i,e,c,a;for(t!=h&&(u=b()),i=et(n,t),u&&u.appendChild(i),f=v(n),++f,e=r[s]-f,i=n.nextSibling;i&&e>0;)c=i.nextSibling,a=p(i,t),u&&u.appendChild(a),--e,i=c;return t!=l&&(r.setStartAfter(n),r.collapse(o)),u}function ii(n,t,i){var f,u,s,a,c,e,y;for(i!=h&&(u=b()),f=et(n,i),u&&u.appendChild(f),s=v(n),a=v(t),++s,c=a-s,e=n.nextSibling;c>0;)y=e.nextSibling,f=p(e,i),u&&u.appendChild(f),e=y,--c;return f=ft(t,i),u&&u.appendChild(f),i!=l&&(r.setStartAfter(n),r.collapse(o)),u}function ft(n,t){var i=g(r[e],r[s]-1),u,f,y,p,l,v=i!=r[e];if(i==n)return a(i,v,c,t);for(u=i.parentNode,f=a(u,c,c,t);u;){for(;i;)y=i.previousSibling,p=a(i,v,c,t),t!=h&&f.insertBefore(p,f.firstChild),v=o,i=y;if(u==n)return f;i=u.previousSibling;u=u.parentNode;l=a(u,c,c,t);t!=h&&l.appendChild(f);f=l}}function et(n,t){var i=g(r[u],r[f]),l=i!=r[u],e,s,y,p,v;if(i==n)return a(i,l,o,t);for(e=i.parentNode,s=a(e,c,o,t);e;){for(;i;)y=i.nextSibling,p=a(i,l,o,t),t!=h&&s.appendChild(p),l=o,i=y;if(e==n)return s;i=e.nextSibling;e=e.parentNode;v=a(e,c,o,t);t!=h&&v.appendChild(s);s=v}}function a(n,t,u,e){var a,v,y,o,w;return t?p(n,e):3==n.nodeType?(a=n.nodeValue,u?(o=r[f],v=a.substring(o),y=a.substring(0,o)):(o=r[s],v=a.substring(0,o),y=a.substring(o)),e!=l&&(n.nodeValue=y),e==h)?void 0:(w=i.clone(n,c),w.nodeValue=v,w):e!=h?i.clone(n,c):void 0}function p(n,t){return t!=h?t==l?i.clone(n,o):n:void n.parentNode.removeChild(n)}function ri(){return i.create("body",null,rt()).outerText}var r=this,w=i.doc,ui=0,l=1,h=2,o=!0,c=!1,f="startOffset",u="startContainer",e="endContainer",s="endOffset",ot=n.extend,v=i.nodeIndex;return ot(r,{startContainer:w,startOffset:0,endContainer:w,endOffset:0,collapsed:o,commonAncestorContainer:w,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:k,setEnd:d,setStartBefore:tt,setStartAfter:st,setEndBefore:ht,setEndAfter:it,collapse:ct,selectNode:lt,selectNodeContents:at,compareBoundaryPoints:vt,deleteContents:yt,extractContents:pt,cloneContents:rt,insertNode:wt,surroundContents:bt,cloneRange:kt,toStringIE:ri}),r}return t.prototype.toString=function(){return this.toStringIE()},t});i(h,[r],function(n){function s(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.textContent||t.innerText||n}function e(n,i){var r,u,f,e={};if(n){for(n=n.split(","),i=i||10,r=0;r<n.length;r+=2)u=String.fromCharCode(parseInt(n[r],i)),t[u]||(f="&"+n[r+1]+";",e[u]=f,e[f]=u);return e}}var h=n.makeMap,r,t,o,u=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,a={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},i;return t={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={encodeRaw:function(n,i){return n.replace(i?u:f,function(n){return t[n]||n})},encodeAllRaw:function(n){return(""+n).replace(c,function(n){return t[n]||n})},encodeNumeric:function(n,i){return n.replace(i?u:f,function(n){return n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":t[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,i,e){return e=e||r,n.replace(i?u:f,function(n){return t[n]||e[n]||n})},getEncodeFunc:function(n,o){function s(n,i){return n.replace(i?u:f,function(n){return t[n]||o[n]||"&#"+n.charCodeAt(0)+";"||n})}function c(n,t){return i.encodeNamed(n,t,o)}return o=e(o)||r,n=h(n.replace(/\+/g,",")),n.named&&n.numeric?s:n.named?o?c:i.encodeNamed:n.numeric?i.encodeNumeric:i.encodeRaw},decode:function(n){return n.replace(l,function(n,t,i){return t?(i=parseInt(i,2===t.length?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):a[i]||String.fromCharCode(i)):o[n]||r[n]||s(n)})}}});i(kr,[],function(){return function(n,t){function r(t){n.getElementsByTagName("head")[0].appendChild(t)}function f(t,f,o){function l(){for(var n=s.passed,t=n.length;t--;)n[t]();s.status=2;s.passed=[];s.failed=[]}function a(){for(var n=s.failed,t=n.length;t--;)n[t]();s.status=3;s.passed=[];s.failed=[]}function b(){var n=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(n&&n[1]<536)}function y(n,t){n()||((new Date).getTime()-w<u?window.setTimeout(t,0):a())}function v(){y(function(){for(var r=n.styleSheets,t,u=r.length,i;u--;)if(t=r[u],i=t.ownerNode?t.ownerNode:t.owningElement,i&&i.id===h.id)return l(),!0},v)}function p(){y(function(){try{var n=c.sheet.cssRules;return l(),!!n}catch(t){}},p)}var h,c,w,s;if(i[t]?s=i[t]:(s={passed:[],failed:[]},i[t]=s),f&&s.passed.push(f),o&&s.failed.push(o),1!=s.status){if(2==s.status)return void l();if(3==s.status)return void a();if(s.status=1,h=n.createElement("link"),h.rel="stylesheet",h.type="text/css",h.id="u"+e++,h.async=!1,h.defer=!1,w=(new Date).getTime(),"onload"in h&&!b())h.onload=v,h.onerror=a;else{if(navigator.userAgent.indexOf("Firefox")>0)return c=n.createElement("style"),c.textContent='@import "'+t+'"',p(),void r(c);v()}r(h);h.href=t}}var e=0,i={},u;t=t||{};u=t.maxLoadTime||5e3;this.load=f}});i(o,[ot,g,ri,y,s,ui,h,u,r,kr],function(n,i,r,u,f,e,o,s,h,c){function p(n,t){var i={},r=t.keep_values,u;return u={set:function(i,r,u){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n,r,u,i[0]));i.attr("data-mce-"+u,r).attr(u,r)},get:function(n,t){return n.attr("data-mce-"+t)||n.attr(t)}},i={style:{set:function(n,t){return null!==t&&"object"==typeof t?void n.css(t):(r&&n.attr("data-mce-style",t),void n.attr("style",t))},get:function(t){var i=t.attr("data-mce-style")||t.attr("style");return n.serializeStyle(n.parseStyle(i),t[0].nodeName)}}},r&&(i.href=i.src=u),i}function l(n,t){var f=this,e;f.doc=n;f.win=window;f.files={};f.counter=0;f.stdMode=!a||n.documentMode>=8;f.boxModel=!a||"CSS1Compat"==n.compatMode||f.stdMode;f.styleSheetLoader=new c(n);f.boundEvents=[];f.settings=t=t||{};f.schema=t.schema;f.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema);f.fixDoc(n);f.events=t.ownEvents?new u(t.proxy):u.Event;f.attrHooks=p(f,t);e=t.schema?t.schema.getBlockElements():{};f.$=i.overrideDefaults(function(){return{context:n,element:f.getRoot()}});f.isBlock=function(n){if(!n)return!1;var t=n.nodeType;return t?!(1!==t||!e[n.nodeName]):!!e[n]}}var v=h.each,y=h.is,w=h.grep,b=h.trim,a=s.ie,k=/^([a-z0-9],?)+$/i,d=/^[ \t\r\n]*$/;return l.prototype={$$:function(n){return"string"==typeof n&&(n=this.get(n)),this.$(n)},root:null,fixDoc:function(n){var t=this.settings,i;if(a&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){n.createElement(t)});for(i in t.schema.getCustomElements())n.createElement(i)}},clone:function(n,t){var i=this,r,u;return!a||1!==n.nodeType||t?n.cloneNode(t):(u=i.doc,t?r.firstChild:(r=u.createElement(n.nodeName),v(i.getAttribs(n),function(t){i.setAttrib(r,t.nodeName,i.getAttrib(n,t.nodeName))}),r))},getRoot:function(){var n=this;return n.get(n.settings.root_element)||n.doc.body},getViewPort:function(n){var i,t;return n=n?n:this.win,i=n.document,t=this.boxModel?i.documentElement:i.body,{x:n.pageXOffset||t.scrollLeft,y:n.pageYOffset||t.scrollTop,w:n.innerWidth||t.clientWidth,h:n.innerHeight||t.clientHeight}},getRect:function(n){var t=this,i,r;return n=t.get(n),i=t.getPos(n),r=t.getSize(n),{x:i.x,y:i.y,w:r.w,h:r.h}},getSize:function(n){var r=this,t,i;return n=r.get(n),t=r.getStyle(n,"width"),i=r.getStyle(n,"height"),-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||n.offsetWidth||n.clientWidth,h:parseInt(i,10)||n.offsetHeight||n.clientHeight}},getParent:function(n,t,i){return this.getParents(n,t,i,!1)},getParents:function(n,i,r,u){var f=this,e,o=[];for(n=f.get(n),u=u===t,r=r||("BODY"!=f.getRoot().nodeName?f.getRoot().parentNode:null),y(i,"string")&&(e=i,i="*"===i?function(n){return 1==n.nodeType}:function(n){return f.is(n,e)});n&&n!=r&&n.nodeType&&9!==n.nodeType;){if(!i||i(n)){if(!u)return n;o.push(n)}n=n.parentNode}return u?o:null},get:function(n){var t;return n&&this.doc&&"string"==typeof n&&(t=n,n=this.doc.getElementById(n),n&&n.id!==t)?this.doc.getElementsByName(t)[1]:n},getNext:function(n,t){return this._findSib(n,t,"nextSibling")},getPrev:function(n,t){return this._findSib(n,t,"previousSibling")},select:function(t,i){var r=this;return n(t,r.get(i)||r.get(r.settings.root_element)||r.doc,[])},is:function(i,r){var u,f;if(i.length===t){if("*"===r)return 1==i.nodeType;if(k.test(r)){for(r=r.toLowerCase().split(/,/),i=i.nodeName.toLowerCase(),u=r.length-1;u>=0;u--)if(r[u]==i)return!0;return!1}}return i.nodeType&&1!=i.nodeType?!1:(f=i.nodeType?[i]:i,n(r,f[0].ownerDocument||f[0],null,f).length>0)},add:function(n,t,i,r,u){var f=this;return this.run(n,function(n){var e;return e=y(t,"string")?f.doc.createElement(t):t,f.setAttribs(e,i),r&&(r.nodeType?e.appendChild(r):f.setHTML(e,r)),u?e:n.appendChild(e)})},create:function(n,t,i){return this.add(this.doc.createElement(n),n,t,i,1)},createHTML:function(n,t,i){var u="",r;u+="<"+n;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(u+=" "+r+'="'+this.encode(t[r])+'"');return"undefined"!=typeof i?u+">"+i+"<\/"+n+">":u+" />"},createFragment:function(n){var t,r,u=this.doc,i;for(i=u.createElement("div"),t=u.createDocumentFragment(),n&&(i.innerHTML=n);r=i.firstChild;)t.appendChild(r);return t},remove:function(n,t){return n=this.$$(n),t?n.each(function(){for(var n;n=this.firstChild;)3==n.nodeType&&0===n.data.length?this.removeChild(n):this.parentNode.insertBefore(n,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},setStyle:function(n,t,i){n=this.$$(n).css(t,i);this.settings.update_styles&&n.attr("data-mce-style",null)},getStyle:function(n,i,r){return n=this.$$(n),r?n.css(i):(i=i.replace(/-(\D)/g,function(n,t){return t.toUpperCase()}),"float"==i&&(i=a?"styleFloat":"cssFloat"),n[0].style?n[0].style[i]:t)},setStyles:function(n,t){this.$$(n).css(t)},removeAllAttribs:function(n){return this.run(n,function(n){for(var i=n.attributes,t=i.length-1;t>=0;t--)n.removeAttributeNode(i.item(t))})},setAttrib:function(n,t,i){var u=this,f,r,e=u.settings;""===i&&(i=null);n=u.$$(n);f=n.attr(t);r=u.attrHooks[t];r&&r.set?r.set(n,i,t):n.attr(t,i);f!=i&&e.onSetAttrib&&e.onSetAttrib({attrElm:n,attrName:t,attrValue:i})},setAttribs:function(n,t){var i=this;i.$$(n).each(function(n,r){v(t,function(n,t){i.setAttrib(r,t,n)})})},getAttrib:function(n,t,i){var f=this,r,u;return n=f.$$(n),r=f.attrHooks[t],u=r&&r.get?r.get(n,t):n.attr(t),"undefined"==typeof u&&(u=i||""),u},getPos:function(n,t){var e=this,u=0,f=0,i,r=e.doc,o;if(n=e.get(n),t=t||r.body,n){if(t===r.body&&n.getBoundingClientRect)return o=n.getBoundingClientRect(),t=e.boxModel?r.documentElement:r.body,u=o.left+(r.documentElement.scrollLeft||r.body.scrollLeft)-t.clientLeft,f=o.top+(r.documentElement.scrollTop||r.body.scrollTop)-t.clientTop,{x:u,y:f};for(i=n;i&&i!=t&&i.nodeType;)u+=i.offsetLeft||0,f+=i.offsetTop||0,i=i.offsetParent;for(i=n.parentNode;i&&i!=t&&i.nodeType;)u-=i.scrollLeft||0,f-=i.scrollTop||0,i=i.parentNode}return{x:u,y:f}},parseStyle:function(n){return this.styles.parse(n)},serializeStyle:function(n,t){return this.styles.serialize(n,t)},addStyle:function(n){var f=this,r=f.doc,u,t,i;if(f!==l.DOM&&r===document){if(i=l.DOM.addedStyles,i=i||[],i[n])return;i[n]=!0;l.DOM.addedStyles=i}t=r.getElementById("mceDefaultStyles");t||(t=r.createElement("style"),t.id="mceDefaultStyles",t.type="text/css",u=r.getElementsByTagName("head")[0],u.firstChild?u.insertBefore(t,u.firstChild):u.appendChild(t));t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(r.createTextNode(n))},loadCSS:function(n){var i=this,t=i.doc,r;return i!==l.DOM&&t===document?void l.DOM.loadCSS(n):(n||(n=""),r=t.getElementsByTagName("head")[0],void v(n.split(","),function(n){var u;i.files[n]||(i.files[n]=!0,u=i.create("link",{rel:"stylesheet",href:n}),a&&t.documentMode&&t.recalc&&(u.onload=function(){t.recalc&&t.recalc();u.onload=null}),r.appendChild(u))}))},addClass:function(n,t){this.$$(n).addClass(t)},removeClass:function(n,t){this.toggleClass(n,t,!1)},hasClass:function(n,t){return this.$$(n).hasClass(t)},toggleClass:function(n,t,r){this.$$(n).toggleClass(t,r).each(function(){""===this.className&&i(this).attr("class",null)})},show:function(n){this.$$(n).show()},hide:function(n){this.$$(n).hide()},isHidden:function(n){return"none"==this.$$(n).css("display")},uniqueId:function(n){return(n?n:"mce_")+this.counter++},setHTML:function(n,t){n=this.$$(n);a?n.each(function(n,r){if(r.canHaveHTML!==!1){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t;r.removeChild(r.firstChild)}catch(u){i("<div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):n.html(t)},getOuterHTML:function(n){return n=this.get(n),1==n.nodeType?n.outerHTML:i("<div>").append(i(n).clone()).html()},setOuterHTML:function(n,t){var r=this;r.$$(n).each(function(){try{this.outerHTML=t}catch(n){r.remove(i(this).html(t),!0)}})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(n,t){return t=this.get(t),this.run(n,function(n){var i,r;return i=t.parentNode,r=t.nextSibling,r?i.insertBefore(n,r):i.appendChild(n),n})},replace:function(n,t,i){var r=this;return r.run(t,function(t){return y(t,"array")&&(n=n.cloneNode(!0)),i&&v(w(t.childNodes),function(t){n.appendChild(t)}),t.parentNode.replaceChild(n,t)})},rename:function(n,t){var i=this,r;return n.nodeName!=t.toUpperCase()&&(r=i.create(t),v(i.getAttribs(n),function(t){i.setAttrib(r,t.nodeName,i.getAttrib(n,t.nodeName))}),i.replace(r,n,1)),r||n},findCommonAncestor:function(n,t){for(var i=n,r;i;){for(r=t;r&&i!=r;)r=r.parentNode;if(i==r)break;i=i.parentNode}return!i&&n.ownerDocument?n.ownerDocument.documentElement:i},toHex:function(n){return this.styles.toHex(h.trim(n))},run:function(n,t,i){var u=this,r;return"string"==typeof n&&(n=u.get(n)),n?(i=i||this,n.nodeType||!n.length&&0!==n.length?t.call(i,n):(r=[],v(n,function(n,f){n&&("string"==typeof n&&(n=u.get(n)),r.push(t.call(i,n,f)))}),r)):!1},getAttribs:function(n){var t,i;return(n=this.get(n),!n)?[]:a?(t=[],"OBJECT"==n.nodeName)?n.attributes:("OPTION"===n.nodeName&&this.getAttrib(n,"selected")&&t.push({specified:1,nodeName:"selected"}),i=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,n.cloneNode(!1).outerHTML.replace(i,"").replace(/[\w:\-]+/gi,function(n){t.push({specified:1,nodeName:n})}),t):n.attributes},isEmpty:function(n,t){var u=this,e,o,r,s,i,h=0;if(n=n.firstChild){s=new f(n,n.parentNode);t=t||u.schema?u.schema.getNonEmptyElements():null;do{if(r=n.nodeType,1===r){if(n.getAttribute("data-mce-bogus"))continue;if(i=n.nodeName.toLowerCase(),t&&t[i]){if("br"===i){h++;continue}return!1}for(o=u.getAttribs(n),e=o.length;e--;)if(i=o[e].nodeName,"name"===i||"data-mce-bookmark"===i)return!1}if(8==r||3===r&&!d.test(n.nodeValue))return!1}while(n=s.next())}return 1>=h},createRng:function(){var n=this.doc;return n.createRange?n.createRange():new e(this)},nodeIndex:function(n,t){var u=0,r,i;if(n)for(r=n.nodeType,n=n.previousSibling;n;n=n.previousSibling)i=n.nodeType,(!t||3!=i||i!=r&&n.nodeValue.length)&&(u++,r=i);return u},split:function(n,t,i){function e(n){function o(n){var t=n.previousSibling&&"SPAN"==n.previousSibling.nodeName,i=n.nextSibling&&"SPAN"==n.nextSibling.nodeName;return t&&i}var i,t=n.childNodes,u=n.nodeType,f;if(1!=u||"bookmark"!=n.getAttribute("data-mce-type")){for(i=t.length-1;i>=0;i--)e(t[i]);if(9!=u){if(3==u&&n.nodeValue.length>0){if(f=b(n.nodeValue).length,!r.isBlock(n.parentNode)||f>0||0===f&&o(n))return}else if(1==u&&(t=n.childNodes,1==t.length&&t[0]&&1==t[0].nodeType&&"bookmark"==t[0].getAttribute("data-mce-type")&&n.parentNode.insertBefore(t[0],n),t.length||/^(br|hr|input|img)$/i.test(n.nodeName)))return;r.remove(n)}return n}}var r=this,u=r.createRng(),o,s,f;if(n&&t)return(u.setStart(n.parentNode,r.nodeIndex(n)),u.setEnd(t.parentNode,r.nodeIndex(t)),o=u.extractContents(),u=r.createRng(),u.setStart(t.parentNode,r.nodeIndex(t)+1),u.setEnd(n.parentNode,r.nodeIndex(n)+1),s=u.extractContents(),f=n.parentNode,f.insertBefore(e(o),n),i?f.replaceChild(i,t):f.insertBefore(t,n),f.insertBefore(e(s),n),r.remove(n),i||t)},bind:function(n,t,i,r){var u=this,f;if(h.isArray(n)){for(f=n.length;f--;)n[f]=u.bind(n[f],t,i,r);return n}return!u.settings.collect||n!==u.doc&&n!==u.win||u.boundEvents.push([n,t,i,r]),u.events.bind(n,t,i,r||u)},unbind:function(n,t,i){var f=this,r,u;if(h.isArray(n)){for(r=n.length;r--;)n[r]=f.unbind(n[r],t,i);return n}if(f.boundEvents&&(n===f.doc||n===f.win))for(r=f.boundEvents.length;r--;)u=f.boundEvents[r],n!=u[0]||t&&t!=u[1]||i&&i!=u[2]||this.events.unbind(u[0],u[1],u[2]);return this.events.unbind(n,t,i)},fire:function(n,t,i){return this.events.fire(n,t,i)},getContentEditable:function(n){var t;return n&&1==n.nodeType?(t=n.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==n.contentEditable?n.contentEditable:null):null},getContentEditableParent:function(n){for(var i=this.getRoot(),t=null;n&&n!==i&&(t=this.getContentEditable(n),null===t);n=n.parentNode);return t},destroy:function(){var t=this,r,i;if(t.boundEvents){for(r=t.boundEvents.length;r--;)i=t.boundEvents[r],this.events.unbind(i[0],i[1],i[2]);t.boundEvents=null}n.setDocument&&n.setDocument();t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1},dumpRng:function(n){return"startContainer: "+n.startContainer.nodeName+", startOffset: "+n.startOffset+", endContainer: "+n.endContainer.nodeName+", endOffset: "+n.endOffset},_findSib:function(n,t,i){var u=this,r=t;if(n)for("string"==typeof r&&(r=function(n){return u.is(n,t)}),n=n[i];n;n=n[i])if(r(n))return n;return null}},l.DOM=new l(document),l});i(nt,[o,r],function(n,t){function i(){function l(n,t){function f(){e.remove(r);i&&(i.onreadystatechange=i.onload=i=null);t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+n)}var e=u,i,r;r=e.uniqueId();i=document.createElement("script");i.id=r;i.type="text/javascript";i.src=n;"onreadystatechange"in i?i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&f()}:i.onload=f;i.onerror=o;(document.getElementsByTagName("head")[0]||document.body).appendChild(i)}var a=0,s=1,i=2,n={},h=[],t={},e=[],o=0,c;this.isDone=function(t){return n[t]==i};this.markDone=function(t){n[t]=i};this.add=this.load=function(i,r,u){var f=n[i];f==c&&(h.push(i),n[i]=a);r&&(t[i]||(t[i]=[]),t[i].push({func:r,scope:u||this}))};this.loadQueue=function(n,t){this.loadScripts(h,n,t)};this.loadScripts=function(u,h,a){function v(n){r(t[n],function(n){n.func.call(n.scope)});t[n]=c}var y;e.push({func:h,scope:a||this});(y=function(){var t=f(u);u.length=0;r(t,function(t){return n[t]==i?void v(t):void(n[t]!=s&&(n[t]=s,o++,l(t,function(){n[t]=i;o--;v(t);y()})))});o||(r(e,function(n){n.func.call(n.scope)}),e.length=0)})()}}var u=n.DOM,r=t.each,f=t.grep;return i.ScriptLoader=new i,i});i(st,[nt,r],function(n,i){function r(){var n=this;n.items=[];n.urls={};n.lookup={}}var u=i.each;return r.prototype={get:function(n){return this.lookup[n]?this.lookup[n].instance:t},dependencies:function(n){var t;return this.lookup[n]&&(t=this.lookup[n].dependencies),t||[]},requireLangPack:function(t,i){var u=r.language;if(u&&r.languageLoad!==!1){if(i)if(i=","+i+",",-1!=i.indexOf(","+u.substr(0,2)+","))u=u.substr(0,2);else if(-1==i.indexOf(","+u+","))return;n.ScriptLoader.add(this.urls[t]+"/langs/"+u+".js")}},add:function(n,t,i){return this.items.push(t),this.lookup[n]={instance:t,dependencies:i},t},createUrl:function(n,t){return"object"==typeof t?t:{prefix:n.prefix,resource:t,suffix:n.suffix}},addComponents:function(t,i){var r=this.urls[t];u(i,function(t){n.ScriptLoader.add(r+"/"+t)})},load:function(i,f,e,o){function c(){var r=h.dependencies(i);u(r,function(n){var i=h.createUrl(f,n);h.load(i.resource,i,t,t)});e&&e.call(o?o:n)}var h=this,s=f;h.urls[i]||("object"==typeof f&&(s=f.prefix+f.resource+f.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=r.baseURL+"/"+s),h.urls[i]=s.substring(0,s.lastIndexOf("/")),h.lookup[i]?c():n.ScriptLoader.add(s,c,o))}},r.PluginManager=new r,r.ThemeManager=new r,r});i(c,[r,s],function(n,t){function r(n,t){var i=n.childNodes;return t--,t>i.length-1?t=i.length-1:0>t&&(t=0),i[t]||n}function i(n){this.walk=function(t,i){function v(n){var t;return t=n[0],3===t.nodeType&&t===e&&k>=t.nodeValue.length&&n.splice(0,1),t=n[n.length-1],0===d&&n.length>0&&t===o&&3===t.nodeType&&n.splice(n.length-1,1),n}function w(n,t,i){for(var r=[];n&&n!=i;n=n[t])r.push(n);return r}function b(n,t){do{if(n.parentNode==t)return n;n=n.parentNode}while(n)}function a(n,t,r){var u=r?"nextSibling":"previousSibling";for(f=n,y=f.parentNode;f&&f!=t;f=y)y=f.parentNode,h=w(f==n?f:f[u],u),h.length&&(r||h.reverse(),i(v(h)))}var e=t.startContainer,k=t.startOffset,o=t.endContainer,d=t.endOffset,s,c,l,f,y,h,p;if(p=n.select("td.mce-item-selected,th.mce-item-selected"),p.length>0)return void u(p,function(n){i([n])});if(1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[k]),1==o.nodeType&&o.hasChildNodes()&&(o=r(o,d)),e==o)return i(v([e]));for(s=n.findCommonAncestor(e,o),f=e;f;f=f.parentNode){if(f===o)return a(e,s,!0);if(f===s)break}for(f=o;f;f=f.parentNode){if(f===e)return a(o,s);if(f===s)break}c=b(e,s)||e;l=b(o,s)||o;a(e,c,!0);h=w(c==e?c:c.nextSibling,"nextSibling",l==o?l.nextSibling:l);h.length&&i(v(h));a(o,l)};this.split=function(n){function f(n,t){return n.splitText(t)}var i=n.startContainer,r=n.startOffset,t=n.endContainer,u=n.endOffset;return i==t&&3==i.nodeType?r>0&&r<i.nodeValue.length&&(t=f(i,r),i=t.previousSibling,u>r?(u-=r,i=t=f(t,u).previousSibling,u=t.nodeValue.length,r=0):u=0):(3==i.nodeType&&r>0&&r<i.nodeValue.length&&(i=f(i,r),r=0),3==t.nodeType&&u>0&&u<t.nodeValue.length&&(t=f(t,u).previousSibling,u=t.nodeValue.length)),{startContainer:i,startOffset:r,endContainer:t,endOffset:u}};this.normalize=function(i){function f(f){function y(i,r){for(var u=new t(i,n.getParent(i.parentNode,n.isBlock)||c);i=u[r?"prev":"next"]();)if("BR"===i.nodeName)return!0}function w(n,t){return n.previousSibling&&n.previousSibling.nodeName==t}function a(i,f){var v,h,a;if(f=f||o,a=n.getParent(f.parentNode,n.isBlock)||c,i&&"BR"==f.nodeName&&p&&n.isEmpty(a))return o=f.parentNode,s=n.nodeIndex(f),void(r=!0);for(v=new t(f,a);e=v[i?"prev":"next"]();){if("false"===n.getContentEditableParent(e))return;if(3===e.nodeType&&e.nodeValue.length>0)return o=e,s=i?e.nodeValue.length:0,void(r=!0);if(n.isBlock(e)||l[e.nodeName.toLowerCase()])return;h=e}u&&h&&(o=h,r=!0,s=0)}var o,s,v,c=n.getRoot(),e,l,h,p;if(o=i[(f?"start":"end")+"Container"],s=i[(f?"start":"end")+"Offset"],p=1==o.nodeType&&s===o.childNodes.length,l=n.schema.getNonEmptyElements(),h=f,1==o.nodeType&&s>o.childNodes.length-1&&(h=!1),9===o.nodeType&&(o=n.getRoot(),s=0),o===c){if(h&&(e=o.childNodes[s>0?s-1:0],e&&(l[e.nodeName]||"TABLE"==e.nodeName)))return;if(o.hasChildNodes()&&(s=Math.min(!h&&s>0?s-1:s,o.childNodes.length-1),o=o.childNodes[s],s=0,o.hasChildNodes()&&!/TABLE/.test(o.nodeName))){e=o;v=new t(o,c);do{if(3===e.nodeType&&e.nodeValue.length>0){s=h?0:e.nodeValue.length;o=e;r=!0;break}if(l[e.nodeName.toLowerCase()]){s=n.nodeIndex(e);o=e.parentNode;"IMG"!=e.nodeName||h||s++;r=!0;break}}while(e=h?v.next():v.prev())}}u&&(3===o.nodeType&&0===s&&a(!0),1===o.nodeType&&(e=o.childNodes[s],e||(e=o.childNodes[s-1]),!e||"BR"!==e.nodeName||w(e,"A")||y(e)||y(e,!0)||a(!0,e)));h&&!u&&3===o.nodeType&&s===o.nodeValue.length&&a(!1);r&&i["set"+(f?"Start":"End")](o,s)}var r,u;return u=i.collapsed,f(!0),u||f(),r&&u&&i.collapse(!0),r}}var u=n.each;return i.compareRanges=function(n,t){if(n&&t){if(!n.item&&!n.duplicate)return n.startContainer==t.startContainer&&n.startOffset==t.startOffset;if(n.item&&t.item&&n.item(0)===t.item(0)||n.isEqual&&t.isEqual&&t.isEqual(n))return!0}return!1},i});i(dr,[c],function(n){return function(t){function u(n){var r,u;if(u=t.$(n).parentsUntil(t.getBody()).add(n),u.length===i.length){for(r=u.length;r>=0&&u[r]===i[r];r--);if(-1===r)return i=u,!0}return i=u,!1}var r,i=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp",function(i){var u,f;u=t.selection.getRng();f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};"nodechange"!=i.type&&n.compareRanges(f,r)||t.fire("SelectionChange");r=f});t.on("SelectionChange",function(){var n=t.selection.getStart();!u(n)&&t.dom.isChildOf(n,t.getBody())&&t.nodeChanged({selectionChange:!0})});this.nodeChanged=function(n){var f=t.selection,i,r,u;!t.initialized||t.settings.disable_nodechange||t.settings.readonly||(u=t.getBody(),i=f.getStart()||u,i=i.ownerDocument!=t.getDoc()?t.getBody():i,"IMG"==i.nodeName&&f.isCollapsed()&&(i=i.parentNode),r=[],t.dom.getParent(i,function(n){return n===u?!0:void r.push(n)}),n=n||{},n.element=i,n.parents=r,t.fire("NodeChange",n))}}});i(p,[],function(){function t(n,t,i){var u,r,f=i?"lastChild":"firstChild",e=i?"prev":"next";if(n[f])return n[f];if(n!==t){if(u=n[e])return u;for(r=n.parent;r&&r!==t;r=r.parent)if(u=r[e])return u}}function n(n,t){this.name=n;this.type=t;1===t&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return n.prototype={replace:function(n){var t=this;return n.parent&&n.remove(),t.insert(n,t),t.remove(),t},attr:function(n,t){var u=this,i,r,f;if("string"!=typeof n){for(r in n)u.attr(r,n[r]);return u}if(i=u.attributes){if(t!==f){if(null===t){if(n in i.map)for(delete i.map[n],r=i.length;r--;)if(i[r].name===n)return i=i.splice(r,1),u;return u}if(n in i.map){for(r=i.length;r--;)if(i[r].name===n){i[r].value=t;break}}else i.push({name:n,value:t});return i.map[n]=t,u}return i.map[n]}},clone:function(){var r=this,u=new n(r.name,r.type),f,o,e,t,i;if(e=r.attributes){for(i=[],i.map={},f=0,o=e.length;o>f;f++)t=e[f],"id"!==t.name&&(i[i.length]={name:t.name,value:t.value},i.map[t.name]=t.value);u.attributes=i}return u.value=r.value,u.shortEnded=r.shortEnded,u},wrap:function(n){var t=this;return t.parent.insert(n,t),n.append(t),t},unwrap:function(){for(var t=this,i,n=t.firstChild;n;)i=n.next,t.insert(n,t,!0),n=i;t.remove()},remove:function(){var n=this,t=n.parent,i=n.next,r=n.prev;return t&&(t.firstChild===n?(t.firstChild=i,i&&(i.prev=null)):r.next=i,t.lastChild===n?(t.lastChild=r,r&&(r.next=null)):i.prev=r,n.parent=n.next=n.prev=null),n},append:function(n){var t=this,i;return n.parent&&n.remove(),i=t.lastChild,i?(i.next=n,n.prev=i,t.lastChild=n):t.lastChild=t.firstChild=n,n.parent=t,n},insert:function(n,t,i){var r;return n.parent&&n.remove(),r=t.parent||this,i?(t===r.firstChild?r.firstChild=n:t.prev.next=n,n.prev=t.prev,n.next=t,t.prev=n):(t===r.lastChild?r.lastChild=n:t.next.prev=n,n.next=t.next,n.prev=t,t.next=n),n.parent=r,n},getAll:function(n){for(var r=this,u=[],i=r.firstChild;i;i=t(i,r))i.name===n&&u.push(i);return u},empty:function(){var i=this,r,u,n;if(i.firstChild){for(r=[],n=i.firstChild;n;n=t(n,i))r.push(n);for(u=r.length;u--;)n=r[u],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(n){var e=this,r=e.firstChild,u,f;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(n[r.name])return!1;for(u=r.attributes.length;u--;)if(f=r.attributes[u].name,"name"===f||0===f.indexOf("data-mce-"))return!1}if(8===r.type||3===r.type&&!i.test(r.value))return!1}while(r=t(r,e));return!0},walk:function(n){return t(this,null,n)}},n.create=function(t,i){var u,f;if(u=new n(t,r[t]||1),i)for(f in i)u.attr(f,i[f]);return u},n});i(l,[r],function(n){function t(n,t){return n?n.split(t||" "):[]}function s(n){function u(n,i,r){function h(n){for(var i={},t=0,r=n.length;r>t;t++)i[n[t]]={};return i}var e,u,o,f=arguments;for(r=r||[],i=i||"","string"==typeof r&&(r=t(r)),u=3;u<f.length;u++)"string"==typeof f[u]&&(f[u]=t(f[u])),r.push.apply(r,f[u]);for(n=t(n),e=n.length;e--;)o=[].concat(c,t(i)),s[n[e]]={attributes:h(o),attributesOrder:o,children:h(r)}}function f(n,i){var u,f,r,e;for(n=t(n),u=n.length,i=t(i);u--;)for(f=s[n[u]],r=0,e=i.length;e>r;r++)f.attributes[i[r]]={},f.attributesOrder.push(i[r])}var s={},c,h,o,e,l,a;return r[n]?r[n]:(c=t("id accesskey class dir lang style tabindex title"),h=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),o=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=n&&(c.push.apply(c,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),h.push.apply(h,t("article aside details dialog figure header footer hgroup section nav")),o.push.apply(o,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=n&&(c.push("xml:lang"),a=t("acronym applet basefont big font strike tt"),o.push.apply(o,a),i(a,function(n){u(n,"",o)}),l=t("center dir isindex noframes"),h.push.apply(h,l),e=[].concat(h,o),i(l,function(n){u(n,"",e)})),e=e||[].concat(h,o),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",e),u("address dt dd div caption","",e),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),u("blockquote","cite",e),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",e),u("dl","","dt dd"),u("a","href target rel media hreflang type",o),u("q","cite",o),u("ins del","cite datetime",e),u("img","src alt usemap ismap width height"),u("iframe","src name width height",e),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",e,"param"),u("param","name value"),u("map","name",e,"area"),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+("html4"==n?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",e),u("th","colspan rowspan headers scope abbr",e),u("form","accept-charset action autocomplete enctype method name novalidate target",e),u("fieldset","disabled form name",e,"legend"),u("label","form for",o),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==n?e:o),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",e,"li"),u("noscript","",e),"html4"!=n&&(u("wbr"),u("ruby","",o,"rt rp"),u("figcaption","",e),u("mark rt rp summary bdi","",o),u("canvas","width height",e),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",e,"track source"),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",e,"track source"),u("source","src type media"),u("track","kind src srclang label default"),u("datalist","",o,"option"),u("article section nav aside header footer","",e),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",e,"figcaption"),u("time","datetime",o),u("dialog","open",e),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",o),u("progress","value max",o),u("meter","value min max low high optimum",o),u("details","open",e,"summary"),u("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=n&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select","onchange"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),"html4"!=n&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("iframe","sandbox seamless allowfullscreen")),i(t("a form meter progress dfn"),function(n){s[n]&&delete s[n].children[n]}),delete s.caption.children.table,r[n]=s,s)}function e(n,t){var r;return n&&(r={},"string"==typeof n&&(n={"*":n}),i(n,function(n,i){r[i]="map"==t?u(n,/[, ]/):o(n,/[, ]/)})),r}var r={},u=n.makeMap,i=n.each,f=n.extend,o=n.explode,h=n.inArray;return function(n){function v(t,i,e){var o=n[t];return o?o=u(o,/[, ]/,u(o.toUpperCase(),/[, ]/)):(o=r[t],o||(o=u(i," ",u(i.toUpperCase()," ")),o=f(o,e),r[t]=o)),o}function tt(n){return new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$")}function y(n){var b,rt,k,ut,r,i,e,a,v,f,d,c,o,s,g,y,nt,it,w,ft=/[*?+]/;if(n)for(n=t(n,","),l["@"]&&(y=l["@"].attributes,nt=l["@"].attributesOrder),b=0,rt=n.length;rt>b;b++)if(r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/.exec(n[b])){if(s=r[1],v=r[2],g=r[3],a=r[5],c={},o=[],i={attributes:c,attributesOrder:o},"#"===s&&(i.paddEmpty=!0),"-"===s&&(i.removeEmpty=!0),"!"===r[4]&&(i.removeEmptyAttrs=!0),y){for(it in y)c[it]=y[it];o.push.apply(o,nt)}if(a)for(a=t(a,"|"),k=0,ut=a.length;ut>k;k++)if(r=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/.exec(a[k])){if(e={},d=r[1],f=r[2].replace(/::/g,":"),s=r[3],w=r[4],"!"===d&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(f),e.required=!0),"-"===d){delete c[f];o.splice(h(o,f),1);continue}s&&("="===s&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:f,value:w}),e.defaultValue=w),":"===s&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:f,value:w}),e.forcedValue=w),"<"===s&&(e.validValues=u(w,"?")));ft.test(f)?(i.attributePatterns=i.attributePatterns||[],e.pattern=tt(f),i.attributePatterns.push(e)):(c[f]||o.push(f),c[f]=e)}y||"@"!=v||(y=c,nt=o);g&&(i.outputName=v,l[g]=i);ft.test(v)?(i.pattern=tt(v),p.push(i)):l[v]=i}}function it(n){l={};p=[];y(n);i(d,function(n,t){a[t]=n.children})}function rt(n){var u=/^(~)?(.+)$/;n&&(r.text_block_elements=r.block_elements=null,i(t(n,","),function(n){var o=u.exec(n),s="~"===o[1],e=s?"span":"div",t=o[2],r;(a[t]=a[e],at[t]=e,s||(w[t.toUpperCase()]={},w[t]={}),l[t])||(r=l[e],r=f({},r),delete r.removeEmptyAttrs,delete r.removeEmpty,l[t]=r);i(a,function(n,i){n[e]&&(a[i]=n=f({},a[i]),n[t]=n[e])})}))}function b(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;n&&i(t(n,","),function(n){var u=r.exec(n),e,o;u&&(o=u[1],e=o?a[u[2]]:a[u[2]]={"#comment":{}},e=a[u[2]],i(t(u[3],"|"),function(n){"-"===o?(a[u[2]]=e=f({},a[u[2]]),delete e[n]):e[n]={}}))})}function k(n){var t=l[n],i;if(t)return t;for(i=p.length;i--;)if(t=p[i],t.pattern.test(n))return t}var c=this,l={},a={},p=[],ut,ft,d,et,ot,g,st,ht,w,ct,nt,lt,at={},vt={};n=n||{};d=s(n.schema);n.verify_html===!1&&(n.valid_elements="*[*]");ut=e(n.valid_styles);ft=e(n.invalid_styles,"map");ht=e(n.valid_classes,"map");et=v("whitespace_elements","pre script noscript style textarea video audio iframe object");ot=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");g=v("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");st=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");ct=v("non_empty_elements","td th iframe video audio object script",g);nt=v("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");w=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",nt);lt=v("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");i((n.special||"script noscript style textarea").split(" "),function(n){vt[n]=new RegExp("<\/"+n+"[^>]*>","gi")});n.valid_elements?it(n.valid_elements):(i(d,function(n,t){l[t]={attributes:n.attributes,attributesOrder:n.attributesOrder};a[t]=n.children}),"html5"!=n.schema&&i(t("strong/b em/i"),function(n){n=t(n,"/");l[n[1]].outputName=n[0]}),l.img.attributesDefault=[{name:"alt",value:""}],i(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(n){l[n]&&(l[n].removeEmpty=!0)}),i(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(n){l[n].paddEmpty=!0}),i(t("span"),function(n){l[n].removeEmptyAttrs=!0}));rt(n.custom_elements);b(n.valid_children);y(n.extended_valid_elements);b("+ol[ul|ol],+ul[ul|ol]");n.invalid_elements&&i(o(n.invalid_elements),function(n){l[n]&&delete l[n]});k("span")||y("span[!data-mce-type|*]");c.children=a;c.getValidStyles=function(){return ut};c.getInvalidStyles=function(){return ft};c.getValidClasses=function(){return ht};c.getBoolAttrs=function(){return st};c.getBlockElements=function(){return w};c.getTextBlockElements=function(){return nt};c.getTextInlineElements=function(){return lt};c.getShortEndedElements=function(){return g};c.getSelfClosingElements=function(){return ot};c.getNonEmptyElements=function(){return ct};c.getWhiteSpaceElements=function(){return et};c.getSpecialElements=function(){return vt};c.isValidChild=function(n,t){var i=a[n];return!(!i||!i[t])};c.isValid=function(n,t){var i,r,u=k(n);if(u){if(!t||u.attributes[t])return!0;if(i=u.attributePatterns)for(r=i.length;r--;)if(i[r].pattern.test(n))return!0}return!1};c.getElementRule=k;c.getCustomElements=function(){return at};c.addValidElements=y;c.setValidElements=it;c.addCustomElements=rt;c.addValidChildren=b;c.elements=l}});i(ht,[l,h,r],function(n,t,i){function r(n,t,i){var f=1,e,r,u,o;for(o=n.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,u.lastIndex=e=i;r=u.exec(t);){if(e=u.lastIndex,"/"===r[1])f--;else if(!r[1]){if(r[2]in o)continue;f++}if(0===f)break}return e}function u(u,e){function s(){}var o=this;u=u||{};o.schema=e=e||new n;u.fix_self_closing!==!1&&(u.fix_self_closing=!0);f("comment cdata text start end pi doctype".split(" "),function(n){n&&(o[n]=u[n]||s)});o.parse=function(n){function ht(n){for(var i,t=a.length;t--&&a[t].name!==n;);if(t>=0){for(i=a.length-1;i>=t;i--)n=a[i],n.valid&&l.end(n.name);a.length=t}}function gt(n,t,i,r,f){var e,s,o;if(t=t.toLowerCase(),i=t in at?t:st(i||r||f||""),d&&!tt&&0!==t.indexOf("data-")){if(e=vt[t],!e&&it){for(s=it.length;s--&&(e=it[s],!e.pattern.test(t)););-1===s&&(e=null)}if(!e)return;if(e.validValues&&!(i in e.validValues))return}if(ni[t]&&!u.allow_script_urls){o=i.replace(/[\s\u0000-\u001F]+/g,"");try{o=decodeURIComponent(o)}catch(c){o=unescape(o)}if(ti.test(o))return;if(!u.allow_html_data_urls&&ii.test(o)&&!/^data:image\//i.test(o))return}h.map[t]=i;h.push({name:t,value:i})}var l=this,o,s=0,f,et,a=[],h,c,nt,w,tt,ct,lt,at,ot,d,b,v,p,k,vt,it,rt,ut,ft,yt,pt,g,wt,bt,y,kt=0,st=t.decode,dt,ni=i.makeMap("src,href,data,background,formaction,poster"),ti=/((java|vb)script|mhtml):/i,ii=/^data:/i;for(g=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),wt=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,lt=e.getShortEndedElements(),pt=u.self_closing_elements||e.getSelfClosingElements(),at=e.getBoolAttrs(),d=u.validate,ct=u.remove_internals,dt=u.fix_self_closing,bt=e.getSpecialElements();o=g.exec(n);){if(s<o.index&&l.text(st(n.substr(s,o.index-s))),f=o[6])f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),ht(f);else if(f=o[7]){if(f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),ot=f in lt,dt&&pt[f]&&a.length>0&&a[a.length-1].name===f&&ht(f),!d||(b=e.getElementRule(f))){if(v=!0,d&&(vt=b.attributes,it=b.attributePatterns),(k=o[8])?(tt=-1!==k.indexOf("data-mce-type"),tt&&ct&&(v=!1),h=[],h.map={},k.replace(wt,gt)):(h=[],h.map={}),d&&!tt){if(rt=b.attributesRequired,ut=b.attributesDefault,ft=b.attributesForced,yt=b.removeEmptyAttrs,yt&&!h.length&&(v=!1),ft)for(c=ft.length;c--;)p=ft[c],w=p.name,y=p.value,"{$uid}"===y&&(y="mce_"+kt++),h.map[w]=y,h.push({name:w,value:y});if(ut)for(c=ut.length;c--;)p=ut[c],w=p.name,w in h.map||(y=p.value,"{$uid}"===y&&(y="mce_"+kt++),h.map[w]=y,h.push({name:w,value:y}));if(rt){for(c=rt.length;c--&&!(rt[c]in h.map););-1===c&&(v=!1)}if(p=h.map["data-mce-bogus"]){if("all"===p){s=r(e,n,g.lastIndex);g.lastIndex=s;continue}v=!1}}v&&l.start(f,h,ot)}else v=!1;if(et=bt[f]){et.lastIndex=s=o.index+o[0].length;(o=et.exec(n))?(v&&(nt=n.substr(s,o.index-s)),s=o.index+o[0].length):(nt=n.substr(s),s=n.length);v&&(nt.length>0&&l.text(nt,!0),l.end(f));g.lastIndex=s;continue}ot||(k&&k.indexOf("/")==k.length-1?v&&l.end(f):a.push({name:f,valid:v}))}else(f=o[1])?(">"===f.charAt(0)&&(f=" "+f),u.allow_conditional_comments||"[if"!==f.substr(0,3)||(f=" "+f),l.comment(f)):(f=o[2])?l.cdata(f):(f=o[3])?l.doctype(f):(f=o[4])&&l.pi(f,o[5]);s=o.index+o[0].length}for(s<n.length&&l.text(st(n.substr(s))),c=a.length-1;c>=0;c--)f=a[c],f.valid&&l.end(f.name)}}var f=i.each;return u.findEndTag=r,u});i(ct,[p,l,ht,r],function(n,t,i,r){var u=r.makeMap,f=r.each,e=r.explode,o=r.extend;return function(r,s){function y(t){var v,i,f,e,y,l,a,c,o,p,b,w,r,k;for(b=u("tr,td,th,tbody,thead,tfoot,table"),p=s.getNonEmptyElements(),w=s.getTextBlockElements(),v=0;v<t.length;v++)if(i=t[v],i.parent&&!i.fixed)if(w[i.name]&&"li"==i.parent.name){for(r=i.next;r&&w[r.name];)r.name="li",r.fixed=!0,i.parent.insert(r,i.parent),r=r.next;i.unwrap(i)}else{for(e=[i],f=i.parent;f&&!s.isValidChild(f.name,i.name)&&!b[f.name];f=f.parent)e.push(f);if(f&&e.length>1){for(e.reverse(),y=l=h.filterNode(e[0].clone()),o=0;o<e.length-1;o++){for(s.isValidChild(l.name,e[o].name)?(a=h.filterNode(e[o].clone()),l.append(a)):a=l,c=e[o].firstChild;c&&c!=e[o+1];)k=c.next,a.append(c),c=k;l=a}y.isEmpty(p)?f.insert(i,e[0],!0):(f.insert(y,e[0],!0),f.insert(i,y));f=e[0];(f.isEmpty(p)||f.firstChild===f.lastChild&&"br"===f.firstChild.name)&&f.empty().remove()}else if(i.parent){if("li"===i.name){if(r=i.prev,r&&("ul"===r.name||"ul"===r.name)){r.append(i);continue}if(r=i.next,r&&("ul"===r.name||"ul"===r.name)){r.insert(i,r.firstChild,!0);continue}i.wrap(h.filterNode(new n("ul",1)));continue}s.isValidChild(i.parent.name,"div")&&s.isValidChild("div",i.name)?i.wrap(h.filterNode(new n("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}var h=this,v={},c=[],l={},a={};r=r||{};r.validate="validate"in r?r.validate:!0;r.root_name=r.root_name||"body";h.schema=s=s||new t;h.filterNode=function(n){var r,t,i;for((t in v)&&(i=l[t],i?i.push(n):l[t]=[n]),r=c.length;r--;)t=c[r].name,t in n.attributes.map&&(i=a[t],i?i.push(n):a[t]=[n]);return n};h.addNodeFilter=function(n,t){f(e(n),function(n){var i=v[n];i||(v[n]=i=[]);i.push(t)})};h.addAttributeFilter=function(n,t){f(e(n),function(n){for(var i=0;i<c.length;i++)if(c[i].name===n)return void c[i].callbacks.push(t);c.push({name:n,callbacks:[t]})})};h.parse=function(t,f){function wt(){function i(t){t&&(n=t.firstChild,n&&3==n.type&&(n.value=n.value.replace(ut,"")),n=t.lastChild,n&&3==n.type&&(n.value=n.value.replace(ft,"")))}var n=d.firstChild,u,t;if(s.isValidChild(d.name,et.toLowerCase())){for(;n;)u=n.next,3==n.type||1==n.type&&"p"!==n.name&&!tt[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=k(et,1),t.attr(r.forced_root_block_attrs),d.insert(t,n),t.append(n)):(i(t),t=null),n=u;i(t)}}function k(t,i){var r=new n(t,i),u;return t in v&&(u=l[t],u?u.push(r):l[t]=[r]),r}function ot(n){for(var i,r,t=n.prev;t&&3===t.type;)i=t.value.replace(ft,""),i.length>0?(t.value=i,t=t.prev):(r=t.prev,t.remove(),t=r)}function bt(n){var t,i={};for(t in n)"li"!==t&&"p"!=t&&(i[t]=n[t]);return i}var at,d,e,w,b,it,h,vt,p,rt,nt,tt,ut,st=[],g,ft,yt,ht,ct,lt,pt,et;if(f=f||{},l={},a={},tt=o(u("script,style,head,html,body,title,meta,param"),s.getBlockElements()),pt=s.getNonEmptyElements(),lt=s.children,nt=r.validate,et="forced_root_block"in f?f.forced_root_block:r.forced_root_block,ct=s.getWhiteSpaceElements(),ut=/^[ \t\r\n]+/,ft=/[ \t\r\n]+$/,yt=/[ \t\r\n]+/g,ht=/^[ \t\r\n]+$/,at=new i({validate:nt,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:bt(s.getSelfClosingElements()),cdata:function(n){e.append(k("#cdata",4)).value=n},text:function(n,t){var i;g||(n=n.replace(yt," "),e.lastChild&&tt[e.lastChild.name]&&(n=n.replace(ut,"")));0!==n.length&&(i=k("#text",3),i.raw=!!t,e.append(i).value=n)},comment:function(n){e.append(k("#comment",8)).value=n},pi:function(n,t){e.append(k(n,7)).value=t;ot(e)},doctype:function(n){var t;t=e.append(k("#doctype",10));t.value=n;ot(e)},start:function(n,t,i){var r,f,h,u,o;if(h=nt?s.getElementRule(n):{}){for(r=k(h.outputName||n,1),r.attributes=t,r.shortEnded=i,e.append(r),o=lt[e.name],o&&lt[r.name]&&!o[r.name]&&st.push(r),f=c.length;f--;)u=c[f].name,u in t.map&&(p=a[u],p?p.push(r):a[u]=[r]);tt[n]&&ot(r);i||(e=r);!g&&ct[n]&&(g=!0)}},end:function(t){var i,f,r,u,o;if(f=nt?s.getElementRule(t):{}){if(tt[t]&&!g){if(i=e.firstChild,i&&3===i.type)if(r=i.value.replace(ut,""),r.length>0)i.value=r,i=i.next;else for(u=i.next,i.remove(),i=u;i&&3===i.type;)r=i.value,u=i.next,(0===r.length||ht.test(r))&&(i.remove(),i=u),i=u;if(i=e.lastChild,i&&3===i.type)if(r=i.value.replace(ft,""),r.length>0)i.value=r,i=i.prev;else for(u=i.prev,i.remove(),i=u;i&&3===i.type;)r=i.value,u=i.prev,(0===r.length||ht.test(r))&&(i.remove(),i=u),i=u}if(g&&ct[t]&&(g=!1),(f.removeEmpty||f.paddEmpty)&&e.isEmpty(pt))if(f.paddEmpty)e.empty().append(new n("#text","3")).value=" ";else if(!e.attributes.map.name&&!e.attributes.map.id)return o=e.parent,e.unwrap(),void(e=o);e=e.parent}}},s),d=e=new n(f.context||r.root_name,11),at.parse(t),nt&&st.length&&(f.context?f.invalid=!0:y(st)),et&&("body"==d.name||f.isRootContent)&&wt(),!f.invalid){for(rt in l){for(p=v[rt],w=l[rt],h=w.length;h--;)w[h].parent||w.splice(h,1);for(b=0,it=p.length;it>b;b++)p[b](w,rt,f)}for(b=0,it=c.length;it>b;b++)if(p=c[b],p.name in a){for(w=a[p.name],h=w.length;h--;)w[h].parent||w.splice(h,1);for(h=0,vt=p.callbacks.length;vt>h;h++)p.callbacks[h](w,p.name,f)}}return d};r.remove_trailing_brs&&h.addNodeFilter("br",function(t){var e,v=t.length,r,l=o({},s.getBlockElements()),y=s.getNonEmptyElements(),i,f,u,h,c,a;for(l.body=1,e=0;v>e;e++)if(r=t[e],i=r.parent,l[r.parent.name]&&r===i.lastChild){for(u=r.prev;u;){if(h=u.name,"span"!==h||"bookmark"!==u.attr("data-mce-type")){if("br"!==h)break;if("br"===h){r=null;break}}u=u.prev}r&&(r.remove(),i.isEmpty(y)&&(c=s.getElementRule(i.name),c&&(c.removeEmpty?i.remove():c.paddEmpty&&(i.empty().append(new n("#text",3)).value=" "))))}else{for(f=r;i&&i.firstChild===f&&i.lastChild===f&&(f=i,!l[i.name]);)i=i.parent;f===i&&(a=new n("#text",3),a.value=" ",r.replace(a))}});r.allow_html_in_named_anchor||h.addAttributeFilter("id,name",function(n){for(var r=n.length,i,u,f,t;r--;)if(t=n[r],"a"===t.name&&t.firstChild&&!t.attr("href")){f=t.parent;i=t.lastChild;do u=i.prev,f.insert(i,t),i=u;while(i)}});r.validate&&s.getValidClasses()&&h.addAttributeFilter("class",function(n){for(var h=n.length,u,o,f,e,t,c=s.getValidClasses(),i,r;h--;){for(u=n[h],o=u.attr("class").split(" "),t="",f=0;f<o.length;f++)e=o[f],r=!1,i=c["*"],i&&i[e]&&(r=!0),i=c[u.name],r||!i||i[e]||(r=!0),r&&(t&&(t+=" "),t+=e);t.length||(t=null);u.attr("class",t)}})}});i(fi,[h,r],function(n,t){var i=t.makeMap;return function(t){var r=[],u,o,f,e,s;return t=t||{},u=t.indent,o=i(t.indent_before||""),f=i(t.indent_after||""),e=n.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(n,t,i){var c,a,l,h;if(u&&o[n]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",n),t)for(c=0,a=t.length;a>c;c++)l=t[c],r.push(" ",l.name,'="',e(l.value,!0),'"');r[r.length]=!i||s?">":" />";i&&u&&f[n]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(n){var t;r.push("<\/",n,">");u&&f[n]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(n,t){n.length>0&&(r[r.length]=t?n:e(n))},cdata:function(n){r.push("<![CDATA[",n,"]\]>")},comment:function(n){r.push("<!--",n,"-->")},pi:function(n,t){t?r.push("<?",n," ",t,"?>"):r.push("<?",n,"?>");u&&r.push("\n")},doctype:function(n){r.push("<!DOCTYPE",n,">",u?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}});i(tt,[fi,l],function(n,t){return function(i,r){var f=this,u=new n(i);i=i||{};i.validate="validate"in i?i.validate:!0;f.schema=r=r||new t;f.writer=u;f.serialize=function(n){function t(n){var y=f[n.type],p,a,i,o,c,s,h,l,v;if(y)y(n);else{if(p=n.name,a=n.shortEnded,i=n.attributes,e&&i&&i.length>1){for(s=[],s.map={},v=r.getElementRule(n.name),h=0,l=v.attributesOrder.length;l>h;h++)o=v.attributesOrder[h],o in i.map&&(c=i.map[o],s.map[o]=c,s.push({name:o,value:c}));for(h=0,l=i.length;l>h;h++)o=i[h].name,o in s.map||(c=i.map[o],s.map[o]=c,s.push({name:o,value:c}));i=s}if(u.start(n.name,i,a),!a){if(n=n.firstChild)do t(n);while(n=n.next);u.end(p)}}}var f,e;return e=i.validate,f={3:function(n){u.text(n.value,n.raw)},8:function(n){u.comment(n.value)},7:function(n){u.pi(n.name,n.value)},10:function(n){u.doctype(n.value)},4:function(n){u.cdata(n.value)},11:function(n){if(n=n.firstChild)do t(n);while(n=n.next)}},u.reset(),1!=n.type||i.inner?f[11](n):t(n),u.getContent()}}});i(ei,[o,ct,h,tt,p,l,u,r],function(n,t,i,r,u,f,e,o){var s=o.each,h=o.trim,c=n.DOM;return function(n,u){var l,a,o;return u&&(l=u.dom,a=u.schema),l=l||c,a=a||new f(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs="remove_trailing_brs"in n?n.remove_trailing_brs:!0,o=new t(n,a),o.addAttributeFilter("data-mce-tabindex",function(n,t){for(var r=n.length,i;r--;)i=n[r],i.attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)}),o.addAttributeFilter("src,href,style",function(t,i){for(var f=t.length,u,r,e="data-mce-"+i,o=n.url_converter,s=n.url_converter_scope,h;f--;)u=t[f],r=u.attributes.map[e],r!==h?(u.attr(i,r.length>0?r:null),u.attr(e,null)):(r=u.attributes.map[i],"style"===i?r=l.serializeStyle(l.parseStyle(r),u.name):o&&(r=o.call(s,r,i,u.name)),u.attr(i,r.length>0?r:null))}),o.addAttributeFilter("class",function(n){for(var r=n.length,i,t;r--;)i=n[r],t=i.attr("class"),t&&(t=i.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),i.attr("class",t.length>0?t:null))}),o.addAttributeFilter("data-mce-type",function(n,t,i){for(var u=n.length,r;u--;)r=n[u],"bookmark"!==r.attributes.map["data-mce-type"]||i.cleanup||r.remove()}),o.addNodeFilter("noscript",function(n){for(var r=n.length,t;r--;)t=n[r].firstChild,t&&(t.value=i.decode(t.value))}),o.addNodeFilter("script,style",function(n,t){function f(n){return n.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var e=n.length,i,r,u;e--;)i=n[e],r=i.firstChild?i.firstChild.value:"","script"===t?(u=i.attr("type"),u&&i.attr("type","mce-no/type"==u?null:u.replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+f(r)+"\n// ]\]>")):r.length>0&&(i.firstChild.value="<!--\n"+f(r)+"\n-->")}),o.addNodeFilter("#comment",function(n){for(var i=n.length,t;i--;)t=n[i],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),o.addNodeFilter("xml:namespace,input",function(n,t){for(var r=n.length,i;r--;)i=n[r],7===i.type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))}),n.fix_list_elements&&o.addNodeFilter("ul,ol",function(n){for(var r=n.length,t,i;r--;)t=n[r],i=t.parent,("ul"===i.name||"ol"===i.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),o.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),{schema:a,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(t,i){var v=this,f,u,c,y,p;return e.ie&&l.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),l.setHTML(t,p)):t=t.cloneNode(!0),f=t.ownerDocument.implementation,f.createHTMLDocument&&(u=f.createHTMLDocument(""),s("BODY"==t.nodeName?t.childNodes:[t],function(n){u.body.appendChild(u.importNode(n,!0))}),t="BODY"!=t.nodeName?u.body.firstChild:u.body,c=l.doc,l.doc=u),i=i||{},i.format=i.format||"html",i.selection&&(i.forced_root_block=""),i.no_events||(i.node=t,v.onPreProcess(i)),y=new r(n,a),i.content=y.serialize(o.parse(h(i.getInner?t.innerHTML:l.getOuterHTML(t)),i)),i.cleanup||(i.content=i.content.replace(/\uFEFF/g,"")),i.no_events||v.onPostProcess(i),c&&(l.doc=c),i.node=null,i.content},addRules:function(n){a.addValidElements(n)},setRules:function(n){a.setValidElements(n)},onPreProcess:function(n){u&&u.fire("PreProcess",n)},onPostProcess:function(n){u&&u.fire("PostProcess",n)}}}});i(oi,[],function(){function n(n){function i(t,i){var r,c=0,s,a,l,f,e,h,o=-1,u;if(r=t.duplicate(),r.collapse(i),u=r.parentElement(),u.ownerDocument===n.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(l=u.children,s=l.length-1;s>=c;)if(h=Math.floor((c+s)/2),f=l[h],r.moveToElementText(f),o=r.compareEndPoints(i?"StartToStart":"EndToEnd",t),o>0)s=h-1;else{if(!(0>o))return{node:f};c=h+1}if(0>o)for(f?r.collapse(!1):(r.moveToElementText(u),r.collapse(!0),f=u,a=!0),e=0;0!==r.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&u==r.parentElement();)e++;else for(r.collapse(!0),e=0;0!==r.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&u==r.parentElement();)e++;return{node:f,position:o,offset:e,inside:a}}}function u(){function s(n){var s=i(f,n),r,o,e=0,t,c,h;if(r=s.node,o=s.offset,s.inside&&!r.hasChildNodes())return void u[n?"setStart":"setEnd"](r,0);if(o===c)return void u[n?"setStartBefore":"setEndAfter"](r);if(s.position<0){if(t=s.inside?r.firstChild:r.nextSibling,!t)return void u[n?"setStartAfter":"setEndAfter"](r);if(!o)return void(3==t.nodeType?u[n?"setStart":"setEnd"](t,0):u[n?"setStartBefore":"setEndBefore"](t));for(;t;){if(3==t.nodeType&&(h=t.nodeValue,e+=h.length,e>=o)){r=t;e-=o;e=h.length-e;break}t=t.nextSibling}}else{if(t=r.previousSibling,!t)return u[n?"setStartBefore":"setEndBefore"](r);if(!o)return void(3==r.nodeType?u[n?"setStart":"setEnd"](t,r.nodeValue.length):u[n?"setStartAfter":"setEndAfter"](t));for(;t;){if(3==t.nodeType&&(e+=t.nodeValue.length,e>=o)){r=t;e-=o;break}t=t.previousSibling}}u[n?"setStart":"setEnd"](r,e)}var f=n.getRng(),u=t.createRng(),e,h,o,c,l;if(e=f.item?f.item(0):f.parentElement(),e.ownerDocument!=t.doc)return u;if(h=n.isCollapsed(),f.item)return u.setStart(e.parentNode,t.nodeIndex(e)),u.setEnd(u.startContainer,u.startOffset+1),u;try{s(!0);h||s()}catch(a){if(-2147024809!=a.number)throw a;l=r.getBookmark(2);o=f.duplicate();o.collapse(!0);e=o.parentElement();h||(o=f.duplicate(),o.collapse(!1),c=o.parentElement(),c.innerHTML=c.innerHTML);e.innerHTML=e.innerHTML;r.moveToBookmark(l);f=n.getRng();s(!0);h||s()}return u}var r=this,t=n.dom,f=!1;this.getBookmark=function(r){function e(n){for(var u,r,e=[],i=n.parentNode,f=t.getRoot().parentNode;i!=f&&9!==i.nodeType;){for(u=i.children,r=u.length;r--;)if(n===u[r]){e.push(r);break}n=i;i=i.parentNode}return e}function o(n){var t;return t=i(f,n),t?{position:t.position,offset:t.offset,indexes:e(t.node),inside:t.inside}:void 0}var f=n.getRng(),u={};return 2===r&&(f.item?u.start={ctrl:!0,indexes:e(f.item(0))}:(u.start=o(!0),n.isCollapsed()||(u.end=o()))),u};this.moveToBookmark=function(n){function u(n){for(var u,f,i=t.getRoot(),r=n.length-1;r>=0;r--)f=i.children,u=n[r],u<=f.length-1&&(i=f[u]);return i}function f(t){var e=n[t?"start":"end"],s,f,h,o;e&&(s=e.position>0,f=r.createTextRange(),f.moveToElementText(u(e.indexes)),o=e.offset,o!==h?(f.collapse(e.inside||s),f.moveStart("character",s?-o:o)):f.collapse(t),i.setEndPoint(t?"StartToStart":"EndToStart",f),t&&i.collapse(!0))}var i,r=t.doc.body;n.start&&(n.start.ctrl?(i=r.createControlRange(),i.addElement(u(n.start.indexes)),i.select()):(i=r.createTextRange(),f(!0),f(),i.select()))};this.addRange=function(i){function p(n){var i,y,u,h,v;u=t.create("a");i=n?r:c;y=n?o:s;h=e.duplicate();(i==l||i==l.documentElement)&&(i=a,y=0);3==i.nodeType?(i.parentNode.insertBefore(u,i),h.moveToElementText(u),h.moveStart("character",y),t.remove(u),e.setEndPoint(n?"StartToStart":"EndToEnd",h)):(v=i.childNodes,v.length?(y>=v.length?t.insertAfter(u,v[v.length-1]):i.insertBefore(u,v[y]),h.moveToElementText(u)):i.canHaveHTML&&(i.innerHTML="<span>&#xFEFF;<\/span>",u=i.firstChild,h.moveToElementText(u),h.collapse(f)),e.setEndPoint(n?"StartToStart":"EndToEnd",h),t.remove(u))}var e,h,r,o,c,s,u,l=n.dom.doc,a=l.body,v,y;if(r=i.startContainer,o=i.startOffset,c=i.endContainer,s=i.endOffset,e=a.createTextRange(),r==c&&1==r.nodeType){if(o==s&&!r.hasChildNodes()){if(r.canHaveHTML)return u=r.previousSibling,u&&!u.hasChildNodes()&&t.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,r.innerHTML="<span>&#xFEFF;<\/span><span>&#xFEFF;<\/span>",e.moveToElementText(r.lastChild),e.select(),t.doc.selection.clear(),r.innerHTML="",void(u&&(u.innerHTML=""));o=t.nodeIndex(r);r=r.parentNode}if(o==s-1)try{if(y=r.childNodes[o],h=a.createControlRange(),h.addElement(y),h.select(),v=n.getRng(),v.item&&y===v.item(0))return}catch(w){}}p(!0);p();e.select()};this.getRangeAt=u}return n});i(lt,[u],function(n){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(n){return n.shiftKey||n.ctrlKey||n.altKey},metaKeyPressed:function(t){return n.mac?t.metaKey:t.ctrlKey&&!t.altKey}}});i(si,[lt,r,u],function(n,t,i){return function(r,u){function vt(n){var t=u.settings.object_resizing;return t===!1||i.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===n.getAttribute("data-mce-resize")?!1:u.dom.is(n,t))}function rt(t){var i,r,y,a,v;i=t.screenX-ni;r=t.screenY-ti;s=i*l[2]+p;h=r*l[3]+w;s=5>s?5:s;h=5>h?5:h;y="IMG"==e.nodeName&&u.settings.resize_img_proportional!==!1?!n.modifierPressed(t):n.modifierPressed(t)||"IMG"==e.nodeName&&l[2]*l[3]!=0;y&&(st(i)>st(r)?(h=ht(s*it),s=ht(h/it)):(s=ht(h/it),h=ht(s*it)));f.setStyles(o,{width:s,height:h});a=l.startPos.x+i;v=l.startPos.y+r;a=a>0?a:0;v=v>0?v:0;f.setStyles(g,{left:a,top:v,display:"block"});g.innerHTML=s+" &times; "+h;l[2]<0&&o.clientWidth<=s&&f.setStyle(o,"left",nt+(p-s));l[3]<0&&o.clientHeight<=h&&f.setStyle(o,"top",tt+(w-h));i=c.scrollWidth-ii;r=c.scrollHeight-ri;i+r!==0&&f.setStyles(g,{left:a-i,top:v-r});ot||(u.fire("ObjectResizeStart",{target:e,width:p,height:w}),ot=!0)}function ut(){function n(n,t){t&&(e.style[n]||!u.schema.isValid(e.nodeName.toLowerCase(),n)?f.setStyle(e,n,t):f.setAttrib(e,n,t))}ot=!1;n("width",s);n("height",h);f.unbind(v,"mousemove",rt);f.unbind(v,"mouseup",ut);b!=v&&(f.unbind(b,"mousemove",rt),f.unbind(b,"mouseup",ut));f.remove(o);f.remove(g);k&&"TABLE"!=e.nodeName||ft(e);u.fire("ObjectResized",{target:e,width:s,height:h});u.nodeChanged()}function ft(n,t,r){var d,ft,et,ot,k;at();d=f.getPos(n,c);nt=d.x;tt=d.y;k=n.getBoundingClientRect();ft=k.width||k.right-k.left;et=k.height||k.bottom-k.top;e!=n&&(lt(),e=n,s=h=0);ot=u.fire("ObjectSelected",{target:n});vt(n)&&!ot.isDefaultPrevented()?gt(a,function(n,u){function h(t){ni=t.screenX;ti=t.screenY;p=e.clientWidth;w=e.clientHeight;it=w/p;l=n;n.startPos={x:ft*n[0]+nt,y:et*n[1]+tt};ii=c.scrollWidth;ri=c.scrollHeight;o=e.cloneNode(!0);f.addClass(o,"mce-clonedresizable");f.setAttrib(o,"data-mce-bogus","all");o.contentEditable=!1;o.unSelectabe=!0;f.setStyles(o,{left:nt,top:tt,margin:0});o.removeAttribute("data-mce-selected");c.appendChild(o);f.bind(v,"mousemove",rt);f.bind(v,"mouseup",ut);b!=v&&(f.bind(b,"mousemove",rt),f.bind(b,"mouseup",ut));g=f.add(c,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+w)}var s,a;return t?void(u==t&&h(r)):(s=f.get("mceResizeHandle"+u),s?f.show(s):(a=c,s=f.add(a,"div",{id:"mceResizeHandle"+u,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+u+"-resize; margin:0; padding:0"}),i.ie&&(s.contentEditable=!1)),n.elm||(f.bind(s,"mousedown",function(n){n.stopImmediatePropagation();n.preventDefault();h(n)}),n.elm=s),void f.setStyles(s,{left:ft*n[0]+nt-s.offsetWidth/2,top:et*n[1]+tt-s.offsetHeight/2}))}):y();e.setAttribute("data-mce-selected","1")}function y(){var t,n;at();e&&e.removeAttribute("data-mce-selected");for(t in a)n=f.get("mceResizeHandle"+t),n&&(f.unbind(n),f.remove(n))}function ct(n){function i(n,t){if(n)do if(n===t)return!0;while(n=n.parentNode)}var t;return gt(f.select("img[data-mce-selected],hr[data-mce-selected]"),function(n){n.removeAttribute("data-mce-selected")}),t="mousedown"==n.type?n.target:r.getNode(),t=f.$(t).closest(k?"table":"table,img,hr")[0],i(t,c)&&(kt(),i(r.getStart(),t)&&i(r.getEnd(),t)&&(!k||t!=r.getStart()&&"IMG"!==r.getStart().nodeName))?void ft(t):void y()}function yt(n,t,i){n&&n.attachEvent&&n.attachEvent("on"+t,i)}function pt(n,t,i){n&&n.detachEvent&&n.detachEvent("on"+t,i)}function wt(n){var t=n.srcElement,r,f,i,o,s,h,c;r=t.getBoundingClientRect();h=et.clientX-r.left;c=et.clientY-r.top;for(f in a)if(i=a[f],o=t.offsetWidth*i[0],s=t.offsetHeight*i[1],st(o-h)<8&&st(s-c)<8){l=i;break}ot=!0;u.fire("ObjectResizeStart",{target:e,width:e.clientWidth,height:e.clientHeight});u.getDoc().selection.empty();ft(t,f,et)}function bt(n){var t=n.srcElement;if(t!=e){if(u.fire("ObjectSelected",{target:t}),lt(),0===t.id.indexOf("mceResizeHandle"))return void(n.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(y(),e=t,yt(t,"resizestart",wt))}}function lt(){pt(e,"resizestart",wt)}function at(){var t,n;for(t in a)n=a[t],n.elm&&(f.unbind(n.elm),delete n.elm)}function kt(){try{u.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(n){}}function dt(n){var t;if(k){t=v.body.createControlRange();try{return t.addElement(n),t.select(),!0}catch(i){}}}function ui(){e=o=null;k&&(lt(),pt(c,"controlselect",bt))}var f=u.dom,gt=t.each,e,o,g,a,l,et,ni,ti,nt,tt,p,w,it,ot,s,h,v=u.getDoc(),b=document,k=i.ie&&i.ie<11,st=Math.abs,ht=Math.round,c=u.getBody(),ii,ri,d;return a={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},d=".mce-content-body",u.contentStyles.push(d+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+d+" .mce-resizehandle:hover {background: #000}"+d+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+d+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+d+" .mce-resize-helper {background-color: #555;background-color: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),u.on("init",function(){k?(u.on("ObjectResized",function(n){"TABLE"!=n.target.nodeName&&(y(),dt(n.target))}),yt(c,"controlselect",bt),u.on("mousedown",function(n){et=n})):(kt(),i.ie>=11&&(u.on("mouseup",function(n){var t=n.target.nodeName;/^(TABLE|IMG|HR)$/.test(t)&&(u.selection.select(n.target,"TABLE"==t),u.nodeChanged())}),u.dom.bind(c,"mscontrolselect",function(n){/^(TABLE|IMG|HR)$/.test(n.target.nodeName)&&(n.preventDefault(),"IMG"==n.target.tagName&&window.setTimeout(function(){u.selection.select(n.target)},0))})));u.on("nodechange mousedown mouseup ResizeEditor",ct);u.on("keydown keyup",function(n){e&&"TABLE"==e.nodeName&&ct(n)});u.on("hide",y)}),u.on("remove",at),{isResizable:vt,showResizeRect:ft,hideResizeRect:y,updateResizeRect:ct,controlSelect:dt,destroy:ui}}});i(it,[u,r],function(n,t){function i(i){var r=i.dom;this.getBookmark=function(n,u){function a(n,i){var u=0;return t.each(r.select(n),function(n,t){n==i&&(u=t)}),u}function y(n){function t(t){var i,r,u,f=t?"start":"end";i=n[f+"Container"];r=n[f+"Offset"];1==i.nodeType&&"TR"==i.nodeName&&(u=i.childNodes,i=u[Math.min(t?r:r-1,u.length-1)],i&&(r=t?0:i.childNodes.length,n["set"+(t?"Start":"End")](i,r)))}return t(!0),t(),n}function p(){function t(n,t){var i=n[t?"startContainer":"endContainer"],o=n[t?"startOffset":"endOffset"],h=[],f,s,c=0;if(3==i.nodeType){if(u)for(f=i.previousSibling;f&&3==f.nodeType;f=f.previousSibling)o+=f.nodeValue.length;h.push(o)}else s=i.childNodes,o>=s.length&&s.length&&(c=1,o=Math.max(0,s.length-1)),h.push(r.nodeIndex(s[o],u)+c);for(;i&&i!=e;i=i.parentNode)h.push(r.nodeIndex(i,u));return h}var f=i.getRng(!0),e=r.getRoot(),n={};return n.start=t(f,!0),i.isCollapsed()||(n.end=t(f)),n}var f,s,h,v,e,o,l="&#xFEFF;",c;if(2==n)return o=i.getNode(),e=o?o.nodeName:null,"IMG"==e?{name:e,index:a(e,o)}:i.tridentSel?i.tridentSel.getBookmark(n):p();if(n)return{rng:i.getRng()};if(f=i.getRng(),h=r.uniqueId(),v=i.isCollapsed(),c="overflow:hidden;line-height:0px",f.duplicate||f.item){if(f.item)return o=f.item(0),e=o.nodeName,{name:e,index:a(e,o)};s=f.duplicate();try{f.collapse();f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+c+'">'+l+"<\/span>");v||(s.collapse(!1),f.moveToElementText(s.parentElement()),0===f.compareEndPoints("StartToEnd",s)&&s.move("character",-1),s.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+c+'">'+l+"<\/span>"))}catch(w){return null}}else{if(o=i.getNode(),e=o.nodeName,"IMG"==e)return{name:e,index:a(e,o)};s=y(f.cloneRange());v||(s.collapse(!1),s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:c},l)));f=y(f);f.collapse(!0);f.insertNode(r.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:c},l))}return i.moveToBookmark({id:h,keep:1}),{id:h}};this.moveToBookmark=function(u){function c(n){var i=u[n?"start":"end"],r,t,e,o;if(i){for(e=i[0],t=v,r=i.length-1;r>=1;r--){if(o=t.childNodes,i[r]>o.length-1)return;t=o[i[r]]}3===t.nodeType&&(e=Math.min(i[0],t.nodeValue.length));1===t.nodeType&&(e=Math.min(i[0],t.childNodes.length));n?f.setStart(t,e):f.setEnd(t,e)}return!0}function l(i){var f=r.get(u.id+"_"+i),a,c,v,l,y=u.keep;if(f&&(a=f.parentNode,"start"==i?(y?(a=f.firstChild,c=1):c=r.nodeIndex(f),s=e=a,h=o=c):(y?(a=f.firstChild,c=1):c=r.nodeIndex(f),e=a,o=c),!y)){for(l=f.previousSibling,v=f.nextSibling,t.each(t.grep(f.childNodes),function(n){3==n.nodeType&&(n.nodeValue=n.nodeValue.replace(/\uFEFF/g,""))});f=r.get(u.id+"_"+i);)r.remove(f,1);l&&v&&l.nodeType==v.nodeType&&3==l.nodeType&&!n.opera&&(c=l.nodeValue.length,l.appendData(v.nodeValue),r.remove(v),"start"==i?(s=e=l,h=o=c):(e=l,o=c))}}function a(t){return!r.isBlock(t)||t.innerHTML||n.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var f,v,s,e,h,o;if(u)if(u.start){if(f=r.createRng(),v=r.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(u);c(!0)&&c()&&i.setRng(f)}else u.id?(l("start"),l("end"),s&&(f=r.createRng(),f.setStart(a(s),h),f.setEnd(a(e),o),i.setRng(f))):u.name?i.select(r.select(u.name)[u.index]):u.rng&&i.setRng(u.rng)}}return i.isBookmarkNode=function(n){return n&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},i});i(hi,[s,oi,si,c,it,u,r],function(n,i,r,u,f,e,o){function h(n,t,u,e){var o=this;o.dom=n;o.win=t;o.serializer=u;o.editor=e;o.bookmarkManager=new f(o);o.controlSelection=new r(o,e);o.win.getSelection||(o.tridentSel=new i(o))}var s=o.each,l=o.trim,c=e.ie;return h.prototype={setCursorLocation:function(n,t){var i=this,r=i.dom.createRng();n?(r.setStart(n,t),r.setEnd(n,t),i.setRng(r),i.collapse(!1)):(i._moveEndPoint(r,i.editor.getBody(),!0),i.setRng(r))},getContent:function(n){var r=this,i=r.getRng(),u=r.dom.create("body"),s=r.getSel(),f,e,o;return n=n||{},f=e="",n.get=!0,n.format=n.format||"html",n.selection=!0,r.editor.fire("BeforeGetContent",n),"text"==n.format?r.isCollapsed()?"":i.text||(s.toString?s.toString():""):(i.cloneContents?(o=i.cloneContents(),o&&u.appendChild(o)):i.item!==t||i.htmlText!==t?(u.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),u.removeChild(u.firstChild)):u.innerHTML=i.toString(),/^\s/.test(u.innerHTML)&&(f=" "),/\s+$/.test(u.innerHTML)&&(e=" "),n.getInner=!0,n.content=r.isCollapsed()?"":f+r.serializer.serialize(u,n)+e,r.editor.fire("GetContent",n),n.content)},setContent:function(n,t){var r=this,i=r.getRng(),f,u=r.win.document,e,o;if(t=t||{format:"html"},t.set=!0,t.selection=!0,n=t.content=n,t.no_events||r.editor.fire("BeforeSetContent",t),n=t.content,i.insertNode){n+='<span id="__caret">_<\/span>';i.startContainer==u&&i.endContainer==u?u.body.innerHTML=n:(i.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=n:i.createContextualFragment?i.insertNode(i.createContextualFragment(n)):(e=u.createDocumentFragment(),o=u.createElement("div"),e.appendChild(o),o.outerHTML=n,i.insertNode(e)));f=r.dom.get("__caret");i=u.createRange();i.setStartBefore(f);i.setEndBefore(f);r.setRng(i);r.dom.remove("__caret");try{r.setRng(i)}catch(s){}}else i.item&&(u.execCommand("Delete",!1,null),i=r.getRng()),/^\s+/.test(n)?(i.pasteHTML('<span id="__mce_tmp">_<\/span>'+n),r.dom.remove("__mce_tmp")):i.pasteHTML(n);t.no_events||r.editor.fire("SetContent",t)},getStart:function(){var r=this,t=r.getRng(),n,f,u,i;if(t.duplicate||t.item){if(t.item)return t.item(0);for(u=t.duplicate(),u.collapse(1),n=u.parentElement(),n.ownerDocument!==r.dom.doc&&(n=r.dom.getRoot()),f=i=t.parentElement();i=i.parentNode;)if(i==n){n=f;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var r=this,t=r.getRng(),n,i;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==r.dom.doc&&(n=r.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,i=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[i>0?i-1:i]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(n,t){return this.bookmarkManager.getBookmark(n,t)},moveToBookmark:function(n){return this.bookmarkManager.moveToBookmark(n)},select:function(n,t){var i=this,f=i.dom,r=f.createRng(),u;if(i.lastFocusBookmark=null,n){if(!t&&i.controlSelection.controlSelect(n))return;u=f.nodeIndex(n);r.setStart(n.parentNode,u);r.setEnd(n.parentNode,u+1);t&&(i._moveEndPoint(r,n,!0),i._moveEndPoint(r,n));i.setRng(r)}return n},isCollapsed:function(){var t=this,n=t.getRng(),i=t.getSel();return!n||n.item?!1:n.compareEndPoints?0===n.compareEndPoints("StartToEnd",n):!i||n.collapsed},collapse:function(n){var i=this,t=i.getRng(),r;t.item&&(r=t.item(0),t=i.win.document.body.createTextRange(),t.moveToElementText(r));t.collapse(!!n);i.setRng(t)},getSel:function(){var n=this.win;return n.getSelection?n.getSelection():n.document.selection},getRng:function(n){function s(n,t,i){try{return t.compareBoundaryPoints(n,i)}catch(r){return-1}}var i=this,e,t,f,r=i.win.document,o,u;if(!n&&i.lastFocusBookmark)return u=i.lastFocusBookmark,u.startContainer?(t=r.createRange(),t.setStart(u.startContainer,u.startOffset),t.setEnd(u.endContainer,u.endOffset)):t=u,t;if(n&&i.tridentSel)return i.tridentSel.getRangeAt(0);try{(e=i.getSel())&&(t=e.rangeCount>0?e.getRangeAt(0):e.createRange?e.createRange():r.createRange())}catch(h){}if(c&&t&&t.setStart&&r.selection){try{o=r.selection.createRange()}catch(h){}o&&o.item&&(f=o.item(0),t=r.createRange(),t.setStartBefore(f),t.setEndAfter(f))}return t||(t=r.createRange?r.createRange():r.body.createTextRange()),t.setStart&&9===t.startContainer.nodeType&&t.collapsed&&(f=i.dom.getRoot(),t.setStart(f,0),t.setEnd(f,0)),i.selectedRange&&i.explicitRange&&(0===s(t.START_TO_START,t,i.selectedRange)&&0===s(t.END_TO_END,t,i.selectedRange)?t=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),t},setRng:function(n,t){var r=this,i;if(n.select)try{n.select()}catch(u){}else if(r.tridentSel){if(n.cloneRange)try{return void r.tridentSel.addRange(n)}catch(u){}}else if(i=r.getSel()){r.explicitRange=n;try{i.removeAllRanges();i.addRange(n)}catch(u){}t===!1&&i.extend&&(i.collapse(n.endContainer,n.endOffset),i.extend(n.startContainer,n.startOffset));r.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}},setNode:function(n){var t=this;return t.setContent(t.dom.getOuterHTML(n)),n},getNode:function(){function e(n,t){for(var i=n;n&&3===n.nodeType&&0===n.length;)n=t?n.nextSibling:n.previousSibling;return n||i}var u=this,n=u.getRng(),i,t=n.startContainer,r=n.endContainer,f=n.startOffset,o=n.endOffset,s=u.dom.getRoot();return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&2>o-f&&t.hasChildNodes()&&(i=t.childNodes[f]),3===t.nodeType&&3===r.nodeType&&(t=t.length===f?e(t.nextSibling,!0):t.parentNode,r=0===o?e(r.previousSibling,!1):r.parentNode,t&&t===r))?t:i&&3==i.nodeType?i.parentNode:i):(i=n.item?n.item(0):n.parentElement(),i.ownerDocument!==u.win.document&&(i=s),i):s},getSelectedBlocks:function(t,i){var o=this,r=o.dom,u,f,e=[],s;if(f=r.getRoot(),t=r.getParent(t||o.getStart(),r.isBlock),i=r.getParent(i||o.getEnd(),r.isBlock),t&&t!=f&&e.push(t),t&&i&&t!=i)for(u=t,s=new n(t,f);(u=s.next())&&u!=i;)r.isBlock(u)&&e.push(u);return i&&t!=i&&i!=f&&e.push(i),e},isForward:function(){var r=this.dom,n=this.getSel(),t,i;return n&&n.anchorNode&&n.focusNode?(t=r.createRng(),t.setStart(n.anchorNode,n.anchorOffset),t.collapse(!0),i=r.createRng(),i.setStart(n.focusNode,n.focusOffset),i.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,i)<=0):!0},normalize:function(){var n=this,t=n.getRng();return!c&&new u(n.dom).normalize(t)&&n.setRng(t,n.isForward()),t},selectorChanged:function(n,t){var i=this,r;return i.selectorChangedData||(i.selectorChangedData={},r={},i.editor.on("NodeChange",function(n){var f=n.element,t=i.dom,u=t.getParents(f,null,t.getRoot()),e={};s(i.selectorChangedData,function(n,i){s(u,function(f){if(t.is(f,i))return(r[i]||(s(n,function(n){n(!0,{node:f,selector:i,parents:u})}),r[i]=n),e[i]=n,!1)})});s(r,function(n,t){e[t]||(delete r[t],s(n,function(n){n(!1,{node:f,selector:t,parents:u})}))})})),i.selectorChangedData[n]||(i.selectorChangedData[n]=[]),i.selectorChangedData[n].push(t),i},getScrollContainer:function(){for(var t,n=this.dom.getRoot();n&&"BODY"!=n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(n){function s(n){for(var i=0,r=0,t=n;t&&t.nodeType;)i+=t.offsetLeft||0,r+=t.offsetTop||0,t=t.offsetParent;return{x:i,y:r}}var t,f,e=this,o=e.dom,h=o.getRoot(),i,r,u;if("BODY"!=h.nodeName&&(u=e.getScrollContainer(),u))return t=s(n).y-s(u).y,r=u.clientHeight,i=u.scrollTop,void((i>t||t+25>i+r)&&(u.scrollTop=i>t?t:t-r+25));f=o.getViewPort(e.editor.getWin());t=o.getPos(n).y;i=f.y;r=f.h;(t<f.y||t+25>i+r)&&e.editor.getWin().scrollTo(0,i>t?t:t-r+25)},_moveEndPoint:function(t,i,r){var u=i,f=new n(i,u),o=this.dom.schema.getNonEmptyElements();do{if(3==i.nodeType&&0!==l(i.nodeValue).length)return void(r?t.setStart(i,0):t.setEnd(i,i.nodeValue.length));if(o[i.nodeName])return void(r?t.setStartBefore(i):"BR"==i.nodeName?t.setEndBefore(i):t.setEndAfter(i));if(e.ie&&e.ie<11&&this.dom.isBlock(i)&&this.dom.isEmpty(i))return void(r?t.setStart(i,0):t.setEnd(i,0))}while(i=r?f.next():f.prev());"BODY"==u.nodeName&&(r?t.setStart(u,0):t.setEnd(u,u.childNodes.length))},destroy:function(){this.win=null;this.controlSelection.destroy()}},h});i(at,[it,r],function(n,t){function i(t){this.compare=function(i,u){function f(n){var i={};return r(t.getAttribs(n),function(r){var u=r.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&"data-mce-style"!==u&&(i[u]=t.getAttrib(n,u))}),i}function e(n,t){var r;for(var i in n)if(n.hasOwnProperty(i)){if((r=t[i],"undefined"==typeof r)||n[i]!=r)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return i.nodeName!=u.nodeName?!1:e(f(i),f(u))&&e(t.parseStyle(t.getAttrib(i,"style")),t.parseStyle(t.getAttrib(u,"style")))?!n.isBookmarkNode(i)&&!n.isBookmarkNode(u):!1}}var r=t.each;return i});i(gr,[r],function(n){function i(n,i){function o(n){return n.replace(/%(\w+)/g,"")}var h,u,r=n.dom,s="",f,e;if(e=n.settings.preview_styles,e===!1)return"";if(e||(e="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof i){if(i=n.formatter.get(i),!i)return;i=i[0]}return h=i.block||i.inline||"span",u=r.create(h),t(i.styles,function(n,t){n=o(n);n&&r.setStyle(u,t,n)}),t(i.attributes,function(n,t){n=o(n);n&&r.setAttrib(u,t,n)}),t(i.classes,function(n){n=o(n);r.hasClass(u,n)||r.addClass(u,n)}),n.fire("PreviewFormats"),r.setStyles(u,{position:"absolute",left:-65535}),n.getBody().appendChild(u),f=r.getStyle(n.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,t(e.split(" "),function(t){var i=r.getStyle(u,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(i)&&(i=r.getStyle(n.getBody(),t,!0),"#ffffff"==r.toHex(i).toLowerCase())||"color"==t&&"#000000"==r.toHex(i).toLowerCase())){if("font-size"==t&&/em|%$/.test(i)){if(0===f)return;i=parseFloat(i,10)/(/%$/.test(i)?100:1);i=i*f+"px"}"border"==t&&i&&(s+="padding:0 2px;");s+=t+":"+i+";"}}),n.fire("AfterPreviewFormats"),r.remove(u),s}var t=n.each;return{getCssText:i}});i(ci,[s,c,it,at,r,gr],function(n,t,i,r,u,f){return function(e){function at(n){return n.nodeType&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]}function it(n,t){return o.getParents(n,t,o.getRoot())}function vt(n){return 1===n.nodeType&&"_mce_caret"===n.id}function ci(){rt({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,t,i){h(i,function(t,i){o.setAttrib(n,i,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});h("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(n){rt(n,{block:n,remove:"all"})});rt(e.settings.formats)}function li(){e.addShortcut("ctrl+b","bold_desc","Bold");e.addShortcut("ctrl+i","italic_desc","Italic");e.addShortcut("ctrl+u","underline_desc","Underline");for(var n=1;6>=n;n++)e.addShortcut("ctrl+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]);e.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]);e.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function w(n){return n?ni[n]:ni}function rt(n,t){n&&("string"!=typeof n?h(n,function(n,t){rt(t,n)}):(t=t.length?t:[t],h(t,function(n){n.deep===ot&&(n.deep=!n.selector);n.split===ot&&(n.split=!n.selector||n.inline);n.remove===ot&&n.selector&&!n.inline&&(n.remove="none");n.selector&&n.inline&&(n.mixed=!0,n.block_expand=!0);"string"==typeof n.classes&&(n.classes=n.classes.split(/\s+/))}),ni[n]=t))}function ri(n){var t;return e.dom.getParent(n,function(n){return t=e.dom.getStyle(n,"text-decoration"),t&&"none"!==t}),t}function ui(n){var t;1===n.nodeType&&n.parentNode&&1===n.parentNode.nodeType&&(t=ri(n.parentNode),e.dom.getStyle(n,"color")&&t?e.dom.setStyle(n,"text-decoration",t):e.dom.getStyle(n,"textdecoration")===t&&e.dom.setStyle(n,"text-decoration",null))}function d(t,i,r){function k(n,t){if(t=t||u,n){if(t.onformat&&t.onformat(n,t,i,r),h(t.styles,function(t,r){o.setStyle(n,r,b(t,i))}),t.styles){var f=o.getAttrib(n,"style");f&&n.setAttribute("data-mce-style",f)}h(t.attributes,function(t,r){o.setAttrib(n,r,b(t,i))});h(t.classes,function(t){t=b(t,i);o.hasClass(n,t)||o.addClass(n,t)})}}function yt(){function s(t,i){var u=new n(i);for(r=u.current();r;r=u.prev())if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}var t=e.selection.getRng(),u=t.startContainer,f=t.endContainer,i,o;return u!=f&&0===t.endOffset&&(i=s(u,f),o=3==i.nodeType?i.length:i.childNodes.length,t.setEnd(i,o)),t}function rt(n,r,e){var s=[],w,d,b=!0;w=u.inline||u.block;d=o.create(w);k(d);ht.walk(n,function(n){function c(n){var l,it,ut,g,rt;return rt=b,l=n.nodeName.toLowerCase(),it=n.parentNode.nodeName.toLowerCase(),1===n.nodeType&&nt(n)&&(rt=b,b="true"===nt(n),g=!0),p(l,"br")?(r=0,void(u.block&&o.remove(n))):u.wrapper&&y(n,t,i)?void(r=0):b&&!g&&u.block&&!u.wrapper&&at(l)&&ct(it,w)?(n=o.rename(n,w),k(n),s.push(n),void(r=0)):u.selector&&(h(f,function(t){"collapsed"in t&&t.collapsed!==ot||o.is(n,t.selector)&&!vt(n)&&(k(n,t),ut=!0)}),!u.inline||ut)?void(r=0):void(!b||g||!ct(w,l)||!ct(it,w)||!e&&3===n.nodeType&&1===n.nodeValue.length&&65279===n.nodeValue.charCodeAt(0)||vt(n)||u.inline&&a(n)?(r=0,h(tt(n.childNodes),c),g&&(b=rt),r=0):(r||(r=o.clone(d,v),n.parentNode.insertBefore(r,n),s.push(r)),r.appendChild(n)))}var r;h(n,c)});u.wrap_links===!1&&h(s,function(n){function t(n){var i,r,u;if("A"===n.nodeName){for(r=o.clone(d,v),s.push(r),u=tt(n.childNodes),i=0;i<u.length;i++)r.appendChild(u[i]);n.appendChild(r)}h(tt(n.childNodes),t)}t(n)});h(s,function(n){function e(n){var t=0;return h(n.childNodes,function(n){ut(n)||l(n)||t++}),t}function p(n){var t,i;return h(n.childNodes,function(n){if(1==n.nodeType&&!l(n)&&!vt(n))return(t=n,v)}),t&&!l(t)&&wt(t,u)&&(i=o.clone(t,v),k(i),o.replace(i,n,c),o.remove(t,1)),i||n}var r;if(r=e(n),(s.length>1||!a(n))&&0===r)return void o.remove(n,1);if(u.inline||u.wrapper){if(u.exact||1!==r||(n=p(n)),h(f,function(t){h(o.select(t.inline,n),function(n){var r;if(!l(n)){if(t.wrap_links===!1){r=n.parentNode;do if("A"===r.nodeName)return;while(r=r.parentNode)}st(t,i,n,t.exact?n:null)}})}),y(n.parentNode,t,i))return o.remove(n,1),n=0,c;u.merge_with_parents&&o.getParent(n.parentNode,function(r){if(y(r,t,i))return(o.remove(n,1),n=0,c)});n&&u.merge_siblings!==!1&&(n=fi(gt(n),n),n=fi(n,gt(n,c)))}})}var f=w(t),u=f[0],et,g,ot=!r&&s.isCollapsed(),it;u&&(r?r.nodeType?(g=o.createRng(),g.setStartBefore(r),g.setEndAfter(r),rt(ft(g,f),null,!0)):rt(r,null,!0):ot&&u.inline&&!o.select("td.mce-item-selected,th.mce-item-selected").length?oi("apply",t,i):(it=e.selection.getNode(),lt||!f[0].defaultBlock||o.getParent(it,o.isBlock)||d(f[0].defaultBlock),e.selection.setRng(yt()),et=s.getBookmark(),rt(ft(s.getRng(c),f),et),u.styles&&(u.styles.color||u.styles.textDecoration)&&(hi(it,ui,"childNodes"),ui(it)),s.moveToBookmark(et),si(s.getRng(c)),e.nodeChanged()))}function yt(n,t,i,r){function g(n){var r,i,e,s,o;if(1===n.nodeType&&nt(n)&&(s=b,b="true"===nt(n),o=!0),r=tt(n.childNodes),b&&!o)for(i=0,e=u.length;e>i&&!st(u[i],t,n,n);i++);if(f.deep&&r.length){for(i=0,e=r.length;e>i;i++)g(r[i]);o&&(b=s)}}function ot(i){var u;return h(it(i.parentNode).reverse(),function(i){var f;u||"_start"==i.id||"_end"==i.id||(f=y(i,n,t,r),f&&f.split!==!1&&(u=i))}),u}function ct(n,i,r,e){var h,s,c,y,l,p;if(n){for(p=n.parentNode,h=i.parentNode;h&&h!=p;h=h.parentNode){for(s=o.clone(h,v),l=0;l<u.length;l++)if(st(u[l],t,s,s)){s=0;break}s&&(c&&s.appendChild(c),y||(y=s),c=s)}!e||f.mixed&&a(n)||(i=o.split(n,i));c&&(r.parentNode.insertBefore(c,r),y.appendChild(r))}return i}function k(n){return ct(ot(n),n,n,!0)}function rt(n){var i=o.get(n?"_start":"_end"),t=i[n?"firstChild":"lastChild"];return l(t)&&(t=t[n?"firstChild":"lastChild"]),o.remove(i,!0),t}function d(n){var t,i,r=n.commonAncestorContainer;n=ft(n,u,c);f.split&&(t=ei(n,c),i=ei(n),t!=i?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&/^(TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i=i.firstChild||i),t=dt(t,"span",{id:"_start","data-mce-type":"bookmark"}),i=dt(i,"span",{id:"_end","data-mce-type":"bookmark"}),k(t),k(i),t=rt(c),i=rt()):t=i=k(t),n.startContainer=t.parentNode,n.startOffset=et(t),n.endContainer=i.parentNode,n.endOffset=et(i)+1);ht.walk(n,function(n){h(n,function(n){g(n);1===n.nodeType&&"underline"===e.dom.getStyle(n,"text-decoration")&&n.parentNode&&"underline"===ri(n.parentNode)&&st({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,n)})})}var u=w(n),f=u[0],ut,p,b=!0;return i?void(i.nodeType?(p=o.createRng(),p.setStartBefore(i),p.setEndAfter(i),d(p)):d(i)):void(s.isCollapsed()&&f.inline&&!o.select("td.mce-item-selected,th.mce-item-selected").length?oi("remove",n,t,r):(ut=s.getBookmark(),d(s.getRng(c)),s.moveToBookmark(ut),f.inline&&pt(n,t,s.getStart())&&si(s.getRng(!0)),e.nodeChanged()))}function ai(n,t,i){var r=w(n);!pt(n,t,i)||"toggle"in r[0]&&!r[0].toggle?d(n,t,i):yt(n,t,i)}function y(n,t,i,r){function h(n,t,u){var e,h,f=t[u],s;if(t.onmatch)return t.onmatch(n,t,u);if(f)if(f.length===ot){for(e in f)if(f.hasOwnProperty(e)){if(h="attributes"===u?o.getAttrib(n,e):bt(n,e),r&&!h&&!t.exact)return;if((!r||t.exact)&&!p(h,kt(b(f[e],i),e)))return}}else for(s=0;s<f.length;s++)if("attributes"===u?o.getAttrib(n,f[s]):bt(n,f[s]))return t;return t}var e=w(t),f,u,s;if(e&&n)for(u=0;u<e.length;u++)if(f=e[u],wt(n,f)&&h(n,f,"attributes")&&h(n,f,"styles")){if(s=f.classes)for(u=0;u<s.length;u++)if(!o.hasClass(n,s[u]))return;return f}}function pt(n,t,i){function r(i){var r=o.getRoot();return i===r?!1:(i=o.getParent(i,function(i){return i.parentNode===r||!!y(i,n,t,!0)}),y(i,n,t))}var u;return i?r(i):(i=s.getNode(),r(i)?c:(u=s.getStart(),u!=i&&r(u)?c:v))}function vi(n,t){var i,r=[],u={};return i=s.getStart(),o.getParent(i,function(i){for(var f,e=0;e<n.length;e++)f=n[e],!u[f]&&y(i,f,t)&&(u[f]=!0,r.push(f))},o.getRoot()),r}function yi(n){var i=w(n),e,u,r,t,f;if(i)for(e=s.getStart(),u=it(e),t=i.length-1;t>=0;t--){if(f=i[t].selector,!f||i[t].defaultBlock)return c;for(r=u.length-1;r>=0;r--)if(o.is(u[r],f))return c}return v}function pi(n,t,i){var r;return k||(k={},r={},e.on("NodeChange",function(n){var t=it(n.element),i={};t=u.grep(t,function(n){return!n.getAttribute("data-mce-bogus")});h(k,function(n,u){h(t,function(f){if(y(f,u,{},n.similar))return(r[u]||(h(n,function(n){n(!0,{node:f,format:u,parents:t})}),r[u]=n),i[u]=n,!1)})});h(r,function(u,f){i[f]||(delete r[f],h(u,function(i){i(!1,{node:n.element,format:f,parents:t})}))})})),h(n.split(","),function(n){k[n]||(k[n]=[],k[n].similar=i);k[n].push(t)}),this}function wi(n){return f.getCssText(e,n)}function wt(n,t){return p(n,t.inline)?c:p(n,t.block)?c:t.selector?1==n.nodeType&&o.is(n,t.selector):void 0}function p(n,t){return n=n||"",t=t||"",n=""+(n.nodeName||n),t=""+(t.nodeName||t),n.toLowerCase()==t.toLowerCase()}function bt(n,t){return kt(o.getStyle(n,t),t)}function kt(n,t){return("color"==t||"backgroundColor"==t)&&(n=o.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),"fontFamily"==t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+n}function b(n,t){return"string"!=typeof n?n=n(t):t&&(n=n.replace(/%(\w+)/g,function(n,i){return t[i]||n})),n}function ut(n){return n&&3===n.nodeType&&/^([\t \r\n]+|)$/.test(n.nodeValue)}function dt(n,t,i){var r=o.create(t,i);return n.parentNode.insertBefore(r,n),r.appendChild(n),r}function ft(t,i,r){function b(n){function y(n){return"BR"==n.nodeName&&n.getAttribute("data-mce-bogus")&&!n.nextSibling}var r,t,e,s,v;if(r=t=n?f:u,s=n?"previousSibling":"nextSibling",v=o.getRoot(),3==r.nodeType&&!ut(r)&&(n?c>0:h<r.nodeValue.length))return r;for(;;){if(!i[0].block_expand&&a(t))return t;for(e=t[s];e;e=e[s])if(!l(e)&&!ut(e)&&!y(e))return t;if(t.parentNode==v){r=t;break}t=t.parentNode}return r}function k(n,t){for(t===ot&&(t=3===n.nodeType?n.length:n.childNodes.length);n&&n.hasChildNodes();)n=n.childNodes[t],n&&(t=3===n.nodeType?n.length:n.childNodes.length);return{node:n,offset:t}}function d(n){for(var t=n;t;){if(1===t.nodeType&&nt(t))return"false"===nt(t)?t:n;t=t.parentNode}return n}function g(t,i,u){function c(n,t){var i,f,e=n.nodeValue;return"undefined"==typeof t&&(t=u?e.length:0),u?(i=e.lastIndexOf(" ",t),f=e.lastIndexOf(" ",t),i=i>f?i:f,-1===i||r||i++):(i=e.indexOf(" ",t),f=e.indexOf(" ",t),i=-1!==i&&(-1===f||f>i)?i:f),i}var l,f,s,h;if(3===t.nodeType){if(s=c(t,i),-1!==s)return{container:t,offset:s};h=t}for(l=new n(t,o.getParent(t,a)||e.getBody());f=l[u?"prev":"next"]();)if(3===f.nodeType){if(h=f,s=c(f),-1!==s)return{container:f,offset:s}}else if(a(f))break;if(h)return(i=u?0:h.length,{container:h,offset:i})}function tt(n,r){var f,u,e,s;for(3==n.nodeType&&0===n.nodeValue.length&&n[r]&&(n=n[r]),f=it(n),u=0;u<f.length;u++)for(e=0;e<i.length;e++)if(s=i[e],!("collapsed"in s&&s.collapsed!==t.collapsed)&&o.is(f[u],s.selector))return f[u];return n}function rt(n,t){var r,u=o.getRoot();if(i[0].wrapper||(r=o.getParent(n,i[0].block,u)),r||(r=o.getParent(3==n.nodeType?n.parentNode:n,function(n){return n!=u&&at(n)})),r&&i[0].wrapper&&(r=it(r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[t]&&!a(r[t])&&(r=r[t],!p(r,"br")););return r||n}var w,s,y,f=t.startContainer,c=t.startOffset,u=t.endContainer,h=t.endOffset;if(1==f.nodeType&&f.hasChildNodes()&&(w=f.childNodes.length-1,f=f.childNodes[c>w?w:c],3==f.nodeType&&(c=0)),1==u.nodeType&&u.hasChildNodes()&&(w=u.childNodes.length-1,u=u.childNodes[h>w?w:h-1],3==u.nodeType&&(h=u.nodeValue.length)),f=d(f),u=d(u),(l(f.parentNode)||l(f))&&(f=l(f)?f:f.parentNode,f=f.nextSibling||f,3==f.nodeType&&(c=0)),(l(u.parentNode)||l(u))&&(u=l(u)?u:u.parentNode,u=u.previousSibling||u,3==u.nodeType&&(h=u.length)),i[0].inline&&(t.collapsed&&(y=g(f,c,!0),y&&(f=y.container,c=y.offset),y=g(u,h),y&&(u=y.container,h=y.offset)),s=k(u,h),s.node)){for(;s.node&&0===s.offset&&s.node.previousSibling;)s=k(s.node.previousSibling);s.node&&s.offset>0&&3===s.node.nodeType&&" "===s.node.nodeValue.charAt(s.offset-1)&&s.offset>1&&(u=s.node,u.splitText(s.offset-1))}return(i[0].inline||i[0].block_expand)&&(i[0].inline&&3==f.nodeType&&0!==c||(f=b(!0)),i[0].inline&&3==u.nodeType&&h!==u.nodeValue.length||(u=b())),i[0].selector&&i[0].expand!==v&&!i[0].inline&&(f=tt(f,"previousSibling"),u=tt(u,"nextSibling")),(i[0].block||i[0].selector)&&(f=rt(f,"previousSibling"),u=rt(u,"nextSibling"),i[0].block&&(a(f)||(f=b(!0)),a(u)||(u=b()))),1==f.nodeType&&(c=et(f),f=f.parentNode),1==u.nodeType&&(h=et(u)+1,u=u.parentNode),{startContainer:f,startOffset:c,endContainer:u,endOffset:h}}function st(n,t,i,r){var u,f,e;if(!wt(i,n))return v;if("all"!=n.remove)for(h(n.styles,function(u,f){u=kt(b(u,t),f);"number"==typeof f&&(f=u,r=0);(n.remove_similar||!r||p(bt(r,f),u))&&o.setStyle(i,f,"");e=1}),e&&""===o.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),h(n.attributes,function(n,u){var f;if(n=b(n,t),"number"==typeof u&&(u=n,r=0),!r||p(o.getAttrib(r,u),n)){if("class"==u&&(n=o.getAttrib(i,u),n&&(f="",h(n.split(/\s+/),function(n){/mce\w+/.test(n)&&(f+=(f?" ":"")+n)}),f)))return void o.setAttrib(i,u,f);"class"==u&&i.removeAttribute("className");ki.test(u)&&i.removeAttribute("data-mce-"+u);i.removeAttribute(u)}}),h(n.classes,function(n){n=b(n,t);(!r||o.hasClass(r,n))&&o.removeClass(i,n)}),f=o.getAttribs(i),u=0;u<f.length;u++)if(0!==f[u].nodeName.indexOf("_"))return v;if("none"!=n.remove)return(bi(i,n),c)}function bi(n,t){function r(n,t,i){return n=gt(n,t,i),!n||"BR"==n.nodeName||a(n)}var u=n.parentNode,i;t.block&&(lt?u==o.getRoot()&&(t.list_block&&p(n,t.list_block)||h(tt(n.childNodes),function(n){ct(lt,n.nodeName.toLowerCase())?i?i.appendChild(n):(i=dt(n,lt),o.setAttribs(i,e.settings.forced_root_block_attrs)):i=0})):a(n)&&!a(u)&&(r(n,v)||r(n.firstChild,c,1)||n.insertBefore(o.create("br"),n.firstChild),r(n,c)||r(n.lastChild,v,1)||n.appendChild(o.create("br"))));t.selector&&t.inline&&!p(t.inline,n)||o.remove(n,1)}function gt(n,t,i){if(n)for(t=t?"nextSibling":"previousSibling",n=i?n:n[t];n;n=n[t])if(1==n.nodeType||!ut(n))return n}function fi(n,t){function u(n,t){for(i=n;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return n;if(1==i.nodeType&&!l(i))return i}return n}var i,f,e=new r(o);if(n&&t&&(n=u(n,"previousSibling"),t=u(t,"nextSibling"),e.compare(n,t))){for(i=n.nextSibling;i&&i!=t;)f=i,i=i.nextSibling,n.appendChild(f);return o.remove(t),h(tt(t.childNodes),function(t){n.appendChild(t)}),n}return t}function ei(t,i){var r,u,f;return r=t[i?"startContainer":"endContainer"],u=t[i?"startOffset":"endOffset"],1==r.nodeType&&(f=r.childNodes.length-1,!i&&u&&u--,r=r.childNodes[u>f?f:u]),3===r.nodeType&&i&&u>=r.nodeValue.length&&(r=new n(r,e.getBody()).next()||r),3!==r.nodeType||i||0!==u||(r=new n(r,e.getBody()).prev()||r),r}function oi(t,i,r,u){function l(n){var t=o.create("span",{id:h,"data-mce-bogus":!0,style:nt?"color:red":""});return n&&t.appendChild(e.getDoc().createTextNode(g)),t}function a(n,t){for(;n;){if(3===n.nodeType&&n.nodeValue!==g||n.childNodes.length>1)return!1;t&&1===n.nodeType&&t.push(n);n=n.firstChild}return!0}function f(n){for(;n;){if(n.id===h)return n;n=n.parentNode}}function v(t){var i;if(t)for(i=new n(t,t),t=i.current();t;t=i.next())if(3===t.nodeType)return t}function c(n,t){var r,i;if(n)i=s.getRng(!0),a(n)?(t!==!1&&(i.setStartBefore(n),i.setEndBefore(n)),o.remove(n)):(r=v(n),r.nodeValue.charAt(0)===g&&(r.deleteData(0,1),i.startContainer==r&&i.startOffset--,i.endContainer==r&&i.endOffset--),o.remove(n,1)),s.setRng(i);else if(n=f(s.getStart()),!n)for(;n=o.get(h);)c(n,!1)}function b(){var n,t,o,u,h,c,e;n=s.getRng(!0);u=n.startOffset;c=n.startContainer;e=c.nodeValue;t=f(s.getStart());t&&(o=v(t));e&&u>0&&u<e.length&&/\w/.test(e.charAt(u))&&/\w/.test(e.charAt(u-1))?(h=s.getBookmark(),n.collapse(!0),n=ft(n,w(i)),n=ht.split(n),d(i,r,n),s.moveToBookmark(h)):(t&&o.nodeValue===g?d(i,r,t):(t=l(!0),o=t.firstChild,n.insertNode(t),u=1,d(i,r,t)),s.setCursorLocation(o,u))}function k(){var t=s.getRng(!0),e,b,k,a,n,f,v=[],h,c,p;for(e=t.startContainer,b=t.startOffset,n=e,3==e.nodeType&&(b!=e.nodeValue.length&&(a=!0),n=n.parentNode);n;){if(y(n,i,r,u)){f=n;break}n.nextSibling&&(a=!0);v.push(n);n=n.parentNode}if(f)if(a)k=s.getBookmark(),t.collapse(!0),t=ft(t,w(i),!0),t=ht.split(t),yt(i,r,t),s.moveToBookmark(k);else{for(c=l(),n=c,h=v.length-1;h>=0;h--)n.appendChild(o.clone(v[h],!1)),n=n.firstChild;n.appendChild(o.doc.createTextNode(g));n=n.firstChild;p=o.getParent(f,at);p&&o.isEmpty(p)?f.parentNode.replaceChild(c,f):o.insertAfter(c,f);s.setCursorLocation(n,1);o.isEmpty(f)&&o.remove(f)}}function p(){var n;n=f(s.getStart());n&&!o.isEmpty(n)&&hi(n,function(n){1!=n.nodeType||n.id===h||o.isEmpty(n)||o.setAttrib(n,"data-mce-bogus",null)},"childNodes")}var h="_mce_caret",nt=e.settings.caret_debug;e._hasCaretEvents||(ii=function(){var n=[],t;if(a(f(s.getStart()),n))for(t=n.length;t--;)o.setAttrib(n[t],"data-mce-bogus","1")},ti=function(n){var t=n.keyCode;c();(8==t||37==t||39==t)&&c(f(s.getStart()));p()},e.on("SetContent",function(n){n.selection&&p()}),e._hasCaretEvents=!0);"apply"==t?b():k()}function si(t){var i=t.startContainer,u=t.startOffset,c,f,r,e,h;if(3==i.nodeType&&u>=i.nodeValue.length&&(u=et(i),i=i.parentNode,c=!0),1==i.nodeType)for(e=i.childNodes,i=e[Math.min(u,e.length-1)],f=new n(i,o.getParent(i,o.isBlock)),(u>e.length-1||c)&&f.next(),r=f.current();r;r=f.next())if(3==r.nodeType&&!ut(r))return h=o.create("a",{"data-mce-bogus":"all"},g),r.parentNode.insertBefore(h,r),t.setStart(r,0),s.setRng(t),void o.remove(h)}var ni={},o=e.dom,s=e.selection,ht=new t(o),ct=e.schema.isValidChild,a=o.isBlock,lt=e.settings.forced_root_block,et=o.nodeIndex,g="﻿",ki=/^(src|href|style)$/,v=!1,c=!0,k,ot,nt=o.getContentEditable,ti,ii,l=i.isBookmarkNode,h=u.each,tt=u.grep,hi=u.walk,di=u.extend;di(this,{get:w,register:rt,apply:d,remove:yt,toggle:ai,match:pt,matchAll:vi,matchNode:y,canApply:yi,formatChanged:pi,getCssText:wi});ci();li();e.on("BeforeGetContent",function(){ii&&ii()});e.on("mouseup keydown",function(n){ti&&ti(n)})}});i(li,[u,r,ht],function(n,t,i){var u=t.trim,r;return r=new RegExp('<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>|\\s?data-mce-selected="[^"]+"',"gi"),function(t){function c(){for(var n=u(t.getContent({format:"raw",no_events:1})),e=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,h,f,o,s,l=t.schema,n=n.replace(r,""),c=l.getShortEndedElements();s=e.exec(n);)f=e.lastIndex,o=s[0].length,h=c[s[1]]?f:i.findEndTag(l,n,f),n=n.substring(0,f-o)+n.substring(h),e.lastIndex=f-o;return n}function s(n){e.typing=!1;e.add({},n)}var e=this,o=0,f=[],a,l,h=0;return t.on("init",function(){e.add()}),t.on("BeforeExecCommand",function(n){var t=n.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&e.beforeChange()}),t.on("ExecCommand",function(n){var t=n.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s(n)}),t.on("ObjectResizeStart",function(){e.beforeChange()}),t.on("SaveContent ObjectResized blur",s),t.on("DragEnd",s),t.on("KeyUp",function(i){var r=i.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||i.ctrlKey)&&(s(),t.nodeChanged());(46==r||8==r||n.mac&&(91==r||93==r))&&t.nodeChanged();l&&e.typing&&(t.isDirty()||(t.isNotDirty=!f[0]||c()==f[0].content,t.isNotDirty||t.fire("change",{level:f[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(n){var t=n.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(e.typing&&s(n)):void((16>t||t>20)&&224!=t&&91!=t&&!e.typing&&(e.beforeChange(),e.typing=!0,e.add({},n),l=!0))}),t.on("MouseDown",function(n){e.typing&&s(n)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(n){n.isDefaultPrevented()||t.nodeChanged()}),e={data:f,typing:!1,beforeChange:function(){h||(a=t.selection.getBookmark(2,!0))},add:function(n,i){var r,s=t.settings,u,e;if((n=n||{},n.content=c(),h||t.removed)||(u=f[o],t.fire("BeforeAddUndo",{level:n,lastLevel:u,originalEvent:i}).isDefaultPrevented())||u&&u.content==n.content)return null;if(f[o]&&(f[o].beforeBookmark=a),s.custom_undo_redo_levels&&f.length>s.custom_undo_redo_levels){for(r=0;r<f.length-1;r++)f[r]=f[r+1];f.length--;o=f.length}return n.bookmark=t.selection.getBookmark(2,!0),o<f.length-1&&(f.length=o+1),f.push(n),o=f.length-1,e={level:n,lastLevel:u,originalEvent:i},t.fire("AddUndo",e),o>0&&(t.isNotDirty=!1,t.fire("change",e)),n},undo:function(){var n;return e.typing&&(e.add(),e.typing=!1),o>0&&(n=f[--o],0===o&&(t.isNotDirty=!0),t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(n.beforeBookmark),t.fire("undo",{level:n})),n},redo:function(){var n;return o<f.length-1&&(n=f[++o],t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(n.bookmark),t.fire("redo",{level:n})),n},clear:function(){f=[];o=0;e.typing=!1;t.fire("ClearUndos")},hasUndo:function(){return o>0||e.typing&&f[0]&&c()!=f[0].content},hasRedo:function(){return o<f.length-1&&!this.typing},transact:function(n){e.beforeChange();try{h++;n()}finally{h--}e.add()}}}});i(ai,[s,c,u],function(n,t,i){var r=i.ie&&i.ie<11;return function(u){function l(l){function ct(n){return n&&f.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&"true"!==f.getContentEditable(n)}function lt(n){var t;f.isBlock(n)&&(t=o.getRng(),n.appendChild(f.create("span",null," ")),o.select(n),n.lastChild.outerHTML="",o.setRng(t))}function vt(n){var t=n,i=[],r;if(t){for(;t=t.firstChild;){if(f.isBlock(t))return;1!=t.nodeType||c[t.nodeName.toLowerCase()]||i.push(t)}for(r=i.length;r--;)t=i[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?f.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&f.remove(t)}}function rt(t){function v(n){for(;n;){if(1==n.nodeType||3==n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}}var e,u,r,s=t,h,l;if(t){if((i.ie&&i.ie<9&&a&&a.firstChild&&a.firstChild==a.lastChild&&"BR"==a.firstChild.tagName&&f.remove(a.firstChild),/^(LI|DT|DD)$/.test(t.nodeName))&&(l=v(t.firstChild),l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(f.doc.createTextNode(" "),t.firstChild)),r=f.createRng(),i.ie||t.normalize(),t.hasChildNodes()){for(e=new n(t,t);u=e.current();){if(3==u.nodeType){r.setStart(u,0);r.setEnd(u,0);break}if(c[u.nodeName.toLowerCase()]){r.setStartBefore(u);r.setEndBefore(u);break}s=u;u=e.next()}u||(r.setStart(s,0),r.setEnd(s,0))}else"BR"==t.nodeName?t.nextSibling&&f.isBlock(t.nextSibling)?((!ht||9>ht)&&(h=f.create("br"),t.parentNode.insertBefore(h,t)),r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));o.setRng(r);f.remove(h);o.scrollIntoView(t)}}function st(n){var t=e.forced_root_block;t&&t.toLowerCase()===n.tagName.toLowerCase()&&f.setAttribs(n,e.forced_root_block_attrs)}function ut(n){var u=v,t,i,o,s=h.getTextInlineElements();if(n||"TABLE"==tt?(t=f.create(n||p),st(t)):t=a.cloneNode(!1),o=t,e.keep_styles!==!1)do if(s[u.nodeName]){if("_mce_caret"==u.id)continue;i=u.cloneNode(!1);f.setAttrib(i,"id","");t.hasChildNodes()?(i.appendChild(t.firstChild),t.appendChild(i)):(o=i,t.appendChild(i))}while(u=u.parentNode);return r||(o.innerHTML='<br data-mce-bogus="1">'),t}function at(t){var i,r,u;if(3==v.nodeType&&(t?k>0:k<v.nodeValue.length))return!1;if(v.parentNode==a&&it&&!t||t&&1==v.nodeType&&v==a.firstChild)return!0;if("TABLE"===v.nodeName||v.previousSibling&&"TABLE"==v.previousSibling.nodeName)return it&&!t||!it&&t;for(i=new n(v,a),3==v.nodeType&&(t&&0===k?i.prev():t||k!=v.nodeValue.length||i.next());r=i.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(u=r.nodeName.toLowerCase(),c[u]&&"br"!==u))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?i.prev():i.next()}return!0}function yt(n,t){var r,e,o,i,c,l,s=p||"P";if(e=f.getParent(n,f.isBlock),l=u.getBody().nodeName.toLowerCase(),!e||!ct(e)){if(e=e||et,!e.hasChildNodes())return r=f.create(s),st(r),e.appendChild(r),b.setStart(r,0),b.setEnd(r,0),r;for(i=n;i.parentNode!=e;)i=i.parentNode;for(;i&&!f.isBlock(i);)o=i,i=i.previousSibling;if(o&&h.isValidChild(l,s.toLowerCase())){for(r=f.create(s),st(r),o.parentNode.insertBefore(r,o),i=o;i&&!f.isBlock(i);)c=i.nextSibling,r.appendChild(i),i=c;b.setStart(n,t);b.setEnd(n,t)}}return n}function pt(){function n(n){for(var t=w[n?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[n?"nextSibling":"previousSibling"];return t===a}function t(){var n=w.parentNode;return/^(LI|DT|DD)$/.test(n.nodeName)?n:w}var i=w.parentNode.nodeName;/^(OL|UL|LI)$/.test(i)&&(p="LI");y=p?ut(p):f.create("BR");n(!0)&&n()?"LI"==i?f.insertAfter(y,t()):f.replace(y,w):n(!0)?"LI"==i?(f.insertAfter(y,t()),y.appendChild(f.doc.createTextNode(" ")),y.appendChild(w)):w.parentNode.insertBefore(y,w):n()?(f.insertAfter(y,t()),lt(y)):(w=t(),nt=b.cloneRange(),nt.setStartAfter(a),nt.setEndAfter(w),d=nt.extractContents(),"LI"==p&&"LI"==d.firstChild.nodeName?(y=d.firstChild,f.insertAfter(d,w)):(f.insertAfter(d,w),f.insertAfter(y,w)));f.remove(a);rt(y);s.add()}function ft(){u.execCommand("InsertLineBreak",!1,l)}function wt(n){do 3===n.nodeType&&(n.nodeValue=n.nodeValue.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)}function bt(n){for(var i=f.getRoot(),r,t=n;t!==i&&"false"!==f.getContentEditable(t);)"true"===f.getContentEditable(t)&&(r=t),t=t.parentNode;return t!==i?r:i}function kt(n){var t;r||(n.normalize(),t=n.lastChild,(!t||/^(left|right)$/gi.test(f.getStyle(t,"float",!0)))&&f.add(n,"br"))}var b,nt,et,v,k,a,ht,g,y,d,w,tt,ot,p,it;if(b=o.getRng(!0),!l.isDefaultPrevented()){if(!b.collapsed)return void u.execCommand("Delete");if(new t(f).normalize(b),v=b.startContainer,k=b.startOffset,p=(e.force_p_newlines?"p":"")||e.forced_root_block,p=p?p.toUpperCase():"",ht=f.doc.documentMode,g=l.shiftKey,1==v.nodeType&&v.hasChildNodes()&&(it=k>v.childNodes.length-1,v=v.childNodes[Math.min(k,v.childNodes.length-1)]||v,k=it&&3==v.nodeType?v.nodeValue.length:0),et=bt(v)){if(s.beforeChange(),!f.isBlock(et)&&et!=f.getRoot())return void((!p||g)&&ft());if((p&&!g||!p&&g)&&(v=yt(v,k)),a=f.getParent(v,f.isBlock),w=a?f.getParent(a.parentNode,f.isBlock):null,tt=a?a.nodeName.toUpperCase():"",ot=w?w.nodeName.toUpperCase():"","LI"!=ot||l.ctrlKey||(a=w,tt=ot),/^(LI|DT|DD)$/.test(tt)){if(!p&&g)return void ft();if(f.isEmpty(a))return void pt()}if("PRE"==tt&&e.br_in_pre!==!1){if(!g)return void ft()}else if(!p&&!g&&"LI"!=tt||p&&g)return void ft();p&&a===u.getBody()||(p=p||"P",at()?(y=/^(H[1-6]|PRE|FIGURE)$/.test(tt)&&"HGROUP"!=ot?ut(p):ut(),e.end_container_on_empty_block&&ct(w)&&f.isEmpty(a)?y=f.split(w,a):f.insertAfter(y,a),rt(y)):at(!0)?(y=a.parentNode.insertBefore(ut(),a),lt(y),rt(a)):(nt=b.cloneRange(),nt.setEndAfter(a),d=nt.extractContents(),wt(d),y=d.firstChild,f.insertAfter(d,a),vt(y),kt(a),rt(y)),f.setAttrib(y,"id",""),u.fire("NewBlock",{newBlock:y}),s.add())}}}var f=u.dom,o=u.selection,e=u.settings,s=u.undoManager,h=u.schema,c=h.getNonEmptyElements();u.on("keydown",function(n){13==n.keyCode&&l(n)!==!1&&n.preventDefault()})}});i(vi,[],function(){return function(n){function e(){var e=t.getStart(),h=n.getBody(),o,w,c,b,l,a,v,k=-16777215,d,p,s,g,y;if(y=i.forced_root_block,e&&1===e.nodeType&&y){for(;e&&e!=h;){if(f[e.nodeName])return;e=e.parentNode}if(o=t.getRng(),o.setStart){w=o.startContainer;c=o.startOffset;b=o.endContainer;l=o.endOffset;try{p=n.getDoc().activeElement===h}catch(nt){}}else o.item&&(e=o.item(0),o=n.getDoc().body.createTextRange(),o.moveToElementText(e)),p=o.parentElement().ownerDocument===n.getDoc(),s=o.duplicate(),s.collapse(!0),c=-1*s.move("character",k),s.collapsed||(s=o.duplicate(),s.collapse(!1),l=-1*s.move("character",k)-c);for(e=h.firstChild,g=h.nodeName.toLowerCase();e;)if((3===e.nodeType||1==e.nodeType&&!f[e.nodeName])&&u.isValidChild(g,y.toLowerCase())){if(3===e.nodeType&&0===e.nodeValue.length){v=e;e=e.nextSibling;r.remove(v);continue}a||(a=r.create(y,n.settings.forced_root_block_attrs),e.parentNode.insertBefore(a,e),d=!0);v=e;e=e.nextSibling;a.appendChild(v)}else a=null,e=e.nextSibling;if(d&&p){if(o.setStart)o.setStart(w,c),o.setEnd(b,l),t.setRng(o);else try{o=n.getDoc().body.createTextRange();o.moveToElementText(h);o.collapse(!0);o.moveStart("character",c);l>0&&o.moveEnd("character",l);o.select()}catch(nt){}n.nodeChanged()}}}var i=n.settings,r=n.dom,t=n.selection,u=n.schema,f=u.getBlockElements();i.forced_root_block&&n.on("NodeChange",e)}});i(yi,[tt,u,r,at,c,s],function(n,i,r,u,f,e){var s=r.each,a=r.extend,v=r.map,y=r.inArray,c=r.explode,p=i.gecko,w=i.ie,l=i.ie&&i.ie<11,o=!0,h=!1;return function(r){function ot(n,t,i){var r;return n=n.toLowerCase(),(r=ut.exec[n])?(r(n,t,i),o):h}function tt(n){var t;return n=n.toLowerCase(),(t=ut.state[n])?t(n):-1}function ct(n){var t;return n=n.toLowerCase(),(t=ut.value[n])?t(n):h}function it(n,t){t=t||"exec";s(n,function(n,i){s(i.toLowerCase().split(","),function(i){ut[t][i]=n})})}function rt(n,i,u){return i===t&&(i=h),u===t&&(u=null),r.getDoc().execCommand(n,i,u)}function st(n){return d.match(n)}function g(n,i){d.toggle(n,i?{value:i}:t);r.nodeChanged()}function ft(n){ht=k.getBookmark(n)}function et(){k.moveToBookmark(ht)}var b=r.dom,k=r.selection,ut={state:{},exec:{},value:{}},nt=r.settings,d=r.formatter,ht;a(this,{execCommand:ot,queryCommandState:tt,queryCommandValue:ct,addCommands:it});it({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(n){var f=r.getDoc(),u,t;try{rt(n)}catch(e){u=o}(u||!f.queryCommandSupported(n))&&(t=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),i.mac&&(t=t.replace(/Ctrl\+/g,"⌘+")),r.windowManager.alert(t))},unlink:function(){if(k.isCollapsed()){var n=k.getNode();return void("A"==n.tagName&&r.dom.remove(n,!0))}d.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(n){var t=n.substring(7);"full"==t&&(t="justify");s("left,center,right,justify".split(","),function(n){t!=n&&d.remove("align"+n)});g("align"+t);ot("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(n){var t,i;rt(n);t=b.getParent(k.getNode(),"ol,ul");t&&(i=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(ft(),b.split(i,t),et()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){g(n)},"ForeColor,HiliteColor,FontName":function(n,t,i){g(n,i)},FontSize:function(n,t,i){var r,u;i>=1&&7>=i&&(u=c(nt.font_size_style_values),r=c(nt.font_size_classes),i=r?r[i-1]||i:u[i-1]||i);g(n,i)},RemoveFormat:function(n){d.remove(n)},mceBlockQuote:function(){g("blockquote")},FormatBlock:function(n,t,i){return g(i||"p")},mceCleanup:function(){var n=k.getBookmark();r.setContent(r.getContent({cleanup:o}),{cleanup:o});k.moveToBookmark(n)},mceRemoveNode:function(n,t,i){var u=i||k.getNode();u!=r.getBody()&&(ft(),r.dom.remove(u,o),et())},mceSelectNodeDepth:function(n,t,i){var u=0;b.getParent(k.getNode(),function(n){if(1==n.nodeType&&u++==i)return(k.select(n),h)},r.getBody())},mceSelectNode:function(n,t,i){k.select(i)},mceInsertContent:function(t,i,f){function ut(n){function u(n){return t[n]&&3==t[n].nodeType}var i,t,r;return i=k.getRng(!0),t=i.startContainer,r=i.startOffset,3==t.nodeType&&(r>0?n=n.replace(/^&nbsp;/," "):u("previousSibling")||(n=n.replace(/^ /,"&nbsp;")),r<t.length?n=n.replace(/&nbsp;(<br>|)$/," "):u("nextSibling")||(n=n.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),n}function ft(n){if(tt)for(e=n.firstChild;e;e=e.walk(!0))ot[e.name]&&e.attr("data-mce-new","true")}function et(){if(tt){var n=r.getBody(),t=new u(b);s(b.select("*[data-mce-new]"),function(i){i.removeAttribute("data-mce-new");for(var r=i.parentNode;r&&r!=n;r=r.parentNode)t.compare(r,i)&&b.remove(i,!0)})}}var g,p,o,a,y,d,c,h,e,l,nt,tt,ot=r.schema.getTextInlineElements(),rt,v,it;if("string"!=typeof f&&(tt=f.merge,f=f.content),/^ | $/.test(f)&&(f=ut(f)),g=r.parser,p=new n({},r.schema),nt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#200B;<\/span>',d={content:f,format:"html",selection:!0},r.fire("BeforeSetContent",d),f=d.content,-1==f.indexOf("{$caret}")&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,nt),h=k.getRng(),rt=h.startContainer||(h.parentElement?h.parentElement():null),v=r.getBody(),rt===v&&k.isCollapsed()&&b.isBlock(v.firstChild)&&b.isEmpty(v.firstChild)&&(h=b.createRng(),h.setStart(v.firstChild,0),h.setEnd(v.firstChild,0),k.setRng(h)),k.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),o=k.getNode(),it={context:o.nodeName.toLowerCase()},y=g.parse(f,it),ft(y),e=y.lastChild,"mce_marker"==e.attr("id"))for(c=e,e=e.prev;e;e=e.walk(!0))if(3==e.type||!b.isBlock(e.name)){e.parent.insert(c,e,"br"===e.name);break}if(it.invalid){for(k.setContent(nt),o=k.getNode(),a=r.getBody(),9==o.nodeType?o=e=a:e=o;e!==a;)o=e,e=e.parentNode;f=o==a?a.innerHTML:b.getOuterHTML(o);f=p.serialize(g.parse(f.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return p.serialize(y)})));o==a?b.setHTML(a,f):b.setOuterHTML(o,f)}else f=p.serialize(y),e=o.firstChild,l=o.lastChild,!e||e===l&&"BR"===e.nodeName?b.setHTML(o,f):k.setContent(f);et();c=b.get("mce_marker");k.scrollIntoView(c);h=b.createRng();e=c.previousSibling;e&&3==e.nodeType?(h.setStart(e,e.nodeValue.length),w||(l=c.nextSibling,l&&3==l.nodeType&&(e.appendData(l.data),l.parentNode.removeChild(l)))):(h.setStartBefore(c),h.setEndBefore(c));b.remove(c);k.setRng(h);r.fire("SetContent",d);r.addVisual()},mceInsertRawHTML:function(n,t,i){k.setContent("tiny_mce_marker");r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(n,t,i){g(i)},mceSetContent:function(n,t,i){r.setContent(i)},"Indent,Outdent":function(n){var t,u,i;t=nt.indentation;u=/[a-z%]+$/i.exec(t);t=parseInt(t,10);tt("InsertUnorderedList")||tt("InsertOrderedList")?rt(n):(nt.forced_root_block||b.getParent(k.getNode(),b.isBlock)||d.apply("div"),s(k.getSelectedBlocks(),function(f){if("LI"!=f.nodeName){var e=r.getParam("indent_use_margin",!1)?"margin":"padding";e+="rtl"==b.getStyle(f,"direction",!0)?"Right":"Left";"outdent"==n?(i=Math.max(0,parseInt(f.style[e]||0,10)-t),b.setStyle(f,e,i?i+u:"")):(i=parseInt(f.style[e]||0,10)+t+u,b.setStyle(f,e,i))}}))},mceRepaint:function(){if(p)try{ft(o);k.getSel()&&k.getSel().selectAllChildren(r.getBody());k.collapse(o);et()}catch(n){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual;r.addVisual()},mceReplaceContent:function(n,t,i){r.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,k.getContent({format:"text"})))},mceInsertLink:function(n,t,i){var r;"string"==typeof i&&(i={href:i});r=b.getParent(k.getNode(),"a");i.href=i.href.replace(" ","%20");r&&i.href||d.remove("link");i.href&&d.apply("link",i,r)},selectAll:function(){var t=b.getRoot(),n;k.getRng().setStart?(n=b.createRng(),n.setStart(t,0),n.setEnd(t,t.childNodes.length),k.setRng(n)):(n=k.getRng(),n.item||(n.moveToElementText(t),n.select()))},"delete":function(){rt("Delete");var n=r.getBody();b.isEmpty(n)&&(r.setContent(""),n.firstChild&&b.isBlock(n.firstChild)?r.selection.setCursorLocation(n.firstChild,0):r.selection.setCursorLocation(n,0))},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(n,t,i){function it(){for(var t=new e(u,c),n,i=r.schema.getNonEmptyElements();n=t.next();)if(i[n.nodeName.toLowerCase()]||n.length>0)return!0}var w=i,s,d,v,h=k.getRng(!0),a,u,g,p;new f(b).normalize(h);a=h.startOffset;u=h.startContainer;1==u.nodeType&&u.hasChildNodes()&&(g=a>u.childNodes.length-1,u=u.childNodes[Math.min(a,u.childNodes.length-1)]||u,a=g&&3==u.nodeType?u.nodeValue.length:0);var c=b.getParent(u,b.isBlock),nt=c?c.nodeName.toUpperCase():"",y=c?b.getParent(c.parentNode,b.isBlock):null,tt=y?y.nodeName.toUpperCase():"",rt=w&&w.ctrlKey;return"LI"!=tt||rt||(c=y,nt=tt),u&&3==u.nodeType&&a>=u.nodeValue.length&&(l||it()||(s=b.create("br"),h.insertNode(s),h.setStartAfter(s),h.setEndAfter(s),d=!0)),s=b.create("br"),h.insertNode(s),p=b.doc.documentMode,l&&"PRE"==nt&&(!p||8>p)&&s.parentNode.insertBefore(b.doc.createTextNode("\r"),s),v=b.create("span",{},"&nbsp;"),s.parentNode.insertBefore(v,s),k.scrollIntoView(v),b.remove(v),d?(h.setStartBefore(s),h.setEndBefore(s)):(h.setStartAfter(s),h.setEndAfter(s)),k.setRng(h),r.undoManager.add(),o}});it({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(n){var t="align"+n.substring(7),i=k.isCollapsed()?[b.getParent(k.getNode(),b.isBlock)]:k.getSelectedBlocks(),r=v(i,function(n){return!!d.matchNode(n,t)});return-1!==y(r,o)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){return st(n)},mceBlockQuote:function(){return st("blockquote")},Outdent:function(){var n;return nt.inline_styles&&((n=b.getParent(k.getStart(),b.isBlock))&&parseInt(n.style.paddingLeft,10)>0||(n=b.getParent(k.getEnd(),b.isBlock))&&parseInt(n.style.paddingLeft,10)>0)?o:tt("InsertUnorderedList")||tt("InsertOrderedList")||!nt.inline_styles&&!!b.getParent(k.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(n){var t=b.getParent(k.getNode(),"ul,ol");return t&&("insertunorderedlist"===n&&"UL"===t.tagName||"insertorderedlist"===n&&"OL"===t.tagName)}},"state");it({"FontSize,FontName":function(n){var i=0,t;return(t=b.getParent(k.getNode(),"span"))&&(i="fontsize"==n?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),i}},"value");it({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}});i(vt,[r],function(n){function t(n,f){var e=this,o,s,h;if(n=r(n),f=e.settings=f||{},o=f.base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n))return void(e.source=n);h=0===n.indexOf("//");0!==n.indexOf("/")||h||(n=(o?o.protocol||"http":"http")+"://mce_host"+n);/^[\w\-]*:?\/\//.test(n)||(s=f.base_uri?f.base_uri.path:new t(location.href).directory,""===f.base_uri.protocol?n="//mce_host"+e.toAbsPath(s,n):(n=/([^#?]*)([#?]?.*)/.exec(n),n=(o&&o.protocol||"http")+"://mce_host"+e.toAbsPath(s,n[1])+n[2]));n=n.replace(/@@/g,"(mce_at)");n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);i(u,function(t,i){var r=n[i];r&&(r=r.replace(/\(mce_at\)/g,"@@"));e[t]=r});o&&(e.protocol||(e.protocol=o.protocol),e.userInfo||(e.userInfo=o.userInfo),e.port||"mce_host"!==e.host||(e.port=o.port),e.host&&"mce_host"!==e.host||(e.host=o.host),e.source="");h&&(e.protocol="")}var i=n.each,r=n.trim,u="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),f={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(n){var t=this;n=/^(.*?)\/?(\w+)?$/.exec(n);t.path=n[0];t.directory=n[1];t.file=n[2];t.source="";t.getURI()},toRelative:function(n){var i=this,u,r,f;return"./"===n?n:(n=new t(n,{base_uri:i}),"mce_host"!=n.host&&i.host!=n.host&&n.host||i.port!=n.port||i.protocol!=n.protocol&&""!==n.protocol)?n.getURI():(r=i.getURI(),f=n.getURI(),r==f||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==f?r:(u=i.toRelPath(i.path,n.path),n.query&&(u+="?"+n.query),n.anchor&&(u+="#"+n.anchor),u))},toAbsolute:function(n,i){return n=new t(n,{base_uri:this}),n.getURI(i&&this.isSameOrigin(n))},isSameOrigin:function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var t=f[this.protocol];if(t&&(this.port||t)==(n.port||t))return!0}return!1},toRelPath:function(n,t){var r,f=0,e="",i,u;if(n=n.substring(0,n.lastIndexOf("/")),n=n.split("/"),r=t.split("/"),n.length>=r.length)for(i=0,u=n.length;u>i;i++)if(i>=r.length||n[i]!=r[i]){f=i+1;break}if(n.length<r.length)for(i=0,u=r.length;u>i;i++)if(i>=n.length||n[i]!=r[i]){f=i+1;break}if(1===f)return t;for(i=0,u=n.length-(f-1);u>i;i++)e+="../";for(i=f-1,u=r.length;u>i;i++)e+=i!=f-1?"/"+r[i]:r[i];return e},toAbsPath:function(n,t){var r,e=0,f=[],o,u;for(o=/\/$/.test(t)?"/":"",n=n.split("/"),t=t.split("/"),i(n,function(n){n&&f.push(n)}),n=f,r=t.length-1,f=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?e>0?e--:f.push(t[r]):e++);return r=n.length-e,u=0>=r?f.reverse().join("/"):n.slice(0,r).join("/")+"/"+f.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(n){var i,t=this;return(!t.source||n)&&(i="",n||(i+=t.protocol?t.protocol+"://":"//",t.userInfo&&(i+=t.userInfo+"@"),t.host&&(i+=t.host),t.port&&(i+=":"+t.port)),t.path&&(i+=t.path),t.query&&(i+="?"+t.query),t.anchor&&(i+="#"+t.anchor),t.source=i),t.source}},t});i(w,[r],function(n){function r(){}var t=n.each,f=n.extend,u,i;return r.extend=u=function(n){function r(){var t,r,u,n=this;if(!i&&(n.init&&n.init.apply(n,arguments),r=n.Mixins))for(t=r.length;t--;)u=r[t],u.init&&u.init.apply(n,arguments)}function l(){return this}function a(n,t){return function(){var i=this,u=i._super,r;return i._super=e[n],r=t.apply(i,arguments),i._super=u,r}}var c=this,e=c.prototype,h,o,s;i=!0;h=new c;i=!1;n.Mixins&&(t(n.Mixins,function(t){t=t;for(var i in t)"init"!==i&&(n[i]=t[i])}),e.Mixins&&(n.Mixins=e.Mixins.concat(n.Mixins)));n.Methods&&t(n.Methods.split(","),function(t){n[t]=l});n.Properties&&t(n.Properties.split(","),function(t){var i="_"+t;n[t]=function(n){var t=this,r;return n!==r?(t[i]=n,t):t[i]}});n.Statics&&t(n.Statics,function(n,t){r[t]=n});n.Defaults&&e.Defaults&&(n.Defaults=f({},e.Defaults,n.Defaults));for(o in n)s=n[o],h[o]="function"==typeof s&&e[o]?a(o,s):s;return r.prototype=h,r.constructor=r,r.extend=u,r},r});i(yt,[r],function(n){function t(n){function r(){return!1}function f(){return!0}function h(i,u){var h,o,l,c;if(i=i.toLowerCase(),u=u||{},u.type=i,u.target||(u.target=e),u.preventDefault||(u.preventDefault=function(){u.isDefaultPrevented=f},u.stopPropagation=function(){u.isPropagationStopped=f},u.stopImmediatePropagation=function(){u.isImmediatePropagationStopped=f},u.isDefaultPrevented=r,u.isPropagationStopped=r,u.isImmediatePropagationStopped=r),n.beforeFire&&n.beforeFire(u),h=t[i])for(o=0,l=h.length;l>o;o++){if(h[o]=c=h[o],c.once&&s(i,c),u.isImmediatePropagationStopped())return u.stopPropagation(),u;if(c.call(e,u)===!1)return u.preventDefault(),u}return u}function o(n,f,e){var o,s,h;if(f===!1&&(f=r),f)for(s=n.toLowerCase().split(" "),h=s.length;h--;)n=s[h],o=t[n],o||(o=t[n]=[],u(n,!0)),e?o.unshift(f):o.push(f);return i}function s(n,r){var o,f,s,h,e;if(n)for(h=n.toLowerCase().split(" "),o=h.length;o--;){if(n=h[o],f=t[n],!n){for(s in t)u(s,!1),delete t[s];return i}if(f){if(r)for(e=f.length;e--;)f[e]===r&&(f=f.slice(0,e).concat(f.slice(e+1)),t[n]=f);else f.length=0;f.length||(u(n,!1),delete t[n])}}else{for(n in t)u(n,!1);t={}}return i}function c(n,t,i){return t.once=!0,o(n,t,i)}function l(n){return n=n.toLowerCase(),!(!t[n]||0===t[n].length)}var i=this,e,t={},u;n=n||{};e=n.scope||i;u=n.toggleEvent||r;i.fire=h;i.on=o;i.off=s;i.once=c;i.has=l}var i=n.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate"," ");return t.isNative=function(n){return!!i[n.toLowerCase()]},t});i(pt,[w],function(n){function u(n){for(var i=[],t=n.length,r;t--;)r=n[t],r.__checked||(i.push(r),r.__checked=1);for(t=i.length;t--;)delete i[t].__checked;return i}var f=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=/^\s*|\s*$/g,t,r=n.extend({init:function(n){function r(n){if(n)return(n=n.toLowerCase(),function(t){return"*"===n||t.type===n})}function u(n){if(n)return function(t){return t._name===n}}function o(n){if(n)return(n=n.split("."),function(t){for(var i=n.length;i--;)if(!t.hasClass(n[i]))return!1;return!0})}function s(n,t,i){if(n)return function(r){var u=r[n]?r[n]():"";return t?"="===t?u===i:"*="===t?u.indexOf(i)>=0:"~="===t?(" "+u+" ").indexOf(" "+i+" ")>=0:"!="===t?u!=i:"^="===t?0===u.indexOf(i):"$="===t?u.substr(u.length-i.length)===i:!1:!!i}}function h(n){var i;if(n)return(n=/(?:not\((.+)\))|(.+)/i.exec(n),n[1]?(i=t(n[1],[]),function(n){return!l(n,i)}):(n=n[2],function(t,i,r){return"first"===n?0===i:"last"===n?i===r-1:"even"===n?i%2==0:"odd"===n?i%2==1:t[n]?t[n]():!1}))}function c(n,t,i){function l(n){n&&t.push(n)}var c;return c=f.exec(n.replace(e,"")),l(r(c[1])),l(u(c[2])),l(o(c[3])),l(s(c[4],c[5],c[6])),l(h(c[7])),t.psuedo=!!c[7],t.direct=i,t}function t(n,r){var e=[],o,u,f;do if(i.exec(""),u=i.exec(n),u&&(n=u[3],e.push(u[1]),u[2])){o=u[3];break}while(u);for(o&&t(o,r),n=[],f=0;f<e.length;f++)">"!=e[f]&&n.push(c(e[f],[],">"===e[f-1]));return r.push(n),r}var l=this.match;this._selectors=t(n,[])},match:function(n,t){var f,v,u,e,c,r,o,s,h,y,l,a,i;for(t=t||this._selectors,f=0,v=t.length;v>f;f++){for(c=t[f],e=c.length,i=n,a=0,u=e-1;u>=0;u--)for(s=c[u];i;){if(s.psuedo)for(l=i.parent().items(),h=y=l.length;h--&&l[h]!==i;);for(r=0,o=s.length;o>r;r++)if(!s[r](i,h,y)){r=o+1;break}if(r===o){a++;break}if(u===e-1)break;i=i.parent()}if(a===e)return!0}return!1},find:function(n){function e(n,t,r){for(var f,s,u,c=t[r],o=0,h=n.length;h>o;o++){for(u=n[o],f=0,s=c.length;s>f;f++)if(!c[f](u,o,h)){f=s+1;break}if(f===s)r==t.length-1?i.push(u):u.items&&e(u.items(),t,r+1);else if(c.direct)return;u.items&&e(u.items(),t,r)}}var i=[],f,o,s=this._selectors;if(n.items){for(f=0,o=s.length;o>f;f++)e(n.items(),s[f],0);o>1&&(i=u(i))}return t||(t=r.Collection),new t(i)}});return r});i(wt,[r,pt,w],function(n,t,i){var r,u,f=Array.prototype.push,e=Array.prototype.slice;return u={length:0,init:function(n){n&&this.add(n)},add:function(t){var i=this;return n.isArray(t)?f.apply(i,t):t instanceof r?i.add(t.toArray()):f.call(i,t),i},set:function(n){var t=this,r=t.length,i;for(t.length=0,t.add(n),i=t.length;r>i;i++)delete t[i];return t},filter:function(n){var e=this,i,o,s=[],u,f;for("string"==typeof n?(n=new t(n),f=function(t){return n.match(t)}):f=n,i=0,o=e.length;o>i;i++)u=e[i],f(u)&&s.push(u);return new r(s)},slice:function(){return new r(e.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},each:function(t){return n.each(this,t),this},toArray:function(){return n.toArray(this)},indexOf:function(n){for(var i=this,t=i.length;t--&&i[t]!==n;);return t},reverse:function(){return new r(n.toArray(this).reverse())},hasClass:function(n){return this[0]?this[0].hasClass(n):!1},prop:function(n,t){var r=this,u,i;return t!==u?(r.each(function(i){i[n]&&i[n](t)}),r):(i=r[0],i&&i[n]?i[n]():void 0)},exec:function(t){var i=this,r=n.toArray(arguments).slice(1);return i.each(function(n){n[t]&&n[t].apply(n,r)}),i},remove:function(){for(var n=this.length;n--;)this[n].remove();return this}},n.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){u[t]=function(){var i=n.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,i)}),this}}),n.each("text name disabled active selected checked visible parent value data".split(" "),function(n){u[n]=function(t){return this.prop(n,t)}}),r=i.extend(u),t.Collection=r,r});i(f,[r,o],function(n,t){var i=0;return{id:function(){return"mceu_"+i++},createFragment:function(n){return t.DOM.createFragment(n)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(n){var i,r,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),i=Math.max(t.width||t.right-t.left,n.offsetWidth),r=Math.max(t.height||t.bottom-t.bottom,n.offsetHeight)):(i=n.offsetWidth,r=n.offsetHeight),{width:i,height:r}},getPos:function(n,i){return t.DOM.getPos(n,i)},getViewPort:function(n){return t.DOM.getViewPort(n)},get:function(n){return document.getElementById(n)},addClass:function(n,i){return t.DOM.addClass(n,i)},removeClass:function(n,i){return t.DOM.removeClass(n,i)},hasClass:function(n,i){return t.DOM.hasClass(n,i)},toggleClass:function(n,i,r){return t.DOM.toggleClass(n,i,r)},css:function(n,i,r){return t.DOM.setStyle(n,i,r)},on:function(n,i,r,u){return t.DOM.bind(n,i,r,u)},off:function(n,i,r){return t.DOM.unbind(n,i,r)},fire:function(n,i,r){return t.DOM.fire(n,i,r)},innerHtml:function(n,i){t.DOM.setHTML(n,i)}}});i(a,[w,r,yt,wt,f],function(n,t,i,r,u){function o(n){return n._eventDispatcher||(n._eventDispatcher=new i({scope:n,toggleEvent:function(t,r){r&&i.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n._rendered&&n.bindPendingEvents())}})),n._eventDispatcher}var f={},h="onmousewheel"in document,c=!1,s="mce-",e=n.extend({Statics:{elementIdCache:f,classPrefix:s},isRtl:function(){return e.rtl},classPrefix:s,init:function(n){var i=this,r,f;if(i.settings=n=t.extend({},i.Defaults,n),i._id=n.id||u.id(),i._text=i._name="",i._width=i._height=0,i._aria={role:n.role},r=n.classes)for(r=r.split(" "),r.map={},f=r.length;f--;)r.map[r[f]]=!0;i._classes=r||[];i.visible(!0);t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=n[t],u;r!==u?i[t](r):i["_"+t]===u&&(i["_"+t]=!1)});i.on("click",function(){if(i.disabled())return!1});n.classes&&t.each(n.classes.split(" "),function(n){i.addClass(n)});i.settings=n;i._borderBox=i.parseBox(n.border);i._paddingBox=i.parseBox(n.padding);i._marginBox=i.parseBox(n.margin);n.hidden&&i.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(n){for(var t,i=this.getRoot().controlIdLookup;n&&i&&!(t=i[n.id]);)n=n.parentNode;return t},parseBox:function(n){var t,i=10;if(n)return"number"==typeof n?(n=n||0,{top:n,left:n,bottom:n,right:n}):(n=n.split(" "),t=n.length,1===t?n[1]=n[2]=n[3]=n[0]:2===t?(n[2]=n[0],n[3]=n[1]):3===t&&(n[3]=n[1]),{top:parseInt(n[0],i)||0,right:parseInt(n[1],i)||0,bottom:parseInt(n[2],i)||0,left:parseInt(n[3],i)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(n,t){function r(t){var i=document.defaultView;return i?(t=t.replace(/[A-Z]/g,function(n){return"-"+n}),i.getComputedStyle(n,null).getPropertyValue(t)):n.currentStyle[t]}function i(n){var t=parseFloat(r(n),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},initLayoutRect:function(){var n=this,t=n.settings,f,p,o=n.getEl(),i,r,s,h,e,c,l,a;f=n._borderBox=n._borderBox||n.measureBox(o,"border");n._paddingBox=n._paddingBox||n.measureBox(o,"padding");n._marginBox=n._marginBox||n.measureBox(o,"margin");a=u.getSize(o);c=t.minWidth;l=t.minHeight;s=c||a.width;h=l||a.height;i=t.width;r=t.height;e=t.autoResize;e="undefined"!=typeof e?e:!i&&!r;i=i||s;r=r||h;var v=f.left+f.right,y=f.top+f.bottom,w=t.maxWidth||65535,b=t.maxHeight||65535;return n._layoutRect=p={x:t.x||0,y:t.y||0,w:i,h:r,deltaW:v,deltaH:y,contentW:i-v,contentH:r-y,innerW:i-v,innerH:r-y,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(s,w),minH:Math.min(h,b),maxW:w,maxH:b,autoResize:e,scrollW:0},n._lastLayoutRect={},p},layoutRect:function(n){var f=this,t=f._layoutRect,u,i,o,s,r,h;return t||(t=f.initLayoutRect()),n?(o=t.deltaW,s=t.deltaH,n.x!==r&&(t.x=n.x),n.y!==r&&(t.y=n.y),n.minW!==r&&(t.minW=n.minW),n.minH!==r&&(t.minH=n.minH),i=n.w,i!==r&&(i=i<t.minW?t.minW:i,i=i>t.maxW?t.maxW:i,t.w=i,t.innerW=i-o),i=n.h,i!==r&&(i=i<t.minH?t.minH:i,i=i>t.maxH?t.maxH:i,t.h=i,t.innerH=i-s),i=n.innerW,i!==r&&(i=i<t.minW-o?t.minW-o:i,i=i>t.maxW-o?t.maxW-o:i,t.innerW=i,t.w=i+o),i=n.innerH,i!==r&&(i=i<t.minH-s?t.minH-s:i,i=i>t.maxH-s?t.maxH-s:i,t.innerH=i,t.h=i+s),n.contentW!==r&&(t.contentW=n.contentW),n.contentH!==r&&(t.contentH=n.contentH),u=f._lastLayoutRect,(u.x!==t.x||u.y!==t.y||u.w!==t.w||u.h!==t.h)&&(h=e.repaintControls,h&&h.map&&!h.map[f._id]&&(h.push(f),h.map[f._id]=!0),u.x=t.x,u.y=t.y,u.w=t.w,u.h=t.h),f):t},repaint:function(){var i=this,u,f,n,e,o=0,s=0,t,r;r=document.createRange?function(n){return n}:Math.round;u=i.getEl().style;n=i._layoutRect;t=i._lastRepaintRect||{};e=i._borderBox;o=e.left+e.right;s=e.top+e.bottom;n.x!==t.x&&(u.left=r(n.x)+"px",t.x=n.x);n.y!==t.y&&(u.top=r(n.y)+"px",t.y=n.y);n.w!==t.w&&(u.width=r(n.w-o)+"px",t.w=n.w);n.h!==t.h&&(u.height=r(n.h-s)+"px",t.h=n.h);i._hasBody&&n.innerW!==t.innerW&&(f=i.getEl("body").style,f.width=r(n.innerW)+"px",t.innerW=n.innerW);i._hasBody&&n.innerH!==t.innerH&&(f=f||i.getEl("body").style,f.height=r(n.innerH)+"px",t.innerH=n.innerH);i._lastRepaintRect=t;i.fire("repaint",{},!1)},on:function(n,t){function r(n){var t,r;return"string"!=typeof n?n:function(u){return t||i.parentsAndSelf().each(function(i){var u=i.settings.callbacks;if(u&&(t=u[n]))return(r=i,!1)}),t.call(r,u)}}var i=this;return o(i).on(n,r(t)),i},off:function(n,t){return o(this).off(n,t),this},fire:function(n,t,i){var u=this,r;if(t=t||{},t.control||(t.control=u),t=o(u).fire(n,t),i!==!1&&u.parent)for(r=u.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},hasEventListeners:function(n){return o(this).has(n)},parents:function(n){for(var u=this,i=new r,t=u.parent();t;t=t.parent())i.add(t);return n&&(i=i.filter(n)),i},parentsAndSelf:function(n){return new r(this).add(this.parents(n))},next:function(){var n=this.parent().items();return n[n.indexOf(this)+1]},prev:function(){var n=this.parent().items();return n[n.indexOf(this)-1]},findCommonAncestor:function(n,t){for(var i;n;){for(i=t;i&&n!=i;)i=i.parent();if(n==i)break;n=n.parent()}return n},hasClass:function(n,t){var i=this._classes[t||"control"];return n=this.classPrefix+n,i&&!!i.map[n]},addClass:function(n,t){var r=this,i,u;return n=this.classPrefix+n,i=r._classes[t||"control"],i||(i=[],i.map={},r._classes[t||"control"]=i),i.map[n]||(i.map[n]=n,i.push(n),r._rendered&&(u=r.getEl(t),u&&(u.className=i.join(" ")))),r},removeClass:function(n,t){var r=this,i,u,f;if(n=this.classPrefix+n,i=r._classes[t||"control"],i&&i.map[n])for(delete i.map[n],u=i.length;u--;)i[u]===n&&i.splice(u,1);return r._rendered&&(f=r.getEl(t),f&&(f.className=i.join(" "))),r},toggleClass:function(n,t,i){var r=this;return t?r.addClass(n,i):r.removeClass(n,i),r},classes:function(n){var t=this._classes[n||"control"];return t?t.join(" "):""},innerHtml:function(n){return u.innerHtml(this.getEl(),n),this},getEl:function(n,t){var i=n?this._id+"-"+n:this._id;return f[i]=(t===!0?null:f[i])||u.get(i)},visible:function(n){var t=this,i;return"undefined"!=typeof n?(t._visible!==n&&(t._rendered&&(t.getEl().style.display=n?"":"none"),t._visible=n,i=t.parent(),i&&(i._lastRect=null),t.fire(n?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(n){}return this},blur:function(){return this.getEl().blur(),this},aria:function(n,t){var i=this,r=i.getEl(i.ariaTarget);return"undefined"==typeof t?i._aria[n]:(i._aria[n]=t,i._rendered&&r.setAttribute("role"==n?n:"aria-"+n,t),i)},encode:function(n,t){return t!==!1&&(n=this.translate(n)),(n||"").replace(/[&<>"]/g,function(n){return"&#"+n.charCodeAt(0)+";"})},translate:function(n){return e.translate?e.translate(n):n},before:function(n){var t=this,i=t.parent();return i&&i.insert(n,i.items().indexOf(t),!0),t},after:function(n){var t=this,i=t.parent();return i&&i.insert(n,i.items().indexOf(t)),t},remove:function(){var n=this,t=n.getEl(),r=n.parent(),e,i,o,s,h;if(n.items)for(o=n.items().toArray(),i=o.length;i--;)o[i].remove();if(r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&u.off(t),s=n.getRoot().controlIdLookup,s&&delete s[n._id],delete f[n._id],t&&t.parentNode){for(h=t.getElementsByTagName("*"),i=h.length;i--;)delete f[h[i].id];t.parentNode.removeChild(t)}return n._rendered=!1,n},renderBefore:function(n){var t=this;return n.parentNode.insertBefore(u.createFragment(t.renderHtml()),n),t.postRender(),t},renderTo:function(n){var t=this;return n=n||t.getContainerElm(),n.appendChild(u.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var n=this,i=n.settings,e,r,f,t,o,s,h;for(t in i)0===t.indexOf("on")&&n.on(t.substr(2),i[t]);if(n._eventsRoot){for(f=n.parent();!o&&f;f=f.parent())o=f._eventsRoot;if(o)for(t in o._nativeEvents)n._nativeEvents[t]=!0}n.bindPendingEvents();i.style&&(e=n.getEl(),e&&(e.setAttribute("style",i.style),e.style.cssText=i.style));n._visible||u.css(n.getEl(),"display","none");n.settings.border&&(r=n.borderBox(),u.css(n.getEl(),{"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));s=n.getRoot();s.controlIdLookup||(s.controlIdLookup={});s.controlIdLookup[n._id]=n;for(h in n._aria)n.aria(h,n._aria[h]);n.fire("postrender",{},!1)},scrollIntoView:function(n){function c(n,t){for(var u,i=n,r=u=0;i&&i!=t&&i.nodeType;)r+=i.offsetLeft||0,u+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:u}}var i=this.getEl(),t=i.parentNode,r,u,f,e,o,s,h=c(i,t);return r=h.x,u=h.y,f=i.offsetWidth,e=i.offsetHeight,o=t.clientWidth,s=t.clientHeight,"end"==n?(r-=o-f,u-=s-e):"center"==n&&(r-=o/2-f/2,u-=s/2-e/2),t.scrollLeft=r,t.scrollTop=u,this},bindPendingEvents:function(){function a(n){var i=t.getParentCtrl(n.target);i&&i.fire(n.type,n)}function v(){var t=n._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(n){n.fire("mouseleave",{target:n.getEl()})}),n._lastHoverCtrl=null)}function y(i){var u=t.getParentCtrl(i.target),f=n._lastHoverCtrl,e=0,r,s,o;if(u!==f){if(n._lastHoverCtrl=u,s=u.parents().toArray().reverse(),s.push(u),f){for(o=f.parents().toArray().reverse(),o.push(f),e=0;e<o.length&&s[e]===o[e];e++);for(r=o.length-1;r>=e;r--)f=o[r],f.fire("mouseleave",{target:f.getEl()})}for(r=e;r<s.length;r++)u=s[r],u.fire("mouseenter",{target:u.getEl()})}}function l(n){n.preventDefault();"mousewheel"==n.type?(n.deltaY=-1/40*n.wheelDelta,n.wheelDeltaX&&(n.deltaX=-1/40*n.wheelDeltaX)):(n.deltaX=0,n.deltaY=n.detail);n=t.fire("wheel",n)}var t=this,i,o,f,n,s,r,e;if(t._rendered=!0,s=t._nativeEvents){for(f=t.parents().toArray(),f.unshift(t),i=0,o=f.length;!n&&o>i;i++)n=f[i]._eventsRoot;for(n||(n=f[f.length-1]||t),t._eventsRoot=n,o=i,i=0;o>i;i++)f[i]._eventsRoot=n;e=n._delegates;e||(e=n._delegates={});for(r in s){if(!s)return!1;"wheel"!==r||c?("mouseenter"===r||"mouseleave"===r?n._hasMouseEnter||(u.on(n.getEl(),"mouseleave",v),u.on(n.getEl(),"mouseover",y),n._hasMouseEnter=1):e[r]||(u.on(n.getEl(),r,a),e[r]=!0),s[r]=!1):h?u.on(t.getEl(),"mousewheel",l):u.on(t.getEl(),"DOMMouseScroll",l)}}},getRoot:function(){for(var t,r,n=this,i=[];n;){if(n.rootControl){t=n.rootControl;break}i.push(n);t=n;n=n.parent()}for(t||(t=this),r=i.length;r--;)i[r].rootControl=t;return t},reflow:function(){return this.repaint(),this}});return e});i(b,[],function(){var n={},t;return{add:function(t,i){n[t.toLowerCase()]=i},has:function(t){return!!n[t.toLowerCase()]},create:function(i,r){var u,f,e;if(!t){e=tinymce.ui;for(f in e)n[f.toLowerCase()]=e[f];t=!0}if("string"==typeof i?(r=r||{},r.type=i):(r=i,i=r.type),i=i.toLowerCase(),u=n[i],!u)throw new Error("Could not find control by type: "+i);return u=new u(r),u.type=i,u}}});i(pi,[],function(){return function(n){function f(n){return n=n||t,n&&n.getAttribute("role")}function e(n){for(var r,i=n||t;i=i.parentNode;)if(r=f(i))return r}function c(n){var i=t;if(i)return i.getAttribute("aria-"+n)}function l(n){var t=n.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function y(n){return l(n)&&!n.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(f(n))?!0:!1}function u(n){function t(n){if(1==n.nodeType&&"none"!=n.style.display){y(n)&&i.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}var i=[];return t(n||s.getEl()),i}function a(n){var u,t,i;for(n=n||r,t=n.parents().toArray(),t.unshift(n),i=0;i<t.length&&(u=t[i],!u.settings.ariaRoot);i++);return u}function p(n){var t=a(n),i=u(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?h(t.lastAriaIndex,i):h(0,i)}function h(n,t){return 0>n?n=t.length-1:n>=t.length&&(n=0),t[n]&&t[n].focus(),n}function i(n,i){var f=-1,e=a(),r;for(i=i||u(e.getEl()),r=0;r<i.length;r++)i[r]===t&&(f=r);f+=n;e.lastAriaIndex=h(f,i)}function w(){var n=e();"tablist"==n?i(-1,u(t.parentNode)):r.parent().submenu?v():i(-1)}function b(){var r=f(),n=e();"tablist"==n?i(1,u(t.parentNode)):"menuitem"==r&&"menu"==n&&c("haspopup")?o():i(1)}function k(){i(-1)}function d(){var n=f(),t=e();"menuitem"==n&&"menubar"==t?o():"button"==n&&c("haspopup")?o({key:"down"}):i(1)}function g(n){var f=e(),t;"tablist"==f?(t=u(r.getEl("body"))[0],t&&t.focus()):i(n.shiftKey?-1:1)}function v(){r.fire("cancel")}function o(n){n=n||{};r.fire("click",{target:t,aria:n})}var s=n.root,t,r;try{t=document.activeElement}catch(nt){t=document.body}return r=s.getParentCtrl(t),s.on("keydown",function(n){function i(n,i){l(t)||i(n)!==!1&&n.preventDefault()}if(!n.isDefaultPrevented())switch(n.keyCode){case 37:i(n,w);break;case 39:i(n,b);break;case 38:i(n,k);break;case 40:i(n,d);break;case 27:v();break;case 14:case 13:case 32:i(n,o);break;case 9:g(n)!==!1&&n.preventDefault()}}),s.on("focusin",function(n){t=n.target;r=n.control}),{focusFirst:p}}});i(v,[a,wt,pt,b,pi,r,f],function(n,t,i,r,u,f,e){var o={};return n.extend({layout:"",innerClass:"container-inner",init:function(n){var i=this;i._super(n);n=i.settings;i._fixed=n.fixed;i._items=new t;i.isRtl()&&i.addClass("rtl");i.addClass("container");i.addClass("container-body","body");n.containerCls&&i.addClass(n.containerCls);i._layout=r.create((n.layout||i.layout)+"layout");i.settings.items&&i.add(i.settings.items);i._hasBody=!0},items:function(){return this._items},find:function(n){return n=o[n]=o[n]||new i(n),n.find(this)},add:function(n){var t=this;return t.items().add(t.create(n)).parent(t),t},focus:function(n){var t=this,i,u,r;return n&&(u=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void u.focusFirst(t):(r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(n){return n.settings.autofocus?(i=null,!1):void(n.canFocus&&(i=i||n))}),i&&i.focus(),t)},replace:function(n,t){for(var i,u=this.items(),r=u.length;r--;)if(u[r]===n){u[r]=t;break}r>=0&&(i=t.getEl(),i&&i.parentNode.removeChild(i),i=n.getEl(),i&&i.parentNode.removeChild(i));t.parent(this)},create:function(t){var u=this,i,e=[];return f.isArray(t)||(t=[t]),f.each(t,function(t){t&&(t instanceof n||("string"==typeof t&&(t={type:t}),i=f.extend({},u.settings.defaults,t),t.type=i.type=i.type||t.type||u.settings.defaultType||(i.defaults?i.defaults.type:null),t=r.create(i)),e.push(t))}),e},renderNew:function(){var n=this;return n.items().each(function(t,i){var r,u;t.parent(n);t._rendered||(r=n.getEl("body"),u=e.createFragment(t.renderHtml()),r.hasChildNodes()&&i<=r.childNodes.length-1?r.insertBefore(u,r.childNodes[i]):r.appendChild(u),t.postRender())}),n._layout.applyClasses(n),n._lastRect=null,n},append:function(n){return this.add(n).renderNew()},prepend:function(n){var t=this;return t.items().set(t.create(n).concat(t.items().toArray())),t.renderNew()},insert:function(n,t,i){var u=this,r,f,e;return n=u.create(n),r=u.items(),!i&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(f=r.slice(0,t).toArray(),e=r.slice(t).toArray(),r.set(f.concat(n,e))),u.renderNew()},fromJSON:function(n){var t=this;for(var i in n)t.find("#"+i).value(n[i]);return t},toJSON:function(){var t=this,n={};return t.find("*").each(function(t){var i=t.name(),r=t.value();i&&"undefined"!=typeof r&&(n[i]=r)}),n},preRender:function(){},renderHtml:function(){var n=this,t=n._layout,i=this.settings.role;return n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this,t;return n.items().exec("postRender"),n._super(),n._layout.postRender(n),n._rendered=!0,n.settings.style&&e.css(n.getEl(),n.settings.style),n.settings.border&&(t=n.borderBox(),e.css(n.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),n.parent()||(n.keyboardNav=new u({root:n})),n},initLayoutRect:function(){var n=this,t=n._super();return n._layout.recalc(n),t},recalc:function(){var t=this,n=t._layoutRect,i=t._lastRect;if(!i||i.w!=n.w||i.h!=n.h)return(t._layout.recalc(t),n=t.layoutRect(),t._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0)},reflow:function(){var t;if(this.visible()){for(n.repaintControls=[],n.repaintControls.map={},this.recalc(),t=n.repaintControls.length;t--;)n.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();n.repaintControls=[]}return this}})});i(k,[f],function(n){function t(){var f=document,n,t,r,e,o,u,s,h,i=Math.max;return n=f.documentElement,t=f.body,r=i(n.scrollWidth,t.scrollWidth),e=i(n.clientWidth,t.clientWidth),o=i(n.offsetWidth,t.offsetWidth),u=i(n.scrollHeight,t.scrollHeight),s=i(n.clientHeight,t.clientHeight),h=i(n.offsetHeight,t.offsetHeight),{width:o>r?e:r,height:h>u?s:u}}return function(i,r){function o(){return u.getElementById(r.handle||i)}var f,u=document,h,c,e,s,l,a;r=r||{};c=function(i){var v=t(),c,y;i.preventDefault();h=i.button;c=o();l=i.screenX;a=i.screenY;y=window.getComputedStyle?window.getComputedStyle(c,null).getPropertyValue("cursor"):c.runtimeStyle.cursor;f=u.createElement("div");n.css(f,{position:"absolute",top:0,left:0,width:v.width,height:v.height,zIndex:2147483647,opacity:.0001,cursor:y});u.body.appendChild(f);n.on(u,"mousemove",s);n.on(u,"mouseup",e);r.start(i)};s=function(n){return n.button!==h?e(n):(n.deltaX=n.screenX-l,n.deltaY=n.screenY-a,n.preventDefault(),void r.drag(n))};e=function(t){n.off(u,"mousemove",s);n.off(u,"mouseup",e);f.parentNode.removeChild(f);r.stop&&r.stop(t)};this.destroy=function(){n.off(o())};n.on(o(),"mousedown",c)}});i(wi,[f,k],function(n,t){return{init:function(){var n=this;n.on("repaint",n.renderScroll)},renderScroll:function(){function r(){function e(t,e,o,s,h,c){var a,v,k,y,d,w,l,p,b;if(v=i.getEl("scroll"+t)){if(p=e.toLowerCase(),b=o.toLowerCase(),i.getEl("absend")&&n.css(i.getEl("absend"),p,i.layoutRect()[s]-1),!h)return void n.css(v,"display","none");n.css(v,"display","block");a=i.getEl("body");k=i.getEl("scroll"+t+"t");y=a["client"+o]-2*u;y-=r&&f?v["client"+c]:0;d=a["scroll"+o];w=y/d;l={};l[p]=a["offset"+e]+u;l[b]=y;n.css(v,l);l={};l[p]=a["scroll"+e]*w;l[b]=y*w;n.css(k,l)}}var r,f,t;t=i.getEl("body");r=t.scrollWidth>t.clientWidth;f=t.scrollHeight>t.clientHeight;e("h","Left","Width","contentW",r,"Height");e("v","Top","Height","contentH",f,"Width")}function f(){function r(r,f,e,o,s){var l,h=i._id+"-scroll"+r,c=i.classPrefix;i.getEl().appendChild(n.createFragment('<div id="'+h+'" class="'+c+"scrollbar "+c+"scrollbar-"+r+'"><div id="'+h+'t" class="'+c+'scrollbar-thumb"><\/div><\/div>'));i.draghelper=new t(h+"t",{start:function(){l=i.getEl("body")["scroll"+f];n.addClass(n.get(h),c+"active")},drag:function(n){var c,a,v,h,t=i.layoutRect();a=t.contentW>t.innerW;v=t.contentH>t.innerH;h=i.getEl("body")["client"+e]-2*u;h-=a&&v?i.getEl("scroll"+r)["client"+s]:0;c=h/i.getEl("body")["scroll"+e];i.getEl("body")["scroll"+f]=l+n["delta"+o]/c},stop:function(){n.removeClass(n.get(h),c+"active")}})}i.addClass("scroll");r("v","Top","Height","Y","Width");r("h","Left","Width","X","Height")}var i=this,u=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,f(),i.on("wheel",function(n){var t=i.getEl("body");t.scrollLeft+=10*(n.deltaX||0);t.scrollTop+=10*n.deltaY;r()}),n.on(i.getEl("body"),"scroll",r)),r())}}});i(rt,[v,wi],function(n,t){return n.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var n=this,i=n._layout,t=n.settings.html;return n.preRender(),i.preRender(n),"undefined"==typeof t?t='<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+i.renderHtml(n)+"<\/div>":("function"==typeof t&&(t=t.call(n)),n._hasBody=!1),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(n._preBodyHtml||"")+t+"<\/div>"}})});i(bt,[f],function(n){function t(t,i,r){var v,h,u,f,o,s,c,l,a,e;return a=n.getViewPort(),h=n.getPos(i),u=h.x,f=h.y,t._fixed&&(u-=a.x,f-=a.y),v=t.getEl(),e=n.getSize(v),o=e.width,s=e.height,e=n.getSize(i),c=e.width,l=e.height,r=(r||"").split(""),"b"===r[0]&&(f+=l),"r"===r[1]&&(u+=c),"c"===r[0]&&(f+=Math.round(l/2)),"c"===r[1]&&(u+=Math.round(c/2)),"b"===r[3]&&(f-=s),"r"===r[4]&&(u-=o),"c"===r[3]&&(f-=Math.round(s/2)),"c"===r[4]&&(u-=Math.round(o/2)),{x:u,y:f,w:o,h:s}}return{testMoveRel:function(i,r){for(var u,f=n.getViewPort(),e=0;e<r.length;e++)if(u=t(this,i,r[e]),this._fixed){if(u.x>0&&u.x+u.w<f.w&&u.y>0&&u.y+u.h<f.h)return r[e]}else if(u.x>f.x&&u.x+u.w<f.w+f.x&&u.y>f.y&&u.y+u.h<f.h+f.y)return r[e];return r[0]},moveRel:function(n,i){"string"!=typeof i&&(i=this.testMoveRel(n,i));var r=t(this,n,i);return this.moveTo(r.x,r.y)},moveBy:function(n,t){var i=this,r=i.layoutRect();return i.moveTo(r.x+n,r.y+t),i},moveTo:function(t,i){function e(n,t,i){return 0>n?0:n+i>t?(n=t-i,0>n?0:n):n}var r=this,u,f;return r.settings.constrainToViewport&&(u=n.getViewPort(window),f=r.layoutRect(),t=e(t,u.w+u.x,f.w),i=e(i,u.h+u.y,f.h)),r._rendered?r.layoutRect({x:t,y:i}).repaint():(r.settings.x=t,r.settings.y=i),r.fire("move",{x:t,y:i}),r}}});i(bi,[f],function(n){return{resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(t,i){if(1>=t||1>=i){var r=n.getWindowSize();t=1>=t?t*r.w:t;i=1>=i?i*r.h:i}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:i,w:t,h:i}).reflow()},resizeBy:function(n,t){var i=this,r=i.layoutRect();return i.resizeTo(r.w+n,r.h+t)}}});i(d,[rt,bt,bi,f],function(n,t,i,r){function v(){function n(n,t){for(;n;){if(n==t)return!0;n=n.parent()}}o||(o=function(t){var f,i,r;if(2!=t.button)for(f=u.length;f--;)if(i=u[f],r=i.getParentCtrl(t.target),i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;t=i.fire("autohide",{target:t.target});t.isDefaultPrevented()||i.hide()}},r.on(document,"click",o))}function y(){s||(s=function(){for(var n=u.length;n--;)l(u[n])},r.on(window,"scroll",s))}function p(){h||(h=function(){e.hideAll()},r.on(window,"resize",h))}function l(n){function i(t,i){for(var r,f=0;f<u.length;f++)if(u[f]!=n)for(r=u[f].parent();r&&(r=r.parent());)r==n&&u[f].fixed(t).moveBy(0,i).repaint()}var t=r.getViewPort().y;n.settings.autofix&&(n._fixed?n._autoFixY>t&&(n.fixed(!1).layoutRect({y:n._autoFixY}).repaint(),i(!1,n._autoFixY-t)):(n._autoFixY=n.layoutRect().y,n._autoFixY<t&&(n.fixed(!0).layoutRect({y:0}).repaint(),i(!0,t-n._autoFixY))))}function a(n){for(var t=u.length;t--;)u[t]===n&&u.splice(t,1);for(t=f.length;t--;)f[t]===n&&f.splice(t,1)}var o,s,h,u=[],f=[],c,e=n.extend({Mixins:[t,i],init:function(n){function i(){var n,i=e.zIndex||65535,o,u;if(f.length)for(n=0;n<f.length;n++)f[n].modal&&(i++,o=f[n]),f[n].getEl().style.zIndex=i,f[n].zIndex=i,i++;u=document.getElementById(t.classPrefix+"modal-block");o?r.css(u,"z-index",o.zIndex-1):u&&(u.parentNode.removeChild(u),c=!1);e.currentZIndex=i}var t=this;t._super(n);t._eventsRoot=t;t.addClass("floatpanel");n.autohide&&(v(),p(),u.push(t));n.autofix&&(y(),t.on("move",function(){l(this)}));t.on("postrender show",function(n){if(n.control==t){var u,e=t.classPrefix;t.modal&&!c&&(u=r.createFragment('<div id="'+e+'modal-block" class="'+e+"reset "+e+'fade"><\/div>'),u=u.firstChild,t.getContainerElm().appendChild(u),setTimeout(function(){r.addClass(u,e+"in");r.addClass(t.getEl(),e+"in")},0),c=!0);f.push(t);i()}});t.on("close hide",function(n){if(n.control==t){for(var r=f.length;r--;)f[r]===t&&f.splice(r,1);i()}});t.on("show",function(){t.parents().each(function(n){if(n._fixed)return(t.fixed(!0),!1)})});n.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"><\/div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(n){var t=this,i;return t._fixed!=n&&(t._rendered&&(i=r.getViewPort(),n?t.layoutRect().y-=i.y:t.layoutRect().y+=i.y),t.toggleClass("fixed",n),t._fixed=n),t},show:function(){for(var t=this,i=t._super(),n=u.length;n--&&u[n]!==t;);return-1===n&&u.push(t),i},hide:function(){return a(this),this._super()},hideAll:function(){e.hideAll()},close:function(){var n=this;return n.fire("close"),n.remove()},remove:function(){a(this);this._super()},postRender:function(){var n=this;return n.settings.bodyRole&&this.getEl("body").setAttribute("role",n.settings.bodyRole),n._super()}});return e.hideAll=function(){for(var t,n=u.length;n--;)t=u[n],t&&t.settings.autohide&&(t.hide(),u.splice(n,1))},e});i(kt,[d,rt,f,k],function(n,t,i,r){return n.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(n){var i=this;i._super(n);i.isRtl()&&i.addClass("rtl");i.addClass("window");i._fixed=!0;n.buttons&&(i.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:n.buttons}),i.statusbar.addClass("foot"),i.statusbar.parent(i));i.on("click",function(n){-1!=n.target.className.indexOf(i.classPrefix+"close")&&i.close()});i.on("cancel",function(){i.close()});i.aria("describedby",i.describedBy||i._id+"-none");i.aria("label",n.title);i._fullscreen=!1},recalc:function(){var n=this,f=n.statusbar,t,r,u,e;n._fullscreen&&(n.layoutRect(i.getWindowSize()),n.layoutRect().contentH=n.layoutRect().innerH);n._super();t=n.layoutRect();n.settings.title&&!n._fullscreen&&(r=t.headerW,r>t.w&&(u=t.x-Math.max(0,r/2),n.layoutRect({w:r,x:u}),e=!0));f&&(f.layoutRect({w:n.layoutRect().innerW}).recalc(),r=f.layoutRect().minW+t.deltaW,r>t.w&&(u=t.x-Math.max(0,r-t.w),n.layoutRect({w:r,x:u}),e=!0));e&&n.recalc()},initLayoutRect:function(){var t=this,n=t._super(),r=0,e,u,f;return t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),u=i.getSize(e),n.headerW=u.width,n.headerH=u.height,r+=n.headerH),t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r,f=i.getWindowSize(),n.x=Math.max(0,f.w/2-n.w/2),n.y=Math.max(0,f.h/2-n.h/2),n},renderHtml:function(){var n=this,f=n._layout,t=n._id,r=n.classPrefix,i=n.settings,e="",o="",u=i.html;return n.preRender(),f.preRender(n),i.title&&(e='<div id="'+t+'-head" class="'+r+'window-head"><div id="'+t+'-title" class="'+r+'title">'+n.encode(i.title)+'<\/div><button type="button" class="'+r+'close" aria-hidden="true">×<\/button><div id="'+t+'-dragh" class="'+r+'dragh"><\/div><\/div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"><\/iframe>'),"undefined"==typeof u&&(u=f.renderHtml(n)),n.statusbar&&(o=n.statusbar.renderHtml()),'<div id="'+t+'" class="'+n.classes()+'" hidefocus="1"><div class="'+n.classPrefix+'reset" role="application">'+e+'<div id="'+t+'-body" class="'+n.classes("body")+'">'+u+"<\/div>"+o+"<\/div><\/div>"},fullscreen:function(n){var t=this,e=document.documentElement,o,u=t.classPrefix,r,f;return n!=t._fullscreen&&((i.on(window,"resize",function(){var r,n;t._fullscreen&&(o?t._timer||(t._timer=setTimeout(function(){var n=i.getWindowSize();t.moveTo(0,0).resizeTo(n.w,n.h);t._timer=0},50)):(r=(new Date).getTime(),n=i.getWindowSize(),t.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-r>50&&(o=!0)))}),r=t.layoutRect(),t._fullscreen=n,n)?(t._initial={x:r.x,y:r.y,w:r.w,h:r.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",r.deltaH-=r.headerH+2,i.addClass(e,u+"fullscreen"),i.addClass(document.body,u+"fullscreen"),t.addClass("fullscreen"),f=i.getWindowSize(),t.moveTo(0,0).resizeTo(f.w,f.h)):(t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",r.deltaH+=r.headerH,i.removeClass(e,u+"fullscreen"),i.removeClass(document.body,u+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h))),t.reflow()},postRender:function(){var n=this,t;setTimeout(function(){n.addClass("in")},0);n._super();n.statusbar&&n.statusbar.postRender();n.focus();this.dragHelper=new r(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(i){n.moveTo(t.x+i.deltaX,t.y+i.deltaY)}});n.on("submit",function(t){t.isDefaultPrevented()||n.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var n=this,t=n.classPrefix;n.dragHelper.destroy();n._super();n.statusbar&&this.statusbar.remove();n._fullscreen&&(i.removeClass(document.documentElement,t+"fullscreen"),i.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var n=this.getEl().getElementsByTagName("iframe")[0];return n?n.contentWindow:null}})});i(ki,[kt],function(n){var t=n.extend({init:function(n){n={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(n)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(i){var r,u=i.callback||function(){};switch(i.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(n){n.control.parents()[1].close();u(!0)}},{type:"button",text:"Cancel",onClick:function(n){n.control.parents()[1].close();u(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(n){n.control.parents()[1].close();u(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(n){n.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(n){n.control.parents()[1].close();u(!0)}}]}return new n({padding:20,x:i.x,y:i.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:i.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:i.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:i.onClose,onCancel:function(){u(!1)}}).renderTo(document.body).reflow()},alert:function(n,i){return"string"==typeof n&&(n={text:n}),n.callback=i,t.msgBox(n)},confirm:function(n,i){return"string"==typeof n&&(n={text:n}),n.callback=i,n.buttons=t.OK_CANCEL,t.msgBox(n)}}});return t});i(di,[kt,ki],function(n,t){return function(i){function f(){if(r.length)return r[r.length-1]}var u=this,r=[];u.windows=r;u.open=function(t,u){var f;return i.editorManager.activeEditor=i,t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){f.find("form")[0].submit()}},{text:"Cancel",onclick:function(){f.close()}}]),f=new n(t),r.push(f),f.on("close",function(){for(var n=r.length;n--;)r[n]===f&&r.splice(n,1);i.focus()}),t.data&&f.on("postRender",function(){this.find("*").each(function(n){var i=n.name();i in t.data&&n.value(t.data[i])})}),f.features=t||{},f.params=u||{},i.nodeChanged(),f.renderTo().reflow()};u.alert=function(n,r,u){t.alert(n,function(){r?r.call(u||this):i.focus()})};u.confirm=function(n,i,r){t.confirm(n,function(n){i.call(r||this,n)})};u.close=function(){f()&&f().close()};u.getParams=function(){return f()?f().params:null};u.setParams=function(n){f()&&(f().params=n)};u.getWindows=function(){return r}}});i(gi,[lt,c,p,h,u,r],function(n,t,i,r,u,f){return function(e){function c(n,t){try{e.getDoc().execCommand(n,!1,t)}catch(i){}}function v(){var n=e.getDoc().documentMode;return n?n:6}function h(n){return n.isDefaultPrevented()}function tt(){function t(n){var i=new u(function(){}),t,r;f.each(e.getBody().getElementsByTagName("*"),function(n){"SPAN"==n.tagName&&n.setAttribute("mce-data-marked",1);!n.hasAttribute("data-mce-style")&&n.hasAttribute("style")&&e.dom.setAttrib(n,"style",n.getAttribute("style"))});i.observe(e.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]});e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null);t=e.selection.getRng();r=t.startContainer.parentNode;f.each(i.takeRecords(),function(n){if(o.isChildOf(n.target,e.getBody())){if("style"==n.attributeName){var i=n.target.getAttribute("data-mce-style");i?n.target.setAttribute("style",i):n.target.removeAttribute("style")}f.each(n.addedNodes,function(n){if("SPAN"==n.nodeName&&!n.getAttribute("mce-data-marked")){var u,i;n==r&&(u=t.startOffset,i=n.firstChild);o.remove(n,!0);i&&(t.setStart(i,u),t.setEnd(i,u),e.selection.setRng(t))}})}});i.disconnect();f.each(e.dom.select("span[mce-data-marked]"),function(n){n.removeAttribute("mce-data-marked")})}var r=e.getDoc(),c="data:text/mce-internal,",u=window.MutationObserver,a,i;u||(a=!0,u=function(){function t(n){var t=n.relatedNode||n.target;i.push({target:t,addedNodes:[t]})}function r(n){var t=n.relatedNode||n.target;i.push({target:t,attributeName:n.attrName})}var i=[],n;this.observe=function(i){n=i;n.addEventListener("DOMSubtreeModified",t,!1);n.addEventListener("DOMNodeInsertedIntoDocument",t,!1);n.addEventListener("DOMNodeInserted",t,!1);n.addEventListener("DOMAttrModified",r,!1)};this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",t,!1);n.removeEventListener("DOMNodeInsertedIntoDocument",t,!1);n.removeEventListener("DOMNodeInserted",t,!1);n.removeEventListener("DOMAttrModified",r,!1)};this.takeRecords=function(){return i}});e.on("keydown",function(i){var r=i.keyCode==g,f=n.metaKeyPressed(i);if(!h(i)&&(r||i.keyCode==l)){var u=e.selection.getRng(),o=u.startContainer,s=u.startOffset;if(!f&&u.collapsed&&3==o.nodeType&&(r?s<o.data.length:s>0))return;i.preventDefault();f&&e.selection.getSel().modify("extend",r?"forward":"backward","word");t(r)}});e.on("keypress",function(i){h(i)||s.isCollapsed()||!i.charCode||n.metaKeyPressed(i)||(i.preventDefault(),t(!0),e.selection.setContent(String.fromCharCode(i.charCode)))});e.addCommand("Delete",function(){t()});e.addCommand("ForwardDelete",function(){t(!0)});a||(e.on("dragstart",function(n){var t;e.selection.isCollapsed()&&"IMG"==n.target.tagName&&s.select(n.target);i=s.getRng();t=e.selection.getContent();t.length>0&&n.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),e.on("drop",function(n){if(!h(n)){var u=n.dataTransfer.getData("URL");if(!u||-1==u.indexOf(c)||!r.caretRangeFromPoint)return;u=unescape(u.substr(c.length));r.caretRangeFromPoint&&(n.preventDefault(),window.setTimeout(function(){var f=r.caretRangeFromPoint(n.x,n.y);i&&(s.setRng(i),i=null);t();s.setRng(f);e.insertContent(u)},0))}}),e.on("cut",function(n){!h(n)&&n.clipboardData&&(n.preventDefault(),n.clipboardData.clearData(),n.clipboardData.setData("text/html",e.selection.getContent()),n.clipboardData.setData("text/plain",e.selection.getContent({format:"text"})),t(!0))}))}function it(){function n(n){var t=o.create("body"),i=n.cloneContents();return t.appendChild(i),s.serializer.serialize(t,{format:"html"})}function i(i){var r,f,u,s;return i.setStart?(f=n(i),u=o.createRng(),u.selectNode(e.getBody()),s=n(u),f===s):i.item?!1:(r=i.duplicate(),r.moveToElementText(e.getBody()),t.compareRanges(i,r))}e.on("keydown",function(n){var u=n.keyCode,r,t;if(!h(n)&&(u==g||u==l)){if(r=e.selection.isCollapsed(),t=e.getBody(),r&&!o.isEmpty(t))return;if(!r&&!i(e.selection.getRng()))return;n.preventDefault();e.setContent("");t.firstChild&&o.isBlock(t.firstChild)?e.selection.setCursorLocation(t.firstChild,0):e.selection.setCursorLocation(t,0);e.nodeChanged()}})}function b(){e.on("keydown",function(t){!h(t)&&65==t.keyCode&&n.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function rt(){e.settings.content_editable||(o.bind(e.getDoc(),"focusin",function(){s.setRng(s.getRng())}),o.bind(e.getDoc(),"mousedown",function(n){n.target==e.getDoc().documentElement&&(e.getBody().focus(),s.setRng(s.getRng()))}))}function k(){e.on("keydown",function(n){if(!h(n)&&n.keyCode===l){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng(!0).startOffset){var i=s.getNode(),t=i.previousSibling;if("HR"==i.nodeName)return o.remove(i),void n.preventDefault();t&&t.nodeName&&"hr"===t.nodeName.toLowerCase()&&(o.remove(t),n.preventDefault())}}})}function ut(){window.Range.prototype.getClientRects||e.on("mousedown",function(n){if(!h(n)&&"HTML"===n.target.nodeName){var t=e.getBody();t.blur();setTimeout(function(){t.focus()},0)}})}function ft(){e.on("click",function(n){n=n.target;/^(IMG|HR)$/.test(n.nodeName)&&s.getSel().setBaseAndExtent(n,0,n,1);"A"==n.nodeName&&o.hasClass(n,"mce-item-anchor")&&s.select(n)})}function et(){function n(){var n=o.getAttribs(s.getStart().cloneNode(!1));return function(){var t=s.getStart();t!==e.getBody()&&(o.setAttrib(t,"style",null),p(n,function(n){t.setAttributeNode(n.cloneNode(!0))}))}}function t(){return!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!=o.getParent(s.getEnd(),o.isBlock)}e.on("keypress",function(i){var r;if(!h(i)&&(8==i.keyCode||46==i.keyCode)&&t())return(r=n(),e.getDoc().execCommand("delete",!1,null),r(),i.preventDefault(),!1)});o.bind(e.getDoc(),"cut",function(i){var r;!h(i)&&t()&&(r=n(),setTimeout(function(){r()},0))})}function ot(){var i,n;e.on("selectionchange",function(){n&&(clearTimeout(n),n=0);n=window.setTimeout(function(){if(!e.removed){var n=s.getRng();i&&t.compareRanges(n,i)||(e.nodeChanged(),i=n)}},50)})}function st(){document.body.setAttribute("role","application")}function y(){e.on("keydown",function(n){if(!h(n)&&n.keyCode===l&&s.isCollapsed()&&0===s.getRng(!0).startOffset){var t=s.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return n.preventDefault(),!1}})}function ht(){v()>7||(c("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),o.addClass(e.getBody(),"mceHideBrInPre"),w.addNodeFilter("pre",function(n){for(var e=n.length,u,f,r,t;e--;)for(u=n[e].getAll("br"),f=u.length;f--;)r=u[f],t=r.prev,t&&3===t.type&&"\n"!=t.value.charAt(t.value-1)?t.value+="\n":r.parent.insert(new i("#text",3),r,!0).value="\n"}),nt.addNodeFilter("pre",function(n){for(var u=n.length,i,r,f,t;u--;)for(i=n[u].getAll("br"),r=i.length;r--;)f=i[r],t=f.prev,t&&3==t.type&&(t.value=t.value.replace(/\r?\n$/,""))}))}function ct(){o.bind(e.getBody(),"mouseup",function(){var t,n=s.getNode();"IMG"==n.nodeName&&((t=o.getStyle(n,"width"))&&(o.setAttrib(n,"width",t.replace(/[^0-9%]+/g,"")),o.setStyle(n,"width","")),(t=o.getStyle(n,"height"))&&(o.setAttrib(n,"height",t.replace(/[^0-9%]+/g,"")),o.setStyle(n,"height","")))})}function lt(){e.on("keydown",function(t){var r,u,f,c,i;if(!h(t)&&t.keyCode==n.BACKSPACE&&(r=s.getRng(),u=r.startContainer,f=r.startOffset,c=o.getRoot(),i=u,r.collapsed&&0===f)){for(;i&&i.parentNode&&i.parentNode.firstChild==i&&i.parentNode!=c;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(e.formatter.toggle("blockquote",null,i),r=o.createRng(),r.setStart(u,0),r.setEnd(u,0),s.setRng(r))}})}function at(){function n(){e._refreshContentEditable();c("StyleWithCSS",!1);c("enableInlineTableEditing",!1);a.object_resizing||c("enableObjectResizing",!1)}a.readonly||e.on("BeforeExecCommand MouseDown",n)}function vt(){function n(){p(o.select("a"),function(n){var t=n.parentNode,i=o.getRoot();if(t.lastChild===n){for(;t&&!o.isBlock(t);){if(t.parentNode.lastChild!==t||t===i)return;t=t.parentNode}o.add(t,"br",{"data-mce-bogus":1})}})}e.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&n()})}function yt(){a.forced_root_block&&e.on("init",function(){c("DefaultParagraphSeparator",a.forced_root_block)})}function pt(){e.on("Undo Redo SetContent",function(n){n.initial||e.execCommand("mceRepaint")})}function wt(){e.on("keydown",function(n){var t;h(n)||n.keyCode!=l||(t=e.getDoc().selection.createRange(),t&&t.item&&(n.preventDefault(),e.undoManager.beforeChange(),o.remove(t.item(0)),e.undoManager.add()))})}function bt(){var n;v()>=10&&(n="",p("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,i){n+=(i>0?",":"")+t+":empty"}),e.contentStyles.push(n+"{padding-right: 1px !important}"))}function kt(){v()<9&&(w.addNodeFilter("noscript",function(n){for(var r=n.length,t,i;r--;)t=n[r],i=t.firstChild,i&&t.attr("data-mce-innertext",i.value)}),nt.addNodeFilter("noscript",function(n){for(var f=n.length,u,t,e;f--;)u=n[f],t=n[f].firstChild,t?t.value=r.decode(t.value):(e=u.attributes.map["data-mce-innertext"],e&&(u.attr("data-mce-innertext",null),t=new i("#text",3),t.value=e,t.raw=!0,u.append(t)))}))}function dt(){function f(n,t){var i=s.createTextRange();try{i.moveToPoint(n,t)}catch(r){i=null}return i}function e(n){var r;n.button?(r=f(n.x,n.y),r&&(r.compareEndPoints("StartToStart",t)>0?r.setEndPoint("StartToStart",t):r.setEndPoint("EndToEnd",t),r.select())):i()}function i(){var u=n.selection.createRange();t&&!u.item&&0===u.compareEndPoints("StartToEnd",u)&&t.select();o.unbind(n,"mouseup",i);o.unbind(n,"mousemove",e);t=r=0}var n=o.doc,s=n.body,r,t,u;n.documentElement.unselectable=!0;o.bind(n,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(r&&i(),u=n.documentElement,u.scrollHeight>u.clientHeight)return;r=1;t=f(s.x,s.y);t&&(o.bind(n,"mouseup",i),o.bind(n,"mousemove",e),o.getRoot().focus(),t.select())}})}function gt(){e.on("keyup focusin mouseup",function(t){65==t.keyCode&&n.metaKeyPressed(t)||s.normalize()},!0)}function ni(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function ti(){e.inline||e.on("keydown",function(){document.activeElement==document.body&&e.getWin().focus()})}function d(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(n){"HTML"==n.target.nodeName&&(e.getBody().focus(),e.selection.normalize(),e.nodeChanged())}))}function ii(){u.mac&&e.on("keydown",function(t){n.metaKeyPressed(t)&&(37==t.keyCode||39==t.keyCode)&&(t.preventDefault(),e.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function ri(){c("AutoUrlDetect",!1)}function ui(){e.inline||e.on("focus blur beforegetcontent",function(){var n=e.dom.create("br");e.getBody().appendChild(n);n.parentNode.removeChild(n)},!0)}function fi(){e.on("click",function(n){var t=n.target;do if("A"===t.tagName)return void n.preventDefault();while(t=t.parentNode)});e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function ei(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(n){n.preventDefault()})})}function oi(){w.addNodeFilter("br",function(n){for(var t=n.length;t--;)"Apple-interchange-newline"==n[t].attr("class")&&n[t].remove()})}var p=f.each,l=n.BACKSPACE,g=n.DELETE,o=e.dom,s=e.selection,a=e.settings,w=e.parser,nt=e.serializer,si=u.gecko,hi=u.ie,ci=u.webkit;lt();it();gt();ci&&(tt(),rt(),ft(),yt(),ei(),y(),oi(),u.iOS?(ot(),ti(),d(),fi()):b());hi&&u.ie<11&&(k(),st(),ht(),ct(),wt(),bt(),kt(),dt());u.ie>=11&&(d(),ui(),y());u.ie&&(b(),ri());si&&(k(),ut(),et(),at(),vt(),pt(),ni(),ii(),y())}});i(dt,[yt],function(n){function t(t){return t._eventDispatcher||(t._eventDispatcher=new n({scope:t,toggleEvent:function(i,r){n.isNative(i)&&t.toggleNativeEvent&&t.toggleNativeEvent(i,r)}})),t._eventDispatcher}return{fire:function(n,i,r){var f=this,u;if(f.removed&&"remove"!==n)return i;if(i=t(f).fire(n,i,r),r!==!1&&f.parent)for(u=f.parent();u&&!i.isPropagationStopped();)u.fire(n,i,!1),u=u.parent();return i},on:function(n,i,r){return t(this).on(n,i,r)},off:function(n,i){return t(this).off(n,i)},once:function(n,i){return t(this).once(n,i)},hasEventListeners:function(n){return t(this).has(n)}}});i(nr,[dt,o,r],function(n,t,i){function u(n,t){return"selectionchange"==t?n.getDoc():!n.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?n.getDoc():n.getBody()}function f(n,t){var e=n.settings.event_root,i=n.editorManager,f=i.eventRootElm||u(n,t);if(e){if(i.rootEvents||(i.rootEvents={},i.on("RemoveEditor",function(){i.activeEditor||(r.unbind(f),delete i.rootEvents)})),i.rootEvents[t])return;f==n.getBody()&&(f=r.select(e)[0],i.eventRootElm=f);i.rootEvents[t]=!0;r.bind(f,t,function(n){for(var e,o=n.target,u=i.editors,f=u.length;f--;)e=u[f].getBody(),(e===o||r.isChildOf(o,e))&&(u[f].hidden||u[f].fire(t,n))})}else n.dom.bind(f,t,function(i){n.hidden||n.fire(t,i)})}var r=t.DOM,e={bindPendingEventDelegates:function(){var n=this;i.each(n._pendingNativeEvents,function(t){f(n,t)})},toggleNativeEvent:function(n,t){var i=this;i.settings.readonly||"focus"!=n&&"blur"!=n&&(t?i.initialized?f(i,n):i._pendingNativeEvents?i._pendingNativeEvents.push(n):i._pendingNativeEvents=[n]:i.initialized&&i.dom.unbind(u(i,n),n))}};return i.extend({},n,e)});i(tr,[r,u],function(n,t){var i=n.each,r=n.explode,u={f9:120,f10:121,f11:122};return function(f){var o=this,e={};f.on("keyup keypress keydown",function(n){(n.altKey||n.ctrlKey||n.metaKey)&&i(e,function(i){var r=t.mac?n.metaKey:n.ctrlKey;if(i.ctrl==r&&i.alt==n.altKey&&i.shift==n.shiftKey)return n.keyCode==i.keyCode||n.charCode&&n.charCode==i.charCode?(n.preventDefault(),"keydown"==n.type&&i.func.call(i.scope),!0):void 0})});o.add=function(t,o,s,h){var c;return c=s,"string"==typeof s?s=function(){f.execCommand(c,!1,null)}:n.isArray(c)&&(s=function(){f.execCommand(c[0],c[1],c[2])}),i(r(t.toLowerCase()),function(n){var t={func:s,scope:h||f,desc:f.translate(o),alt:!1,ctrl:!1,shift:!1};i(r(n,"+"),function(n){switch(n){case"alt":case"ctrl":case"shift":t[n]=!0;break;default:/^[0-9]{2,}$/.test(n)?t.keyCode=parseInt(n,10):(t.charCode=n.charCodeAt(0),t.keyCode=u[n]||n.toUpperCase().charCodeAt(0))}});e[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}});i(ir,[o,g,st,dr,p,ei,tt,hi,ci,li,ai,vi,yi,vt,nt,y,di,l,ct,gi,u,r,nr,tr],function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){function at(n,t,u){var f=this,e,o;e=f.documentBaseUrl=u.documentBaseURL;o=u.baseURI;f.settings=t=lt({id:n,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},t);r.language=t.language||"en";r.languageLoad=t.language_load;r.baseURL=u.baseURL;f.id=t.id=n;f.isNotDirty=!0;f.plugins={};f.documentBaseURI=new y(t.document_base_url||e,{base_uri:o});f.baseURI=o;f.contentCSS=[];f.contentStyles=[];f.shortcuts=new rt(f);f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.loadedCSS={};f.suffix=u.suffix;f.editorManager=u;f.inline=t.inline;u.fire("SetupEditor",f);f.execCallback("setup",f);f.$=i.overrideDefaults(function(){return{context:f.inline?f.getBody():f.getDoc(),element:f.getBody()}})}var ut=n.DOM,ct=r.ThemeManager,et=r.PluginManager,lt=tt.extend,ft=tt.each,pt=tt.explode,wt=tt.inArray,ht=tt.trim,yt=tt.resolve,ot=w.Event,vt=nt.gecko,st=nt.ie;return at.prototype={render:function(){function f(){ut.unbind(window,"ready",f);n.render()}function e(){var r=p.ScriptLoader,i;(t.language&&"en"!=t.language&&!t.language_url&&(t.language_url=n.editorManager.baseURL+"/langs/"+t.language+".js"),t.language_url&&r.add(t.language_url),t.theme&&"function"!=typeof t.theme&&"-"!=t.theme.charAt(0)&&!ct.urls[t.theme])&&(i=t.theme_url,i=i?n.documentBaseURI.toAbsolute(i):"themes/"+t.theme+"/theme"+u+".js",ct.load(t.theme,i));tt.isArray(t.plugins)&&(t.plugins=t.plugins.join(" "));ft(t.external_plugins,function(n,i){et.load(i,n);t.plugins+=" "+i});ft(t.plugins.split(/[ ,]/),function(n){if(n=ht(n),n&&!et.urls[n])if("-"==n.charAt(0)){n=n.substr(1,n.length);var t=et.dependencies(n);ft(t,function(n){var t={prefix:"plugins/",resource:n,suffix:"/plugin"+u+".js"};n=et.createUrl(t,n);et.load(n.resource,n)})}else et.load(n,{prefix:"plugins/",resource:n,suffix:"/plugin"+u+".js"})});r.loadQueue(function(){n.removed||n.init()})}var n=this,t=n.settings,r=n.id,u=n.suffix,i;if(!ot.domLoaded)return void ut.bind(window,"ready",f);n.getElement()&&nt.contentEditable&&(t.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden"),i=n.getElement().form||ut.getParent(r,"form"),i&&(n.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(ut.insertAfter(ut.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(t){n.fire(t.type,t)},ut.bind(i,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,i._mceOldSubmit(i)})),n.windowManager=new b(n),"xml"==t.encoding&&n.on("GetContent",function(n){n.save&&(n.content=ut.encode(n.content))}),t.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),t.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),e())},init:function(){function p(t){var u=et.get(t),r,i;r=et.urls[t]||n.documentBaseUrl.replace(/\/$/,"");t=ht(t);u&&-1===wt(b,t)&&(ft(et.dependencies(t),function(n){p(n)}),i=new u(n,r,n.$),n.plugins[t]=i,i.init&&(i.init(n,r),b.push(t)))}var n=this,t=n.settings,u=n.getElement(),o,r,s,h,i,w,c,f,e,a,l,b=[],v,y;if(n.rtl=this.editorManager.i18n.rtl,n.editorManager.add(n),t.aria_label=t.aria_label||ut.getAttrib(u,"aria-label",n.getLang("aria.rich_text_area")),t.theme&&("function"!=typeof t.theme?(t.theme=t.theme.replace(/-/,""),w=ct.get(t.theme),n.theme=new w(n,ct.urls[t.theme]),n.theme.init&&n.theme.init(n,ct.urls[t.theme]||n.documentBaseUrl.replace(/\/$/,""),n.$)):n.theme=t.theme),ft(t.plugins.replace(/\-/g,"").split(/[ ,]/),p),t.render_ui&&n.theme&&(n.orgDisplay=u.style.display,"function"!=typeof t.theme?(o=t.width||u.style.width||u.offsetWidth,r=t.height||u.style.height||u.offsetHeight,s=t.min_height||100,a=/^[0-9\.]+(|px)$/i,a.test(""+o)&&(o=Math.max(parseInt(o,10),100)),a.test(""+r)&&(r=Math.max(parseInt(r,10),s)),i=n.theme.renderUI({targetNode:u,width:o,height:r,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),t.content_editable||(r=(i.iframeHeight||r)+("number"==typeof r?i.deltaHeight||0:""),s>r&&(r=s))):(i=t.theme(n,u),i.editorContainer.nodeType&&(i.editorContainer=i.editorContainer.id=i.editorContainer.id||n.id+"_parent"),i.iframeContainer.nodeType&&(i.iframeContainer=i.iframeContainer.id=i.iframeContainer.id||n.id+"_iframecontainer"),r=i.iframeHeight||u.offsetHeight),n.editorContainer=i.editorContainer),t.content_css&&ft(pt(t.content_css),function(t){n.contentCSS.push(n.documentBaseURI.toAbsolute(t))}),t.content_style&&n.contentStyles.push(t.content_style),t.content_editable)return u=h=i=null,n.initContentBody();for(n.iframeHTML=t.doctype+"<html><head>",t.document_base_url!=n.documentBaseUrl&&(n.iframeHTML+='<base href="'+n.documentBaseURI.getURI()+'" />'),!nt.caretAfter&&t.ie7_compat&&(n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),n.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',l=0;l<n.contentCSS.length;l++)v=n.contentCSS[l],n.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+v+'" />',n.loadedCSS[v]=!0;if(f=t.body_id||"tinymce",-1!=f.indexOf("=")&&(f=n.getParam("body_id","","hash"),f=f[n.id]||f),e=t.body_class||"",-1!=e.indexOf("=")&&(e=n.getParam("body_class","","hash"),e=e[n.id]||""),n.iframeHTML+='<\/head><body id="'+f+'" class="mce-content-body '+e+'" onload="window.parent.tinymce.get(\''+n.id+"').fire('load');\"><br><\/body><\/html>",y='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()',document.domain!=location.hostname&&(c=y),h=ut.add(i.iframeContainer,"iframe",{id:n.id+"_ifr",src:c||'javascript:""',frameBorder:"0",allowTransparency:"true",title:n.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:r,display:"block"}}),st)try{n.getDoc()}catch(k){h.src=c=y}n.contentAreaContainer=i.iframeContainer;i.editorContainer&&(ut.get(i.editorContainer).style.display=n.orgDisplay);ut.get(n.id).style.display="none";ut.setAttrib(n.id,"aria-hidden",!0);c||n.initContentBody();u=h=i=null},initContentBody:function(t){var i=this,r=i.settings,p=ut.get(i.id),y=i.getDoc(),o,w;r.inline||(i.getElement().style.visibility=i.orgVisibility);t||r.content_editable||(y.open(),y.write(i.iframeHTML),y.close());r.content_editable&&(i.on("remove",function(){var n=this.getBody();ut.removeClass(n,"mce-content-body");ut.removeClass(n,"mce-edit-focus");ut.setAttrib(n,"contentEditable",null)}),ut.addClass(p,"mce-content-body"),i.contentDocument=y=r.content_document||document,i.contentWindow=r.content_window||window,i.bodyElement=p,r.content_document=r.content_window=null,r.root_name=p.nodeName.toLowerCase());o=i.getBody();o.disabled=!0;r.readonly||(i.inline&&"static"==ut.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=i.getParam("content_editable_state",!0));o.disabled=!1;i.schema=new k(r);i.dom=new n(y,{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:r.content_editable?i.id:null,collect:r.content_editable,schema:i.schema,onSetAttrib:function(n){i.fire("SetAttrib",n)}});i.parser=new d(r,i.schema);i.parser.addAttributeFilter("src,href,style,tabindex",function(n,t){for(var e=n.length,r,o=i.dom,u,f;e--;)r=n[e],u=r.attr(t),f="data-mce-"+t,r.attributes.map[f]||("style"===t?(u=o.serializeStyle(o.parseStyle(u),r.name),u.length||(u=null),r.attr(f,u),r.attr(t,u)):"tabindex"===t?(r.attr(f,u),r.attr(t,null)):r.attr(f,i.convertURL(u,t,r.name)))});i.parser.addNodeFilter("script",function(n){for(var i=n.length,t;i--;)t=n[i],t.attr("type","mce-"+(t.attr("type")||"no/type"))});i.parser.addNodeFilter("#cdata",function(n){for(var i=n.length,t;i--;)t=n[i],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"});i.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(n){for(var r=n.length,t,u=i.schema.getNonEmptyElements();r--;)t=n[r],t.isEmpty(u)&&(t.append(new f("br",1)).shortEnded=!0)});i.serializer=new e(r,i);i.selection=new s(i.dom,i.getWin(),i.serializer,i);i.formatter=new h(i);i.undoManager=new c(i);i.forceBlocks=new a(i);i.enterKey=new l(i);i.editorCommands=new v(i);i._nodeChangeDispatcher=new u(i);i.fire("PreInit");r.browser_spellcheck||r.gecko_spellcheck||(y.body.spellcheck=!1,ut.setAttrib(o,"spellcheck","false"));i.fire("PostRender");i.quirks=new g(i);r.directionality&&(o.dir=r.directionality);r.nowrap&&(o.style.whiteSpace="nowrap");r.protect&&i.on("BeforeSetContent",function(n){ft(r.protect,function(t){n.content=n.content.replace(t,function(n){return"<!--mce:protected "+escape(n)+"-->"})})});i.on("SetContent",function(){i.addVisual(i.getBody())});r.padd_empty_editor&&i.on("PostProcess",function(n){n.content=n.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});i.load({initial:!0,format:"html"});i.startContent=i.getContent({format:"raw"});i.initialized=!0;i.bindPendingEventDelegates();i.fire("init");i.focus(!0);i.nodeChanged({initial:!0});i.execCallback("init_instance_callback",i);i.contentStyles.length>0&&(w="",ft(i.contentStyles,function(n){w+=n+"\r\n"}),i.dom.addStyle(w));ft(i.contentCSS,function(n){i.loadedCSS[n]||(i.dom.loadCSS(n),i.loadedCSS[n]=!0)});r.auto_focus&&setTimeout(function(){var n=i.editorManager.get(r.auto_focus);n.selection.select(n.getBody(),1);n.selection.collapse(1);n.getBody().focus();n.getWin().focus()},100);p=y=o=null},focus:function(n){var f,t=this,o=t.selection,e=t.settings.content_editable,i,u,s=t.getDoc(),r;if(!n){if(i=o.getRng(),i.item&&(u=i.item(0)),t._refreshContentEditable(),e||(nt.opera||t.getBody().focus(),t.getWin().focus()),vt||e){if(r=t.getBody(),r.setActive)try{r.setActive()}catch(h){r.focus()}else r.focus();e&&o.normalize()}u&&u.ownerDocument==s&&(i=s.body.createControlRange(),i.addElement(u),i.select())}t.editorManager.activeEditor!=t&&((f=t.editorManager.activeEditor)&&f.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:f}));t.editorManager.activeEditor=t},execCallback:function(n){var r=this,i=r.settings[n],t;if(i)return r.callbackLookup&&(t=r.callbackLookup[n])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?yt(t):0,i=yt(i),r.callbackLookup=r.callbackLookup||{},r.callbackLookup[n]={func:i,scope:t}),i.apply(t||r,Array.prototype.slice.call(arguments,1))},translate:function(n){var t=this.settings.language||"en",i=this.editorManager.i18n;return n?i.data[t+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(n,r){return i.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(n,i){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+n]||(i!==t?i:"{#"+n+"}")},getParam:function(n,t,i){var r=n in this.settings?this.settings[n]:t,u;return"hash"===i?(u={},"string"==typeof r?ft(r.split(r.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(n){n=n.split("=");u[ht(n[0])]=ht(n.length>1?n[1]:n)}):u=r,u):r},nodeChanged:function(n){this._nodeChangeDispatcher.nodeChanged(n)},addButton:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});t.text||t.icon||(t.icon=n);i.buttons=i.buttons||{};t.tooltip=t.tooltip||t.title;i.buttons[n]=t},addMenuItem:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});i.menuItems=i.menuItems||{};i.menuItems[n]=t},addCommand:function(n,t,i){this.execCommands[n]={func:t,scope:i||this}},addQueryStateHandler:function(n,t,i){this.queryStateCommands[n]={func:t,scope:i||this}},addQueryValueHandler:function(n,t,i){this.queryValueCommands[n]={func:t,scope:i||this}},addShortcut:function(n,t,i,r){this.shortcuts.add(n,t,i,r)},execCommand:function(n,t,i,r){var u=this,f=0,e;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)||r&&r.skip_focus||u.focus(),r=lt({},r),r=u.fire("BeforeExecCommand",{command:n,ui:t,value:i}),r.isDefaultPrevented())return!1;if((e=u.execCommands[n])&&e.func.call(e.scope,t,i)!==!0)return u.fire("ExecCommand",{command:n,ui:t,value:i}),!0;if(ft(u.plugins,function(r){if(r.execCommand&&r.execCommand(n,t,i))return(u.fire("ExecCommand",{command:n,ui:t,value:i}),f=!0,!1)}),f)return f;if(u.theme&&u.theme.execCommand&&u.theme.execCommand(n,t,i))return u.fire("ExecCommand",{command:n,ui:t,value:i}),!0;if(u.editorCommands.execCommand(n,t,i))return u.fire("ExecCommand",{command:n,ui:t,value:i}),!0;try{f=u.getDoc().execCommand(n,t,i)}catch(o){}return f?(u.fire("ExecCommand",{command:n,ui:t,value:i}),!0):!1},queryCommandState:function(n){var i=this,r,t;if(!i._isHidden()){if((r=i.queryStateCommands[n])&&(t=r.func.call(r.scope),t===!0||t===!1)||(t=i.editorCommands.queryCommandState(n),-1!==t))return t;try{return i.getDoc().queryCommandState(n)}catch(u){}}},queryCommandValue:function(n){var r=this,u,i;if(!r._isHidden()){if((u=r.queryValueCommands[n])&&(i=u.func.call(u.scope),i!==!0)||(i=r.editorCommands.queryCommandValue(n),i!==t))return i;try{return r.getDoc().queryCommandValue(n)}catch(f){}}},show:function(){var n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable=!0:(ut.show(n.getContainer()),ut.hide(n.id)),n.load(),n.fire("show"))},hide:function(){var n=this,t=n.getDoc();n.hidden||(st&&t&&!n.inline&&t.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable=!1,n==n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ut.hide(n.getContainer()),ut.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(n,t){this.fire("ProgressState",{state:n,time:t})},load:function(n){var r=this,i=r.getElement(),u;if(i)return(n=n||{},n.load=!0,u=r.setContent(i.value!==t?i.value:i.innerHTML,n),n.element=i,n.no_events||r.fire("LoadContent",n),n.element=i=null,u)},save:function(n){var t=this,i=t.getElement(),r,u;if(i&&t.initialized)return n=n||{},n.save=!0,n.element=i,r=n.content=t.getContent(n),n.no_events||t.fire("SaveContent",n),r=n.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=r:(t.inline||(i.innerHTML=r),(u=ut.getParent(t.id,"form"))&&ft(u.elements,function(n){if(n.name==t.id)return(n.value=r,!1)})),n.element=i=null,n.set_dirty!==!1&&(t.isNotDirty=!0),r},setContent:function(n,t){var i=this,u=i.getBody(),r;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=n,t.no_events||i.fire("BeforeSetContent",t),n=t.content,0===n.length||/^\s+$/.test(n)?(r=i.settings.forced_root_block,r&&i.schema.isValidChild(u.nodeName.toLowerCase(),r.toLowerCase())?(n=st&&11>st?"":'<br data-mce-bogus="1">',n=i.dom.createHTML(r,i.settings.forced_root_block_attrs,n)):st||(n='<br data-mce-bogus="1">'),i.dom.setHTML(u,n),i.fire("SetContent",t)):("raw"!==t.format&&(n=new o({},i.schema).serialize(i.parser.parse(n,{isRootContent:!0}))),t.content=ht(n),i.dom.setHTML(u,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(n){var t=this,r,i=t.getBody();return n=n||{},n.format=n.format||"html",n.get=!0,n.getInner=!0,n.no_events||t.fire("BeforeGetContent",n),r="raw"==n.format?i.innerHTML:"text"==n.format?i.innerText||i.textContent:t.serializer.serialize(i,n),n.content="text"!=n.format?ht(r):r,n.no_events||t.fire("GetContent",n),n.content},insertContent:function(n,t){t&&(n=lt({content:n},t));this.execCommand("mceInsertContent",!1,n)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var n=this;return n.container||(n.container=ut.get(n.editorContainer||n.id+"_parent")),n.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return ut.get(this.settings.content_element||this.id)},getWin:function(){var n=this,t;return n.contentWindow||(t=ut.get(n.id+"_ifr"),t&&(n.contentWindow=t.contentWindow)),n.contentWindow},getDoc:function(){var n=this,t;return n.contentDocument||(t=n.getWin(),t&&(n.contentDocument=t.document)),n.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(n,t,i){var r=this,u=r.settings;return u.urlconverter_callback?r.execCallback("urlconverter_callback",n,i,!0,t):!u.convert_urls||i&&"LINK"==i.nodeName||0===n.indexOf("file:")||0===n.length?n:u.relative_urls?r.documentBaseURI.toRelative(n):n=r.documentBaseURI.toAbsolute(n,u.remove_script_host)},addVisual:function(n){var i=this,f=i.settings,r=i.dom,u;n=n||i.getBody();i.hasVisual===t&&(i.hasVisual=f.visual);ft(r.select("table,a",n),function(n){var t;switch(n.nodeName){case"TABLE":return u=f.visual_table_class||"mce-item-table",t=r.getAttrib(n,"border"),void(t&&"0"!=t||!i.hasVisual?r.removeClass(n,u):r.addClass(n,u));case"A":return void(r.getAttrib(n,"href",!1)||(t=r.getAttrib(n,"name")||n.id,u=f.visual_anchor_class||"mce-item-anchor",t&&i.hasVisual?r.addClass(n,u):r.removeClass(n,u)))}});i.fire("VisualAid",{element:n,hasVisual:i.hasVisual})},remove:function(){var n=this,t;n.removed||(n.save(),n.removed=1,n.hasHiddenInput&&ut.remove(n.getElement().nextSibling),n.inline||(st&&10>st&&n.getDoc().execCommand("SelectAll",!1,null),ut.setStyle(n.id,"display",n.orgDisplay),n.getBody().onload=null,ot.unbind(n.getWin()),ot.unbind(n.getDoc())),t=n.getContainer(),ot.unbind(n.getBody()),ot.unbind(t),n.fire("remove"),n.editorManager.remove(n),ut.remove(t),n.destroy())},destroy:function(n){var t=this,i;if(!t.destroyed){if(!n&&!t.removed)return void t.remove();n&&vt&&(ot.unbind(t.getDoc()),ot.unbind(t.getWin()),ot.unbind(t.getBody()));n||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy());i=t.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),ut.unbind(i,"submit reset",t.formEventDelegate));t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null;t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null;t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null);t.destroyed=1}},_refreshContentEditable:function(){var i=this,n,t;i._isHidden()&&(n=i.getBody(),t=n.parentNode,t.removeChild(n),t.appendChild(n),n.focus())},_isHidden:function(){var n;return vt?(n=this.selection.getSel(),!n||!n.rangeCount||0===n.rangeCount):0}},lt(at.prototype,it),at});i(rr,[],function(){var n={};return{rtl:!1,add:function(t,i){for(var r in i)n[r]=i[r];this.rtl=this.rtl||"rtl"===n._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var i=t.slice(1);t=(n[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(n,t){return i[t]})}return n[t]||t},data:n}});i(ur,[o,u],function(n,t){function e(n){function o(){try{return document.activeElement}catch(n){return document.body}}function h(n,t){return t&&t.startContainer?!n.isChildOf(t.startContainer,n.getRoot())||!n.isChildOf(t.endContainer,n.getRoot())?void 0:{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}:t}function c(n,t){var i;return t.startContainer?(i=n.getDoc().createRange(),i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset)):i=t,i}function s(n){return!!i.getParent(n,e.isEditorUIElement)}function l(e){var l=e.editor;l.on("init",function(){(l.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?l.dom.bind(l.getBody(),"beforedeactivate",function(){try{l.lastRng=l.selection.getRng()}catch(n){}}):l.on("nodechange mouseup keyup",function(n){var t=o();"nodechange"==n.type&&n.selectionChange||(t&&t.id==l.id+"_ifr"&&(t=l.getBody()),l.dom.isChildOf(t,l.getBody())&&(l.lastRng=l.selection.getRng()))}),t.webkit&&!r&&(r=function(){var i=n.activeEditor,t;i&&i.selection&&(t=i.selection.getRng(),t&&!t.collapsed&&(l.lastRng=t))},i.bind(document,"selectionchange",r)))});l.on("setcontent",function(){l.lastRng=null});l.on("mousedown",function(){l.selection.lastFocusBookmark=null});l.on("focusin",function(){var t=n.focusedEditor;l.selection.lastFocusBookmark&&(l.selection.setRng(c(l,l.selection.lastFocusBookmark)),l.selection.lastFocusBookmark=null);t!=l&&(t&&t.fire("blur",{focusedEditor:l}),n.activeEditor=l,n.focusedEditor=l,l.fire("focus",{blurredEditor:t}),l.focus(!0));l.lastRng=null});l.on("focusout",function(){window.setTimeout(function(){var t=n.focusedEditor;s(o())||t!=l||(l.fire("blur",{focusedEditor:null}),n.focusedEditor=null,l.selection&&(l.selection.lastFocusBookmark=null))},0)});u||(u=function(t){var i=n.activeEditor;i&&t.target.ownerDocument==document&&(i.selection&&t.target!=i.getBody()&&(i.selection.lastFocusBookmark=h(i.dom,i.lastRng)),s(t.target)||n.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),n.focusedEditor=null))},i.bind(document,"focusin",u));l.inline&&!f&&(f=function(t){var i=n.activeEditor,r;i.inline&&!i.dom.isChildOf(t.target,i.getBody())&&(r=i.selection.getRng(),r.collapsed||(i.lastRng=r))},i.bind(document,"mouseup",f))}function a(t){n.focusedEditor==t.editor&&(n.focusedEditor=null);n.activeEditor||(i.unbind(document,"selectionchange",r),i.unbind(document,"focusin",u),i.unbind(document,"mouseup",f),r=u=f=null)}n.on("AddEditor",l);n.on("RemoveEditor",a)}var r,u,f,i=n.DOM;return e.isEditorUIElement=function(n){return-1!==n.className.toString().indexOf("mce-")},e});i(ut,[ir,g,o,vt,u,r,dt,rr,ur],function(n,t,i,r,u,f,e,o,s){function v(n){var t=l.editors,r,i;for(delete t[n.id],i=0;i<t.length;i++)if(t[i]==n){t.splice(i,1);r=!0;break}return l.activeEditor==n&&(l.activeEditor=t[0]),l.focusedEditor==n&&(l.focusedEditor=null),r}function p(n){return n&&!(n.getContainer()||n.getBody()).parentNode&&(v(n),n.destroy(!0),n=null),n}var h=i.DOM,w=f.explode,c=f.each,y=f.extend,b=0,a,l;return l={$:t,majorVersion:"4",minorVersion:"1.1",releaseDate:"2014-07-08",editors:[],i18n:o,activeEditor:null,setup:function(){var i=this,u,t,f="",e,n,h,o;if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),e=window.tinymce||window.tinyMCEPreInit)u=e.base||e.baseURL,f=e.suffix;else{for(h=document.getElementsByTagName("script"),o=0;o<h.length;o++)if(n=h[o].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n)){-1!=n.indexOf(".min")&&(f=".min");u=n.substring(0,n.lastIndexOf("/"));break}!u&&document.currentScript&&(n=document.currentScript.src,-1!=n.indexOf(".min")&&(f=".min"),u=n.substring(0,n.lastIndexOf("/")))}i.baseURL=new r(t).toAbsolute(u);i.documentBaseURL=t;i.baseURI=new r(i.baseURL);i.suffix=f;i.focusManager=new s(i)},init:function(t){function u(n){var t=n.id;return t||(t=n.name,t=t&&!h.get(t)?n.name:h.uniqueId(),n.setAttribute("id",t)),t}function i(t,i){if(!p(r.get(t))){var u=new n(t,i,r);e.push(u);u.render()}}function f(n,t,i){var r=n[t];if(r)return r.apply(i||this,Array.prototype.slice.call(arguments,2))}function s(n,t){return t.constructor===RegExp?t.test(n.className):h.hasClass(n,t)}function l(){var a,v;if(h.unbind(window,"ready",l),f(t,"onpageload"),t.types)return void c(t.types,function(n){c(h.select(n.selector),function(r){i(u(r),y({},t,n))})});if(t.selector)return void c(h.select(t.selector),function(n){i(u(n),t)});switch(t.mode){case"exact":a=t.elements||"";a.length>0&&c(w(a),function(u){h.get(u)?(o=new n(u,t,r),e.push(o),o.render()):c(document.forms,function(n){c(n.elements,function(n){n.name===u&&(u="mce_editor_"+b++,h.setAttrib(n,"id",u),i(u,t))})})});break;case"textareas":case"specific_textareas":c(h.select("textarea"),function(n){t.editor_deselector&&s(n,t.editor_deselector)||(!t.editor_selector||s(n,t.editor_selector))&&i(u(n),t)})}t.oninit&&(a=v=0,c(e,function(n){v++;n.initialized?a++:n.on("init",function(){a++;a==v&&f(t,"oninit")});a==v&&f(t,"oninit")}))}var r=this,e=[],o;r.settings=t;h.bind(window,"ready",l)},get:function(n){return arguments.length?n in this.editors?this.editors[n]:null:this.editors},add:function(n){var t=this,i=t.editors;return i[n.id]=n,i.push(n),t.activeEditor=n,t.fire("AddEditor",{editor:n}),a||(a=function(){t.fire("BeforeUnload")},h.bind(window,"beforeunload",a)),n},createEditor:function(t,i){return this.add(new n(t,i,this))},remove:function(n){var r=this,u,i=r.editors,t;if(n)return"string"==typeof n?(n=n.selector||n,void c(h.select(n),function(n){r.remove(i[n.id])})):(t=n,i[t.id]?(v(t)&&r.fire("RemoveEditor",{editor:t}),i.length||h.unbind(window,"beforeunload",a),t.remove(),t):null);for(u=i.length-1;u>=0;u--)r.remove(i[u])},execCommand:function(t,i,r){var u=this,f=u.get(r);switch(t){case"mceAddEditor":return u.get(r)||new n(r,u.settings,u).render(),!0;case"mceRemoveEditor":return f&&f.remove(),!0;case"mceToggleEditor":return f?(f.isHidden()?f.show():f.hide(),!0):(u.execCommand("mceAddEditor",0,r),!0)}return u.activeEditor?u.activeEditor.execCommand(t,i,r):!1},triggerSave:function(){c(this.editors,function(n){n.save()})},addI18n:function(n,t){o.add(n,t)},translate:function(n){return o.translate(n)}},y(l,e),l.setup(),window.tinymce=window.tinyMCE=l,l});i(nu,[ut,r],function(n,t){var i=t.each,r=t.explode;n.on("AddEditor",function(n){var t=n.editor;t.on("preInit",function(){function u(t,r){i(r,function(i,r){i&&n.setStyle(t,r,i)});n.rename(t,"span")}function s(r){n=t.dom;f.convert_fonts_to_spans&&i(n.select("font,u,strike",r.node),function(t){e[t.nodeName.toLowerCase()](n,t)})}var e,o,n,f=t.settings;f.inline_styles&&(o=r(f.font_size_legacy_values),e={font:function(n,t){u(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(n,t){u(t,{textDecoration:"underline"})},strike:function(n,t){u(t,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",s))})})});i(fr,[],function(){return{send:function(n){function i(){!n.async||4==t.readyState||r++>1e4?(n.success&&1e4>r&&200==t.status?n.success.call(n.success_scope,""+t.responseText,t,n):n.error&&n.error.call(n.error_scope,r>1e4?"TIMED_OUT":"GENERAL",t,n),t=null):setTimeout(i,10)}var t,r=0;if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=n.async===!1?!1:!0,n.data=n.data||"",t=new XMLHttpRequest){if(t.overrideMimeType&&t.overrideMimeType(n.content_type),t.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(t.withCredentials=!0),n.content_type&&t.setRequestHeader("Content-Type",n.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(n.data),!n.async)return i();setTimeout(i,10)}}}});i(er,[],function(){function n(t,i){var u,r,e,f;if(i=i||'"',null===t)return"null";if(e=typeof t,"string"==e)return r="\bb\tt\nn\ff\rr\"\"''\\\\",i+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(n,t){return'"'===i&&"'"===n?n:(u=r.indexOf(t),u+1?"\\"+r.charAt(u+1):(n=t.charCodeAt().toString(16),"\\u"+"0000".substring(n.length)+n))})+i;if("object"==e){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(u=0,r="[";u<t.length;u++)r+=(u>0?",":"")+n(t[u],i);return r+"]"}r="{";for(f in t)t.hasOwnProperty(f)&&(r+="function"!=typeof t[f]?(r.length>1?","+i:i)+f+i+":"+n(t[f],i):"");return r+"}"}return""+t}return{serialize:n,parse:function(n){try{return window[String.fromCharCode(101)+"val"]("("+n+")")}catch(t){}}}});i(tu,[er,fr,r],function(n,t,i){function r(n){this.settings=u({},n);this.count=0}var u=i.extend;return r.sendRPC=function(n){return(new r).send(n)},r.prototype={send:function(i){var r=i.error,f=i.success;i=u(this.settings,i);i.success=function(t,u){t=n.parse(t);"undefined"==typeof t&&(t={error:"JSON Parse error."});t.error?r.call(i.error_scope||i.scope,t.error,u):f.call(i.success_scope||i.scope,t.result)};i.error=function(n,t){r&&r.call(i.error_scope||i.scope,n,t)};i.data=n.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params});i.content_type="application/json";t.send(i)}},r});i(iu,[o],function(n){return{callbacks:{},count:0,send:function(i){var r=this,u=n.DOM,f=i.count!==t?i.count:r.count,e="tinymce_jsonp_"+f;r.callbacks[f]=function(n){u.remove(e);delete r.callbacks[f];i.callback(n)};u.add(u.doc.body,"script",{id:e,src:i.url,type:"text/javascript"});r.count++}}});i(ru,[],function(){function s(){u=[];for(var t in n)u.push(t);o.length=u.length}function h(){function o(n){var r,i;return i=n!==t?c+n:h.indexOf(",",c),-1===i||i>h.length?null:(r=h.substring(c,i),c=i+1,r)}var e,h,l,c=0,u;if(n={},f){i.load(r);h=i.getAttribute(r)||"";do{if(u=o(),null===u)break;if(e=o(parseInt(u,32)||0),null!==e){if(u=o(),null===u)break;l=o(parseInt(u,32)||0);e&&(n[e]=l)}}while(null!==e);s()}}function e(){var u,e="",t;if(f){for(t in n)u=n[t],e+=(e?",":"")+t.length.toString(32)+","+t+","+u.length.toString(32)+","+u;i.setAttribute(r,e);try{i.save(r)}catch(o){}s()}}var o,i,n,u,r,f;try{if(window.localStorage)return localStorage}catch(c){}return r="tinymce",i=document.documentElement,f=!!i.addBehavior,f&&i.addBehavior("#default#userData"),o={key:function(n){return u[n]},getItem:function(t){return t in n?n[t]:null},setItem:function(t,i){n[t]=""+i;e()},removeItem:function(t){delete n[t];e()},clear:function(){n={};e()}},h(),o});i(uu,[o,y,nt,st,r,u],function(n,t,i,r,u,f){var e=window.tinymce;return e.DOM=n.DOM,e.ScriptLoader=i.ScriptLoader,e.PluginManager=r.PluginManager,e.ThemeManager=r.ThemeManager,e.dom=e.dom||{},e.dom.Event=t.Event,u.each(u,function(n,t){e[t]=n}),u.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(n){e[n]=f[n.substr(2).toLowerCase()]}),{}});i(gt,[w,r],function(n,t){return n.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(n){this.settings=t.extend({},this.Defaults,n)},preRender:function(n){n.addClass(this.settings.containerClass,"body")},applyClasses:function(n){var f=this,t=f.settings,i,r,u;i=n.items().filter(":visible");r=t.firstControlClass;u=t.lastControlClass;i.each(function(n){n.removeClass(r).removeClass(u);t.controlClass&&n.addClass(t.controlClass)});i.eq(0).addClass(r);i.eq(-1).addClass(u)},renderHtml:function(n){var u=this,t=u.settings,i,r="";return i=n.items(),i.eq(0).addClass(t.firstControlClass),i.eq(-1).addClass(t.lastControlClass),i.each(function(n){t.controlClass&&n.addClass(t.controlClass);r+=n.renderHtml()}),r},recalc:function(){},postRender:function(){}})});i(ft,[gt],function(n){return n.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(n){n.items().filter(":visible").each(function(n){var t=n.settings;n.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});n.recalc&&n.recalc()})},renderHtml:function(n){return'<div id="'+n._id+'-absend" class="'+n.classPrefix+'abs-end"><\/div>'+this._super(n)}})});i(or,[a,bt],function(n,t){return n.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(n)),t):t._value},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"><\/div><div class="'+t+'tooltip-inner">'+n.encode(n._text)+"<\/div><\/div>"},repaint:function(){var i=this,n,t;n=i.getEl().style;t=i._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=131070}})});i(e,[a,or],function(n,t){var i,r=n.extend({init:function(n){var t=this;t._super(n);n=t.settings;t.canFocus=!0;n.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(i){var r=t.tooltip().moveTo(-65535),u;i.control==t?(u=r.text(n.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]),r.toggleClass("tooltip-n","bc-tc"==u),r.toggleClass("tooltip-nw","bc-tl"==u),r.toggleClass("tooltip-ne","bc-tr"==u),r.moveRel(t.getEl(),u)):r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()}));t.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return i||(i=new t({type:"tooltip"}),i.renderTo()),i},active:function(n){var t=this,i;return n!==i&&(t.aria("pressed",n),t.toggleClass("active",n)),t._super(n)},disabled:function(n){var t=this,i;return n!==i&&(t.aria("disabled",n),t.toggleClass("disabled",n)),t._super(n)},postRender:function(){var n=this,t=n.settings;n._rendered=!0;n._super();n.parent()||!t.width&&!t.height||(n.initLayoutRect(),n.repaint());t.autofocus&&n.focus()},remove:function(){this._super();i&&(i.remove(),i=null)}});return r});i(ni,[e],function(n){return n.extend({Defaults:{classes:"widget btn",role:"button"},init:function(n){var t=this,i;t.on("click mousedown",function(n){n.preventDefault()});t._super(n);i=n.size;n.subtype&&t.addClass(n.subtype);i&&t.addClass("btn-"+i)},icon:function(n){var t=this,u=t.classPrefix,r,i;return"undefined"==typeof n?t.settings.icon:((t.settings.icon=n,n=n?u+"ico "+u+"i-"+t.settings.icon:"",t._rendered)&&(r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0],n?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=n):i&&r.removeChild(i),t.text(t._text)),t)},repaint:function(){var n=this.getEl().firstChild.style;n.width=n.height="100%";this._super()},text:function(n){var t=this,i;return t._rendered&&(i=t.getEl().lastChild.lastChild,i&&(i.data=t.translate(n))),t._super(n)},renderHtml:function(){var t=this,r=t._id,u=t.classPrefix,i=t.settings.icon,n;return n=t.settings.image,n?(i="none","string"!=typeof n&&(n=window.getSelection?n[0]:n[1]),n=" style=\"background-image: url('"+n+"')\""):n="",i=t.settings.icon?u+"ico "+u+"i-"+i:"",'<div id="'+r+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+r+'"><button role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+n+"><\/i>":"")+(t._text?(i?" ":"")+t.encode(t._text):"")+"<\/button><\/div>"}})});i(fu,[v],function(n){return n.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var n=this,t=n._layout;return n.addClass("btn-group"),n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'"><div id="'+n._id+'-body">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}})});i(sr,[e],function(n){return n.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(n){var t=this;t._super(n);t.on("click mousedown",function(n){n.preventDefault()});t.on("click",function(n){n.preventDefault();t.disabled()||t.checked(!t.checked())});t.checked(t.settings.checked)},checked:function(n){var t=this;return"undefined"!=typeof n?(n?t.addClass("checked"):t.removeClass("checked"),t._checked=n,t.aria("checked",n),t):t._checked},value:function(n){return this.checked(n)},renderHtml:function(){var n=this,t=n._id,i=n.classPrefix;return'<div id="'+t+'" class="'+n.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"><\/i><span id="'+t+'-al" class="'+i+'label">'+n.encode(n._text)+"<\/span><\/div>"}})});i(ti,[e,b,f],function(n,t,i){return n.extend({init:function(n){var t=this;t._super(n);t.addClass("combobox");t.subinput=!0;t.ariaTarget="inp";n=t.settings;n.menu=n.menu||n.values;n.menu&&(n.icon="caret");t.on("click",function(i){for(var r=i.target,u=t.getEl();r&&r!=u;)r.id&&-1!=r.id.indexOf("-open")&&(t.fire("action"),n.menu&&(t.showMenu(),i.aria&&t.menu.items()[0].focus())),r=r.parentNode});t.on("keydown",function(n){"INPUT"==n.target.nodeName&&13==n.keyCode&&t.parents().reverse().each(function(i){return n.preventDefault(),t.fire("change"),i.hasEventListeners("submit")&&i.toJSON?(i.fire("submit",{data:i.toJSON()}),!1):void 0})});n.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(i.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0);t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=n.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var n=this,r=n.settings,i;n.menu||(i=r.menu||[],i.length?i={type:"menu",items:i}:i.type=i.type||"menu",n.menu=t.create(i).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0));n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=n),t):t._rendered?(n=t.getEl("inp").value,n!=t.settings.placeholder?n:""):t._value},disabled:function(n){var t=this;return t._rendered&&"undefined"!=typeof n&&(t.getEl("inp").disabled=n),t._super(n)},focus:function(){this.getEl("inp").focus()},repaint:function(){var n=this,o=n.getEl(),r=n.getEl("open"),u=n.layoutRect(),f,e,t;return f=r?u.w-i.getSize(r).width-10:u.w-10,t=document,t.all&&(!t.documentMode||t.documentMode<=8)&&(e=n.layoutRect().h-2+"px"),i.css(o.firstChild,{width:f,lineHeight:e}),n._super(),n},postRender:function(){var n=this;return i.on(this.getEl("inp"),"change",function(){n.fire("change")}),n._super()},remove:function(){i.off(this.getEl("inp"));this._super()},renderHtml:function(){var i=this,f=i._id,n=i.settings,r=i.classPrefix,s=n.value||n.placeholder||"",t,e,o="",u="";return"spellcheck"in n&&(u+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(u+=' maxlength="'+n.maxLength+'"'),n.size&&(u+=' size="'+n.size+'"'),n.subtype&&(u+=' type="'+n.subtype+'"'),i.disabled()&&(u+=' disabled="disabled"'),t=n.icon,t&&"caret"!=t&&(t=r+"ico "+r+"i-"+n.icon),e=i._text,(t||e)&&(o='<div id="'+f+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+f+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=t?'<i class="'+t+'"><\/i>':'<i class="'+r+'caret"><\/i>')+(e?(t?" ":"")+e:"")+"<\/button><\/div>",i.addClass("has-open")),'<div id="'+f+'" class="'+i.classes()+'"><input id="'+f+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+s+'" hidefocus="1"'+u+" />"+o+"<\/div>"}})});i(eu,[ti],function(n){return n.extend({init:function(n){var t=this;n.spellcheck=!1;n.icon="none";t._super(n);t.addClass("colorbox");t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(n){this.getEl().getElementsByTagName("i")[0].style.background=n},value:function(n){var t=this;return"undefined"!=typeof n&&t._rendered&&t.repaintColor(n),t._super(n)}})});i(hr,[ni,d],function(n,t){return n.extend({showPanel:function(){var n=this,r=n.settings,i;(n.active(!0),n.panel)?n.panel.show():(i=r.panel,i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,n.panel=new t(i).on("hide",function(){n.active(!1)}).on("cancel",function(t){t.stopPropagation();n.focus();n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow());n.panel.moveRel(n.getEl(),r.popoverAlign||(n.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var n=this;n.panel&&n.panel.hide()},postRender:function(){var n=this;return n.aria("haspopup",!0),n.on("click",function(t){t.control===n&&(n.panel&&n.panel.visible()?n.hidePanel():(n.showPanel(),n.panel.focus(!!t.aria)))}),n._super()}})});i(ou,[hr,o],function(n,t){var i=t.DOM;return n.extend({init:function(n){this._super(n);this.addClass("colorbutton")},color:function(n){return n?(this._color=n,this.getEl("preview").style.backgroundColor=n,this):this._color},renderHtml:function(){var n=this,r=n._id,t=n.classPrefix,i=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"",u=n.settings.image?" style=\"background-image: url('"+n.settings.image+"')\"":"";return'<div id="'+r+'" class="'+n.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+u+"><\/i>":"")+'<span id="'+r+'-preview" class="'+t+'preview"><\/span>'+(n._text?(i?" ":"")+n._text:"")+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=n||i.getParent(r.target,"."+n.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(n,r))}),delete n.settings.onclick,n._super()}})});i(cr,[],function(){function r(r){function h(r,u,f){var s,c,h,l,e,o;return s=0,c=0,h=0,r/=255,u/=255,f/=255,e=t(r,t(u,f)),o=i(r,i(u,f)),e==o?(h=e,{h:0,s:0,v:100*h}):(l=r==e?u-f:f==e?r-u:f-r,s=r==e?3:f==e?1:5,s=60*(s-l/(o-e)),c=(o-e)/o,h=o,{h:n(s),s:n(100*c),v:n(100*h)})}function c(r,o,s){var a,h,c,l;if(r=(parseInt(r,10)||0)%360,o=parseInt(o,10)/100,s=parseInt(s,10)/100,o=i(0,t(o,1)),s=i(0,t(s,1)),0===o)return void(u=f=e=n(255*s));switch(a=r/60,h=s*o,c=h*(1-Math.abs(a%2-1)),l=s-h,Math.floor(a)){case 0:u=h;f=c;e=0;break;case 1:u=c;f=h;e=0;break;case 2:u=0;f=h;e=c;break;case 3:u=0;f=c;e=h;break;case 4:u=c;f=0;e=h;break;case 5:u=h;f=0;e=c;break;default:u=f=e=0}u=n(255*(u+l));f=n(255*(f+l));e=n(255*(e+l))}function l(){function n(n){return n=parseInt(n,10).toString(16),n.length>1?n:"0"+n}return"#"+n(u)+n(f)+n(e)}function a(){return{r:u,g:f,b:e}}function v(){return h(u,f,e)}function s(n){var t;return"object"==typeof n?"r"in n?(u=n.r,f=n.g,e=n.b):"v"in n&&c(n.h,n.s,n.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))?(u=parseInt(t[1],10),f=parseInt(t[2],10),e=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))?(u=parseInt(t[1],16),f=parseInt(t[2],16),e=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(n))&&(u=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),e=parseInt(t[3]+t[3],16)),u=0>u?0:u>255?255:u,f=0>f?0:f>255?255:f,e=0>e?0:e>255?255:e,o}var o=this,u=0,f=0,e=0;r&&s(r);o.toRgb=a;o.toHsv=v;o.toHex=l;o.parse=s}var t=Math.min,i=Math.max,n=Math.round;return r});i(su,[e,k,f,cr],function(n,t,i,r){return n.extend({Defaults:{classes:"widget colorpicker"},init:function(n){this._super(n)},postRender:function(){function o(n,t){var f=i.getPos(n),r,u;return r=t.pageX-f.x,u=t.pageY-f.y,r=Math.max(0,Math.min(r/n.clientWidth,1)),u=Math.max(0,Math.min(u/n.clientHeight,1)),{x:r,y:u}}function f(t,u){var f=(360-t.h)/360;i.css(a,{top:100*f+"%"});u||i.css(v,{left:t.s+"%",top:100-t.v+"%"});e.style.background=new r({s:100,v:100,h:t.h}).toHex();n.color().parse({s:t.s,v:t.v,h:t.h})}function s(t){var i;i=o(e,t);u.s=100*i.x;u.v=100*(1-i.y);f(u);n.fire("change")}function h(t){var i;i=o(l,t);u=c.toHsv();u.h=360*(1-i.y);f(u,!0);n.fire("change")}var n=this,c=n.color(),u,l,a,e,v;l=n.getEl("h");a=n.getEl("hp");e=n.getEl("sv");v=n.getEl("svp");n._repaint=function(){u=c.toHsv();f(u)};n._super();n._svdraghelper=new t(n._id+"-sv",{start:s,drag:s});n._hdraghelper=new t(n._id+"-h",{start:h,drag:h});n._repaint()},rgb:function(){return this.color().toRgb()},value:function(n){var t=this;return arguments.length?(t.color().parse(n),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function f(){var t,u,e="",f,i;for(f="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=r.split(","),t=0,u=i.length-1;u>t;t++)e+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/u+"%;"+f+i[t]+",endColorstr="+i[t+1]+");-ms-"+f+i[t]+",endColorstr="+i[t+1]+')"><\/div>';return e}var i=this,t=i._id,n=i.classPrefix,u,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",e="background: -ms-linear-gradient(top,"+r+");background: linear-gradient(to bottom,"+r+");";return u='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="'+e+'">'+f()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"><\/div><\/div>','<div id="'+t+'" class="'+i.classes()+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"><\/div><\/div><\/div><\/div><\/div>'+u+"<\/div>"}})});i(lr,[e],function(n){return n.extend({init:function(n){var t=this;n.delimiter||(n.delimiter="»");t._super(n);t.addClass("path");t.canFocus=!0;t.on("click",function(n){var i,r=n.target;(i=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[i],index:i})})},focus:function(){var n=this;return n.getEl().firstChild.focus(),n},data:function(n){var t=this;return"undefined"!=typeof n?(t._data=n,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var n=this;n._super();n.data(n.settings.data)},renderHtml:function(){var n=this;return'<div id="'+n._id+'" class="'+n.classes()+'">'+n._getPathHtml()+"<\/div>"},_getPathHtml:function(){for(var t=this,f=t._data||[],i="",r=t.classPrefix,n=0,u=f.length;u>n;n++)i+=(n>0?'<div class="'+r+'divider" aria-hidden="true"> '+t.settings.delimiter+" <\/div>":"")+'<div role="button" class="'+r+"path-item"+(n==u-1?" "+r+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+t._id+"-"+n+'" aria-level="'+n+'">'+f[n].name+"<\/div>";return i||(i='<div class="'+r+'path-item"> <\/div>'),i}})});i(hu,[lr,ut],function(n,t){return n.extend({postRender:function(){function r(n){return 1===n.nodeType&&("BR"==n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type"))?!0:!1}var i=this,n=t.activeEditor;return i.on("select",function(t){n.focus();n.selection.select(this.data()[t.index].element);n.nodeChanged()}),n.on("nodeChange",function(t){for(var e,o=[],u=t.parents,f=u.length;f--;)if(1==u[f].nodeType&&!r(u[f])&&(e=n.fire("ResolveName",{name:u[f].nodeName.toLowerCase(),target:u[f]}),e.isDefaultPrevented()||o.push({name:e.name,element:u[f]}),e.isPropagationStopped()))break;i.data(o)}),i._super()}})});i(ar,[v],function(n){return n.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.addClass("formitem"),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<div id="'+n._id+'-title" class="'+i+'title">'+n.settings.title+"<\/div>":"")+'<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}})});i(vr,[v,ar,r],function(n,t,i){return n.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,r=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});r.each(function(r){var u,f=r.settings.label;f&&(u=new t(i.extend({items:{type:"label",id:r._id+"-l",text:f,flex:0,forId:r._id,disabled:r.disabled()}},n.settings.formItemDefaults)),u.type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),n.replace(r,u),u.add(r))})},recalcLabels:function(){var n=this,t=0,i=[],r,u,f;if(n.settings.labelGapCalc!==!1)for(f="children"==n.settings.labelGapCalc?n.find("formitem"):n.items(),f.filter("formitem").each(function(n){var r=n.items()[0],u=r.getEl().clientWidth;t=u>t?u:t;i.push(r)}),u=n.settings.labelGap||0,r=i.length;r--;)i[r].settings.minWidth=t+u},visible:function(n){var t=this._super(n);return n===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var n=this;n._super();n.recalcLabels();n.fromJSON(n.settings.data)}})});i(cu,[vr],function(n){return n.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.preRender(),t.preRender(n),'<fieldset id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<legend id="'+n._id+'-title" class="'+i+'fieldset-title">'+n.settings.title+"<\/legend>":"")+'<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/fieldset>"}})});i(lu,[ti,r],function(n,t){return n.extend({init:function(n){var r=this,o=tinymce.activeEditor,f=o.settings,e,u,i;n.spellcheck=!1;i=f.file_picker_types||f.file_browser_callback_types;i&&(i=t.makeMap(i,/[, ]/));(!i||i[n.filetype])&&(u=f.file_picker_callback,!u||i&&!i[n.filetype]?(u=f.file_browser_callback,!u||i&&!i[n.filetype]||(e=function(){u(r.getEl("inp").id,r.value(),n.filetype,window)})):e=function(){var i=r.fire("beforecall").meta;i=t.extend({filetype:n.filetype},i);u.call(o,function(n,t){r.value(n).fire("change",{meta:t})},r.value(),i)});e&&(n.icon="browse",n.onaction=e);r._super(n)}})});i(au,[ft],function(n){return n.extend({recalc:function(n){var i=n.layoutRect(),t=n.paddingBox();n.items().filter(":visible").each(function(n){n.layoutRect({x:t.left,y:t.top,w:i.innerW-t.right-t.left,h:i.innerH-t.top-t.bottom});n.recalc&&n.recalc()})}})});i(vu,[ft],function(n){return n.extend({recalc:function(n){var f,v,s,r,u,y,ut,ft,et,w,e,b,o,i,gt,ot,at=[],h,vt,st,t,l,g,yt,a,pt,nt,c,p,ht,wt,k,tt,it,rt,d,ct,bt,kt,dt=Math.max,ni=Math.min,lt;for(s=n.items().filter(":visible"),r=n.layoutRect(),u=n._paddingBox,y=n.settings,b=n.isRtl()?y.direction||"row-reversed":y.direction,ut=y.align,ft=n.isRtl()?y.pack||"end":y.pack,et=y.spacing||0,("row-reversed"==b||"column-reverse"==b)&&(s=s.set(s.toArray().reverse()),b=b.split("-")[0]),"column"==b?(pt="y",yt="h",a="minH",nt="maxH",p="innerH",c="top",ht="deltaH",wt="contentH",d="left",it="w",k="x",tt="innerW",rt="minW",ct="right",bt="deltaW",kt="contentW"):(pt="x",yt="w",a="minW",nt="maxW",p="innerW",c="left",ht="deltaW",wt="contentW",d="top",it="h",k="y",tt="innerH",rt="minH",ct="bottom",bt="deltaH",kt="contentH"),e=r[p]-u[c]-u[c],g=w=0,f=0,v=s.length;v>f;f++)o=s[f],i=o.layoutRect(),gt=o.settings,ot=gt.flex,e-=v-1>f?et:0,ot>0&&(w+=ot,i[nt]&&at.push(o),i.flex=ot),e-=i[a],h=u[d]+i[rt]+u[ct],h>g&&(g=h);if(t={},t[a]=0>e?r[a]-e+r[ht]:r[p]-e+r[ht],t[rt]=g+r[bt],t[wt]=r[p]-e,t[kt]=g,t.minW=ni(t.minW,r.maxW),t.minH=ni(t.minH,r.maxH),t.minW=dt(t.minW,r.startMinWidth),t.minH=dt(t.minH,r.startMinHeight),r.autoResize&&(t.minW!=r.minW||t.minH!=r.minH))(t.w=t.minW,t.h=t.minH,n.layoutRect(t),this.recalc(n),null===n._lastRect)&&(lt=n.parent(),lt&&(lt._lastRect=null,lt.recalc()));else{for(st=e/w,f=0,v=at.length;v>f;f++)o=at[f],i=o.layoutRect(),vt=i[nt],h=i[a]+i.flex*st,h>vt?(e-=i[nt]-i[a],w-=i.flex,i.flex=0,i.maxFlexSize=vt):i.maxFlexSize=0;for(st=e/w,l=u[c],t={},0===w&&("end"==ft?l=e+u[c]:"center"==ft?(l=Math.round(r[p]/2-(r[p]-e)/2)+u[c],0>l&&(l=u[c])):"justify"==ft&&(l=u[c],et=Math.floor(e/(s.length-1)))),t[k]=u[d],f=0,v=s.length;v>f;f++)o=s[f],i=o.layoutRect(),h=i.maxFlexSize||i[a],"center"===ut?t[k]=Math.round(r[tt]/2-i[it]/2):"stretch"===ut?(t[it]=dt(i[rt]||0,r[tt]-u[d]-u[ct]),t[k]=u[d]):"end"===ut&&(t[k]=r[tt]-i[it]-u.top),i.flex>0&&(h+=i.flex*st),t[yt]=h,t[pt]=l,o.layoutRect(t),o.recalc&&o.recalc(),l+=h+et}}})});i(yr,[gt],function(n){return n.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(n){n.items().filter(":visible").each(function(n){n.recalc&&n.recalc()})}})});i(yu,[a,e,d,r,ut,u],function(n,t,i,r,u,f){function o(n){function r(t,i){return function(){var r=this;n.on("nodeChange",function(u){var o=n.formatter,f=null;e(u.parents,function(n){return e(t,function(t){return i?o.matchNode(n,i,{value:t.value})&&(f=t.value):o.matchNode(n,t.value)&&(f=t.value),f?!1:void 0}),f?!1:void 0});r.value(f)})}}function o(n){n=n.replace(/;$/,"").split(";");for(var t=n.length;t--;)n[t]=n[t].split("=");return n}function s(){function i(n){var t=[];if(n)return e(n,function(n){var u={text:n.title,icon:n.icon},f;n.items?u.menu=i(n.items):(f=n.format||"custom"+o++,n.format||(n.name=f,r.push(n)),u.format=f,u.cmd=n.cmd);t.push(u)}),t}function f(){return i(n.settings.style_formats_merge?n.settings.style_formats?t.concat(n.settings.style_formats):t:n.settings.style_formats||t)}var o=0,r=[],t=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return n.on("init",function(){e(r,function(t){n.formatter.register(t.name,t)})}),{type:"menu",items:f(),onPostRender:function(t){n.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var i,r;i=t.settings.format;i&&(t.disabled(!n.formatter.canApply(i)),t.active(n.formatter.match(i)));r=t.settings.cmd;r&&t.active(n.queryCommandState(r))})},onclick:function(){this.settings.format&&u(this.settings.format);this.settings.cmd&&n.execCommand(this.settings.cmd)}}}}function t(t){return function(){function i(){return n.undoManager?n.undoManager[t]():!1}var r=this;t="redo"==t?"hasRedo":"hasUndo";r.disabled(!i());n.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){r.disabled(!i())})}}function h(){var t=this;n.on("VisualAid",function(n){t.active(n.hasVisual)});t.active(n.hasVisual)}function u(t){t.control&&(t=t.control.value());t&&n.execCommand("mceToggleFormat",!1,t)}var f;f=s();e({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,i){n.addButton(i,{tooltip:t,onPostRender:function(){var t=this;n.formatter?n.formatter.formatChanged(i,function(n){t.active(n)}):n.on("init",function(){n.formatter.formatChanged(i,function(n){t.active(n)})})},onclick:function(){u(i)}})});e({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,i){n.addButton(i,{tooltip:t[0],cmd:t[1]})});e({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,i){n.addButton(i,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;n.formatter?n.formatter.formatChanged(i,function(n){t.active(n)}):n.on("init",function(){n.formatter.formatChanged(i,function(n){t.active(n)})})}})});n.addButton("undo",{tooltip:"Undo",onPostRender:t("undo"),cmd:"undo"});n.addButton("redo",{tooltip:"Redo",onPostRender:t("redo"),cmd:"redo"});n.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"});n.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:t("undo"),cmd:"undo"});n.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:t("redo"),cmd:"redo"});n.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:h,cmd:"mceToggleVisualAid"});e({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,i){n.addMenuItem(i,{text:t[0],icon:i,shortcut:t[2],cmd:t[1]})});n.on("mousedown",function(){i.hideAll()});n.addButton("styleselect",{type:"menubutton",text:"Formats",menu:f});n.addButton("formatselect",function(){var t=[],i=o(n.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return e(i,function(i){t.push({text:i[0],value:i[1],textStyle:function(){return n.formatter.getCssText(i[1])}})}),{type:"listbox",text:i[0][0],values:t,fixedWidth:!0,onselect:u,onPostRender:r(t)}});n.addButton("fontselect",function(){var t=[],i=o(n.settings.font_formats||"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return e(i,function(n){t.push({text:{raw:n[0]},value:n[1],textStyle:-1==n[1].indexOf("dings")?"font-family:"+n[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:r(t,"fontname"),onselect:function(t){t.control.settings.value&&n.execCommand("FontName",!1,t.control.settings.value)}}});n.addButton("fontsizeselect",function(){var t=[],i=n.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return e(i.split(" "),function(n){var r=n,u=n,i=n.split("=");i.length>1&&(r=i[0],u=i[1]);t.push({text:r,value:u})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:r(t,"fontsize"),onclick:function(t){t.control.settings.value&&n.execCommand("FontSize",!1,t.control.settings.value)}}});n.addMenuItem("formats",{text:"Formats",menu:f})}var e=r.each;u.on("AddEditor",function(t){t.editor.rtl&&(n.rtl=!0);o(t.editor)});n.translate=function(n){return u.translate(n)};t.tooltips=!f.iOS});i(pu,[ft],function(n){return n.extend({recalc:function(n){var e=n.settings,p,o,b,u,k,d,i,f,h,t,r,g,nt,st,s,c,tt,it,l,a,rt,ut,v=[],y=[],ht,ct,lt,ft,vt,yt,pt,et,w,at,ot;for(e=n.settings,b=n.items().filter(":visible"),u=n.layoutRect(),o=e.columns||Math.ceil(Math.sqrt(b.length)),p=Math.ceil(b.length/o),tt=e.spacingH||e.spacing||0,it=e.spacingV||e.spacing||0,l=e.alignH||e.align,a=e.alignV||e.align,s=n._paddingBox,vt=("reverseRows"in e)?e.reverseRows:n.isRtl(),l&&"string"==typeof l&&(l=[l]),a&&"string"==typeof a&&(a=[a]),t=0;o>t;t++)v.push(0);for(r=0;p>r;r++)y.push(0);for(r=0;p>r;r++)for(t=0;o>t&&(h=b[r*o+t],h);t++)f=h.layoutRect(),ht=f.minW,ct=f.minH,v[t]=ht>v[t]?ht:v[t],y[r]=ct>y[r]?ct:y[r];for(lt=u.innerW-s.left-s.right,rt=0,t=0;o>t;t++)rt+=v[t]+(t>0?tt:0),lt-=(t>0?tt:0)+v[t];for(ft=u.innerH-s.top-s.bottom,ut=0,r=0;p>r;r++)ut+=y[r]+(r>0?it:0),ft-=(r>0?it:0)+y[r];if(rt+=s.left+s.right,ut+=s.top+s.bottom,i={},i.minW=rt+(u.w-u.innerW),i.minH=ut+(u.h-u.innerH),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH,i.minW=Math.min(i.minW,u.maxW),i.minH=Math.min(i.minH,u.maxH),i.minW=Math.max(i.minW,u.startMinWidth),i.minH=Math.max(i.minH,u.startMinHeight),u.autoResize&&(i.minW!=u.minW||i.minH!=u.minH))(i.w=i.minW,i.h=i.minH,n.layoutRect(i),this.recalc(n),null===n._lastRect)&&(ot=n.parent(),ot&&(ot._lastRect=null,ot.recalc()));else{if(u.autoResize&&(i=n.layoutRect(i),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH),pt="start"==e.packV?0:ft>0?Math.floor(ft/p):0,et=0,w=e.flexWidths,w)for(t=0;t<w.length;t++)et+=w[t];else et=o;for(at=lt/et,t=0;o>t;t++)v[t]+=w?w[t]*at:at;for(nt=s.top,r=0;p>r;r++){for(g=s.left,d=y[r]+pt,t=0;o>t&&(yt=vt?r*o+o-1-t:r*o+t,h=b[yt],h);t++)st=h.settings,f=h.layoutRect(),k=Math.max(v[t],f.startMinWidth),f.x=g,f.y=nt,c=st.alignH||(l?l[t]||l[0]:null),"center"==c?f.x=g+k/2-f.w/2:"right"==c?f.x=g+k-f.w:"stretch"==c&&(f.w=k),c=st.alignV||(a?a[t]||a[0]:null),"center"==c?f.y=nt+d/2-f.h/2:"bottom"==c?f.y=nt+d-f.h:"stretch"==c&&(f.h=d),h.layoutRect(f),g+=k+tt,h.recalc&&h.recalc();nt+=d+it}}}})});i(wu,[e],function(n){return n.extend({renderHtml:function(){var n=this;return n.addClass("iframe"),n.canFocus=!1,'<iframe id="'+n._id+'" class="'+n.classes()+'" tabindex="-1" src="'+(n.settings.url||"javascript:''")+'" frameborder="0"><\/iframe>'},src:function(n){this.getEl().src=n},html:function(n,t){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=n,t&&t()):setTimeout(function(){r.html(n)},0),this}})});i(bu,[e,f],function(n,t){return n.extend({init:function(n){var t=this;t._super(n);t.addClass("widget");t.addClass("label");t.canFocus=!1;n.multiline&&t.addClass("autoscroll");n.strong&&t.addClass("strong")},initLayoutRect:function(){var i=this,n=i._super(),r;return i.settings.multiline&&(r=t.getSize(i.getEl()),r.width>n.maxW&&(n.minW=n.maxW,i.addClass("multiline")),i.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(i.getEl()).height)),n},repaint:function(){var n=this;return n.settings.multiline||(n.getEl().style.lineHeight=n.layoutRect().h+"px"),n._super()},text:function(n){var t=this;return t._rendered&&n&&this.innerHtml(t.encode(n)),t._super(n)},renderHtml:function(){var n=this,t=n.settings.forId;return'<label id="'+n._id+'" class="'+n.classes()+'"'+(t?' for="'+t+'"':"")+">"+n.encode(n._text)+"<\/label>"}})});i(pr,[v],function(n){return n.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(n){var t=this;t._super(n);t.addClass("toolbar")},postRender:function(){var n=this;return n.items().addClass("toolbar-item"),n._super()}})});i(wr,[pr],function(n){return n.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})});i(ii,[ni,b,wr],function(n,t,i){function u(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}var r=n.extend({init:function(n){var t=this;t._renderOpen=!0;t._super(n);t.addClass("menubtn");n.fixedWidth&&t.addClass("fixed-width");t.aria("haspopup",!0);t.hasPopup=!0},showMenu:function(){var n=this,r=n.settings,i;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(i=r.menu||[],i.length?i={type:"menu",items:i}:i.type=i.type||"menu",n.menu=t.create(i).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){t.control==n.menu&&n.activeMenu("show"==t.type);n.aria("expanded","show"==t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var n=this;n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide())},activeMenu:function(n){this.toggleClass("active",n)},renderHtml:function(){var n=this,t=n._id,r=n.classPrefix,u=n.settings.icon?r+"ico "+r+"i-"+n.settings.icon:"";return n.aria("role",n.parent()instanceof i?"menuitem":"button"),'<div id="'+t+'" class="'+n.classes()+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(u?'<i class="'+u+'"><\/i>':"")+"<span>"+(n._text?(u?" ":"")+n.encode(n._text):"")+'<\/span> <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this;return n.on("click",function(t){t.control===n&&u(t.target,n.getEl())&&(n.showMenu(),t.aria&&n.menu.items()[0].focus())}),n.on("mouseenter",function(t){var i=t.control,u=n.parent(),f;i&&u&&i instanceof r&&i.parent()==u&&(u.items().filter("MenuButton").each(function(n){n.hideMenu&&n!=i&&(n.menu&&n.menu.visible()&&(f=!0),n.hideMenu())}),f&&(i.focus(),i.showMenu()))}),n._super()},text:function(n){var t=this,i,r;if(t._rendered)for(r=t.getEl("open").getElementsByTagName("span"),i=0;i<r.length;i++)r[i].innerHTML=(t.settings.icon&&n?" ":"")+t.encode(n);return this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}});return r});i(ku,[ii],function(n){return n.extend({init:function(n){function f(t){for(var u=0;u<t.length;u++){if(e=t[u].selected||n.value===t[u].value){r=r||t[u].text;i._value=t[u].value;break}t[u].menu&&f(t[u].menu)}}var i=this,t,e,r,u;i._values=t=n.values;t&&("undefined"!=typeof n.value&&f(t),!e&&t.length>0&&(r=t[0].text,i._value=t[0].value),n.menu=t);n.text=n.text||r||t[0].text;i._super(n);i.addClass("listbox");i.on("select",function(t){var r=t.control;u&&(t.lastControl=u);n.multiple?r.active(!r.active()):i.value(t.control.settings.value);u=r})},value:function(n){function u(n,i){n.items().each(function(n){t=n.value()===i;t&&(r=r||n.text());n.active(t);n.menu&&u(n.menu,i)})}function f(i){for(var u=0;u<i.length;u++)t=i[u].value==n,t&&(r=r||i[u].text),i[u].active=t,i[u].menu&&f(i[u].menu)}var i=this,t,r,e;return"undefined"!=typeof n&&(i.menu?u(i.menu,n):(e=i.settings.menu,f(e)),i.text(r||this.settings.text)),i._super(n)}})});i(br,[e,b,u],function(n,t,i){return n.extend({Defaults:{border:0,role:"menuitem"},init:function(n){var t=this;t.hasPopup=!0;t._super(n);n=t.settings;t.addClass("menu-item");n.menu&&t.addClass("menu-item-expand");n.preview&&t.addClass("menu-item-preview");("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-");n.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),n.icon="selected");n.preview||n.selectable||t.addClass("menu-item-normal");t.on("mousedown",function(n){n.preventDefault()});n.menu&&!n.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var i=this,f=i.settings,n,u=i.parent(),r;(u.items().each(function(n){n!==i&&n.hideMenu()}),f.menu)&&(n=i.menu,n?n.show():(n=f.menu,n.length?n={type:"menu",items:n}:n.type=n.type||"menu",u.settings.itemDefaults&&(n.itemDefaults=u.settings.itemDefaults),n=i.menu=t.create(n).parent(i).renderTo(),n.reflow(),n.on("cancel",function(t){t.stopPropagation();i.focus();n.hide()}),n.on("show hide",function(n){n.control.items().each(function(n){n.active(n.settings.selected)})}).fire("show"),n.on("hide",function(t){t.control===n&&i.removeClass("selected")}),n.submenu=!0),n._parentMenu=u,n.addClass("menu-sub"),r=n.testMoveRel(i.getEl(),i.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),n.moveRel(i.getEl(),r),n.rel=r,r="menu-sub-"+r,n.removeClass(n._lastRel),n.addClass(r),n._lastRel=r,i.addClass("selected"),i.aria("expanded",!0))},hideMenu:function(){var n=this;return n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide(),n.aria("expanded",!1)),n},renderHtml:function(){var t=this,e=t._id,u=t.settings,r=t.classPrefix,o=t.encode(t._text),f=t.settings.icon,s="",n=u.shortcut;return f&&t.parent().addClass("menu-has-icons"),u.image&&(f="none",s=" style=\"background-image: url('"+u.image+"')\""),n&&i.mac&&(n=n.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),n=n.replace(/ctrl\+/i,"&#x2318;"),n=n.replace(/alt\+/i,"&#x2325;"),n=n.replace(/shift\+/i,"&#x21E7;")),f=r+"ico "+r+"i-"+(t.settings.icon||"none"),'<div id="'+e+'" class="'+t.classes()+'" tabindex="-1">'+("-"!==o?'<i class="'+f+'"'+s+"><\/i> ":"")+("-"!==o?'<span id="'+e+'-text" class="'+r+'text">'+o+"<\/span>":"")+(n?'<div id="'+e+'-shortcut" class="'+r+'menu-shortcut">'+n+"<\/div>":"")+(u.menu?'<div class="'+r+'caret"><\/div>':"")+"<\/div>"},postRender:function(){var n=this,r=n.settings,t=r.textStyle,i;return("function"==typeof t&&(t=t.call(this)),t)&&(i=n.getEl("text"),i&&i.setAttribute("style",t)),n.on("mouseenter click",function(t){t.control===n&&(r.menu||"click"!==t.type?(n.showMenu(),t.aria&&n.menu.focus(!0)):(n.fire("select"),n.parent().hideAll()))}),n._super(),n},active:function(n){return"undefined"!=typeof n&&this.aria("checked",n),this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}})});i(du,[d,br,r],function(n,t,i){return n.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(n){var u=this,t,r;if(n.autohide=!0,n.constrainToViewport=!0,n.itemDefaults)for(t=n.items,r=t.length;r--;)t[r]=i.extend({},n.itemDefaults,t[r]);u._super(n);u.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var n=this;n.hideAll();n.fire("select")},hideAll:function(){var n=this;return this.find("menuitem").exec("hideMenu"),n._super()},preRender:function(){var n=this;return n.items().each(function(t){var i=t.settings;if(i.icon||i.selectable)return(n._hasIcons=!0,!1)}),n._super()}})});i(gu,[sr],function(n){return n.extend({Defaults:{classes:"radio",role:"radio"}})});i(nf,[e,k],function(n,t){return n.extend({renderHtml:function(){var n=this,t=n.classPrefix;return n.addClass("resizehandle"),"both"==n.settings.direction&&n.addClass("resizehandle-both"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes()+'"><i class="'+t+"ico "+t+'i-resize"><\/i><\/div>'},postRender:function(){var n=this;n._super();n.resizeDragHelper=new t(this._id,{start:function(){n.fire("ResizeStart")},drag:function(t){"both"!=n.settings.direction&&(t.deltaX=0);n.fire("Resize",t)},stop:function(){n.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})});i(tf,[e],function(n){return n.extend({renderHtml:function(){var n=this;return n.addClass("spacer"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes()+'"><\/div>'}})});i(rf,[ii,f],function(n,t){return n.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var n=this,u=n.getEl(),i=n.layoutRect(),f,r;return n._super(),f=u.firstChild,r=u.lastChild,t.css(f,{width:i.w-t.getSize(r).width,height:i.h-2}),t.css(r,{height:i.h-2}),n},activeMenu:function(n){var i=this;t.toggleClass(i.getEl().lastChild,i.classPrefix+"active",n)},renderHtml:function(){var n=this,r=n._id,t=n.classPrefix,i=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"";return'<div id="'+r+'" class="'+n.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"><\/i>':"")+(n._text?(i?" ":"")+n._text:"")+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(n){var i=n.target;if(n.control==this)for(;i;){if(n.aria&&"down"!=n.aria.key||"BUTTON"==i.nodeName&&-1==i.className.indexOf("open"))return n.stopImmediatePropagation(),void t.call(this,n);i=i.parentNode}}),delete n.settings.onclick,n._super()}})});i(uf,[yr],function(n){return n.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})});i(ff,[rt,f],function(n,t){return n.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t.removeClass(i,this.classPrefix+"active"),i.setAttribute("aria-selected","false"));this.activeTabId="t"+n;i=this.getEl("t"+n);i.setAttribute("aria-selected","true");t.addClass(i,this.classPrefix+"active");this.items()[n].show().fire("showtab");this.reflow();this.items().each(function(t,i){n!=i&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,u){var f=n._id+"-t"+u;t.aria("role","tabpanel");t.aria("labelledby",f);i+='<div id="'+f+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"<\/div>"}),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'<\/div><div id="'+n._id+'-body" class="'+n.classes("body")+'">'+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this;n._super();n.settings.activeTab=n.settings.activeTab||0;n.activateTab(n.settings.activeTab);this.on("click",function(t){var r=t.target.parentNode,i;if(t.target.parentNode.id==n._id+"-head")for(i=r.childNodes.length;i--;)r.childNodes[i]==t.target&&n.activateTab(i)})},initLayoutRect:function(){var i=this,r,n,u,f;return n=t.getSize(i.getEl("head")).width,n=0>n?0:n,u=0,i.items().each(function(t){n=Math.max(n,t.layoutRect().minW);u=Math.max(u,t.layoutRect().minH)}),i.items().each(function(t){t.settings.x=0;t.settings.y=0;t.settings.w=n;t.settings.h=u;t.layoutRect({x:0,y:0,w:n,h:u})}),f=t.getSize(i.getEl("head")).height,i.settings.minWidth=n,i.settings.minHeight=u+f,r=i._super(),r.deltaH+=f,r.innerH=r.h-r.deltaH,r}})});i(ef,[e,f],function(n,t){return n.extend({init:function(n){var t=this;t._super(n);t._value=n.value||"";t.addClass("textbox");n.multiline?t.addClass("multiline"):t.on("keydown",function(n){13==n.keyCode&&t.parents().reverse().each(function(t){return n.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(n){var t=this;return t._rendered&&"undefined"!=typeof n&&(t.getEl().disabled=n),t._super(n)},value:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t._rendered&&(t.getEl().value=n),t):t._rendered?t.getEl().value:t._value},repaint:function(){var i=this,r,n,u,o=0,e=0,t,f;return r=i.getEl().style,n=i._layoutRect,t=i._lastRepaintRect||{},f=document,!i.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)&&(r.lineHeight=n.h-e+"px"),u=i._borderBox,o=u.left+u.right+8,e=u.top+u.bottom+(i.settings.multiline?8:0),n.x!==t.x&&(r.left=n.x+"px",t.x=n.x),n.y!==t.y&&(r.top=n.y+"px",t.y=n.y),n.w!==t.w&&(r.width=n.w-o+"px",t.w=n.w),n.h!==t.h&&(r.height=n.h-e+"px",t.h=n.h),i._lastRepaintRect=t,i.fire("repaint",{},!1),i},renderHtml:function(){var t=this,r=t._id,n=t.settings,u=t.encode(t._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),t.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+r+'" class="'+t.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+i+">"+u+"<\/textarea>":'<input id="'+r+'" class="'+t.classes()+'" value="'+u+'" hidefocus="1"'+i+" />"},postRender:function(){var n=this;return t.on(n.getEl(),"change",function(t){n.fire("change",t)}),n._super()},remove:function(){t.off(this.getEl());this._super()}})});i(of,[f,a],function(n,t){return function(i,r){var u=this,f,e=t.classPrefix;u.show=function(t){return u.hide(),f=!0,window.setTimeout(function(){f&&i.appendChild(n.createFragment('<div class="'+e+"throbber"+(r?" "+e+"throbber-inline":"")+'"><\/div>'))},t||0),u};u.hide=function(){var n=i.lastChild;return n&&-1!=n.className.indexOf("throbber")&&n.parentNode.removeChild(n),f=!1,u}}});cf([ot,y,r,u,g,ri,s,ui,h,o,nt,st,p,l,ht,ct,fi,tt,ei,oi,lt,si,it,hi,at,ci,li,ai,vi,yi,vt,w,yt,pt,wt,f,a,b,pi,v,k,wi,rt,bt,bi,d,kt,ki,di,gi,dt,nr,tr,ir,rr,ur,ut,nu,fr,er,tu,iu,ru,uu,gt,ft,or,e,ni,fu,sr,ti,eu,hr,ou,cr,su,lr,hu,ar,vr,cu,lu,au,vu,yr,yu,pu,wu,bu,pr,wr,ii,ku,br,du,gu,nf,tf,rf,uf,ff,ef,of])}(this);!function(n){function f(){function e(n){"remove"===n&&this.each(function(n,t){var i=u(t);i&&i.remove()});this.find("span.mceEditor,div.mceEditor").each(function(n,t){var i=tinymce.get(t.id.replace(/_parent$/,""));i&&i.remove()})}function o(n){var i,t=this;if(null!=n)e.call(t),t.each(function(t,i){var r;(r=tinymce.get(i.id))&&r.setContent(n)});else if(t.length>0&&(i=tinymce.get(t[0].id)))return i.getContent()}function u(n){var i=null;return n&&n.id&&t.tinymce&&(i=tinymce.get(n.id)),i}function f(n){return!!(n&&n.length&&t.tinymce&&n.is(":tinymce"))}var i={};n.each(["text","html","val"],function(t,e){var s=i[e]=n.fn[e],h="text"===e;n.fn[e]=function(t){var i=this,e,c;return f(i)?t!==r?(o.call(i.filter(":tinymce"),t),s.apply(i.not(":tinymce"),arguments),i):(e="",c=arguments,(h?i:i.eq(0)).each(function(t,i){var r=u(i);e+=r?h?r.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):r.getContent({save:!0}):s.apply(n(i),c)}),e):s.apply(i,arguments)}});n.each(["append","prepend"],function(t,e){var o=i[e]=n.fn[e],s="prepend"===e;n.fn[e]=function(n){var t=this;return f(t)?n!==r?(t.filter(":tinymce").each(function(t,i){var r=u(i);r&&r.setContent(s?n+r.getContent():r.getContent()+n)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}});n.each(["remove","replaceWith","replaceAll","empty"],function(t,r){var u=i[r]=n.fn[r];n.fn[r]=function(){return e.call(this,r),u.apply(this,arguments)}});i.attr=n.fn.attr;n.fn.attr=function(t,e){var s=this,h=arguments,c,l;return!t||"value"!==t||!f(s)?e!==r?i.attr.apply(s,h):i.attr.apply(s,h):e!==r?(o.call(s.filter(":tinymce"),e),i.attr.apply(s.not(":tinymce"),h),s):(c=s[0],l=u(c),l?l.getContent({save:!0}):i.attr.apply(n(c),h))}}var r,i,u=[],t=window;n.fn.tinymce=function(r){function l(){var t=[],i=0;v||(f(),v=!0);o.each(function(n,u){var e,f=u.id,s=r.oninit;f||(u.id=f=tinymce.DOM.uniqueId());tinymce.get(f)||(e=new tinymce.Editor(f,r,tinymce.EditorManager),t.push(e),e.on("init",function(){var r,n=s;o.css("visibility","");s&&++i==t.length&&("string"==typeof n&&(r=-1===n.indexOf(".")?null:tinymce.resolve(n.replace(/\.\w+$/,"")),n=tinymce.resolve(n)),n.apply(r||tinymce,t))}))});n.each(t,function(n,t){t.render()})}var e,a,h,v,o=this,c="",s;return o.length?r?((o.css("visibility","hidden"),!t.tinymce&&!i&&(e=r.script_url))?(i=1,a=e.substring(0,e.lastIndexOf("/")),-1!=e.indexOf(".min")&&(c=".min"),t.tinymce=t.tinyMCEPreInit||{base:a,suffix:c},-1!=e.indexOf("gzip")&&(h=r.language||"en",e=e+(/\?/.test(e)?"&":"?")+"js=true&core=true&suffix="+escape(c)+"&themes="+escape(r.theme||"modern")+"&plugins="+escape(r.plugins||"")+"&languages="+(h||""),t.tinyMCE_GZ||(t.tinyMCE_GZ={start:function(){function t(n){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(n))}t("langs/"+h+".js");t("themes/"+r.theme+"/theme"+c+".js");t("themes/"+r.theme+"/langs/"+h+".js");n.each(r.plugins.split(","),function(n,i){i&&(t("plugins/"+i+"/plugin"+c+".js"),t("plugins/"+i+"/langs/"+h+".js"))})},end:function(){}})),s=document.createElement("script"),s.type="text/javascript",s.onload=s.onreadystatechange=function(t){t=t||window.event;2!==i&&("load"==t.type||/complete|loaded/.test(s.readyState))&&(tinymce.dom.Event.domLoaded=1,i=2,r.script_loaded&&r.script_loaded(),l(),n.each(u,function(n,t){t()}))},s.src=e,document.body.appendChild(s)):1===i?u.push(l):l(),o):window.tinymce?tinymce.get(o[0].id):null:o};n.extend(n.expr[":"],{tinymce:function(n){return!!(n.id&&"tinymce"in window&&tinymce.get(n.id))}})}(jQuery);tinymce.PluginManager.add("advlist",function(n){function i(n,t){var i=[];return tinymce.each(t.split(/[ ,]/),function(n){i.push({text:n.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()}),data:"default"==n?"":n})}),i}function t(t,i){var r,u=n.dom,f=n.selection;r=u.getParent(f.getNode(),"ol,ul");r&&r.nodeName==t&&i!==!1||n.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList");i=i===!1?e[t]:i;e[t]=i;r=u.getParent(f.getNode(),"ol,ul");r&&i&&(u.setStyle(r,"listStyleType",i),r.removeAttribute("data-mce-style"));n.focus()}function r(t){var i=n.dom.getStyle(n.dom.getParent(n.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(n){n.active(n.settings.data===i)})}var u,f,e={};u=i("OL",n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"));f=i("UL",n.getParam("advlist_bullet_styles","default,circle,disc,square"));n.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:u,onshow:r,onselect:function(n){t("OL",n.control.settings.data)},onclick:function(){t("OL",!1)}});n.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:f,onshow:r,onselect:function(n){t("UL",n.control.settings.data)},onclick:function(){t("UL",!1)}})});tinymce.PluginManager.add("anchor",function(n){function t(){var t=n.selection.getNode(),i="";"A"==t.tagName&&(i=t.name||t.id||"");n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:i},onsubmit:function(t){n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:t.data.name}))}})}n.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:t,stateSelector:"a:not([href])"});n.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:t})});tinymce.PluginManager.add("autolink",function(n){function r(n){t(n,-1,"(",!0)}function u(n){t(n,0,"",!0)}function f(n){t(n,-1,"",!1)}function t(n,t,i){function y(n,t){if(0>t&&(t=0),3==n.nodeType){var i=n.data.length;t>i&&(t=i)}return t}function h(n,t){u.setStart(n,y(n,t))}function o(n,t){u.setEnd(n,y(n,t))}var u,f,c,r,p,l,e,s,v,a;if(u=n.selection.getRng(!0).cloneRange(),u.startOffset<5){if(s=u.endContainer.previousSibling,!s){if(!u.endContainer.firstChild||!u.endContainer.firstChild.nextSibling)return;s=u.endContainer.firstChild.nextSibling}if(v=s.length,h(s,v),o(s,v),u.endOffset<5)return;f=u.endOffset;r=s}else{if(r=u.endContainer,3!=r.nodeType&&r.firstChild){for(;3!=r.nodeType&&r.firstChild;)r=r.firstChild;3==r.nodeType&&(h(r,0),o(r,r.nodeValue.length))}f=1==u.endOffset?2:u.endOffset-1-t}c=f;do h(r,f>=2?f-2:0),o(r,f>=1?f-1:0),f-=1,a=u.toString();while(" "!=a&&""!==a&&160!=a.charCodeAt(0)&&f-2>=0&&a!=i);u.toString()==i||160==u.toString().charCodeAt(0)?(h(r,f),o(r,c),f+=1):0===u.startOffset?(h(r,0),o(r,c)):(h(r,f),o(r,c));l=u.toString();"."==l.charAt(l.length-1)&&o(r,c-1);l=u.toString();e=l.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i);e&&("www."==e[1]?e[1]="http://www.":/@$/.test(e[1])&&!/^mailto:/.test(e[1])&&(e[1]="mailto:"+e[1]),p=n.selection.getBookmark(),n.selection.setRng(u),n.execCommand("createlink",!1,e[1]+e[2]),n.selection.moveToBookmark(p),n.nodeChanged())}var i;return n.on("keydown",function(t){if(13==t.keyCode)return f(n)}),tinymce.Env.ie?void n.on("focus",function(){if(!i){i=!0;try{n.execCommand("AutoUrlDetect",!1,!0)}catch(t){}}}):(n.on("keypress",function(t){if(41==t.keyCode)return r(n)}),void n.on("keyup",function(t){if(32==t.keyCode)return u(n)}))});tinymce.PluginManager.add("autoresize",function(n){function f(){return n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen()}function i(r){var l,c,e,h,o,s,a,v,y=tinymce.DOM;if(c=n.getDoc()){if(e=c.body,h=c.documentElement,o=t.autoresize_min_height,!e||r&&"setcontent"===r.type&&r.initial||f())return void(e&&h&&(e.style.overflowY="auto",h.style.overflowY="auto"));a=n.dom.getStyle(e,"margin-top",!0);v=n.dom.getStyle(e,"margin-bottom",!0);s=e.offsetHeight+parseInt(a,10)+parseInt(v,10);(isNaN(s)||0>=s)&&(s=tinymce.Env.ie?e.scrollHeight:tinymce.Env.webkit&&0===e.clientHeight?0:e.offsetHeight);s>t.autoresize_min_height&&(o=s);t.autoresize_max_height&&s>t.autoresize_max_height?(o=t.autoresize_max_height,e.style.overflowY="auto",h.style.overflowY="auto"):(e.style.overflowY="hidden",h.style.overflowY="hidden",e.scrollTop=0);o!==u&&(l=o-u,y.setStyle(y.get(n.id+"_ifr"),"height",o+"px"),u=o,tinymce.isWebKit&&0>l&&i(r))}}function r(n,t,u){setTimeout(function(){i({});n--?r(n,t,u):u&&u()},t)}var t=n.settings,u=0;n.settings.inline||(t.autoresize_min_height=parseInt(n.getParam("autoresize_min_height",n.getElement().offsetHeight),10),t.autoresize_max_height=parseInt(n.getParam("autoresize_max_height",0),10),n.on("init",function(){var t=n.getParam("autoresize_overflow_padding",1);n.dom.setStyles(n.getBody(),{paddingBottom:n.getParam("autoresize_bottom_margin",50),paddingLeft:t,paddingRight:t})}),n.on("nodechange setcontent keyup FullscreenStateChanged",i),n.getParam("autoresize_on_init",!0)&&n.on("init",function(){r(20,100,function(){r(5,1e3)})}),n.addCommand("mceAutoResize",i))});tinymce.PluginManager.add("autosave",function(n){function s(n,t){return n=/^(\d+)([ms]?)$/.exec(""+(n||t)),(n[2]?{s:1e3,m:6e4}[n[2]]:1)*parseInt(n,10)}function u(){var n=parseInt(r.getItem(t+"time"),10)||0;return(new Date).getTime()-n>i.autosave_retention?(f(!1),!1):!0}function f(i){r.removeItem(t+"draft");r.removeItem(t+"time");i!==!1&&n.fire("RemoveDraft")}function h(){!o()&&n.isDirty()&&(r.setItem(t+"draft",n.getContent({format:"raw",no_events:!0})),r.setItem(t+"time",(new Date).getTime()),n.fire("StoreDraft"))}function e(){u()&&(n.setContent(r.getItem(t+"draft"),{format:"raw"}),n.fire("RestoreDraft"))}function v(){a||(setInterval(function(){n.removed||h()},i.autosave_interval),a=!0)}function c(){var t=this;t.disabled(!u());n.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!u())});v()}function l(){n.undoManager.beforeChange();e();f();n.undoManager.add()}function y(){var n;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft();!n&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(n=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),n}function o(t){var i=n.settings.forced_root_block;return t=tinymce.trim("undefined"==typeof t?n.getBody().innerHTML:t),""===t||new RegExp("^<"+i+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)<\/"+i+">|<br>$","i").test(t)}var t,a,i=n.settings,r=tinymce.util.LocalStorage;t=i.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-";t=t.replace(/\{path\}/g,document.location.pathname);t=t.replace(/\{query\}/g,document.location.search);t=t.replace(/\{id\}/g,n.id);i.autosave_interval=s(i.autosave_interval,"30s");i.autosave_retention=s(i.autosave_retention,"20m");n.addButton("restoredraft",{title:"Restore last draft",onclick:l,onPostRender:c});n.addMenuItem("restoredraft",{text:"Restore last draft",onclick:l,onPostRender:c,context:"file"});n.settings.autosave_restore_when_empty!==!1&&(n.on("init",function(){u()&&o()&&e()}),n.on("saveContent",function(){f()}));window.onbeforeunload=y;this.hasDraft=u;this.storeDraft=h;this.restoreDraft=e;this.removeDraft=f;this.isEmpty=o});!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(n){var t=this,i=n.getParam("bbcode_dialect","punbb").toLowerCase();n.on("beforeSetContent",function(n){n.content=t["_"+i+"_bbcode2html"](n.content)});n.on("postProcess",function(n){n.set&&(n.content=t["_"+i+"_bbcode2html"](n.content));n.get&&(n.content=t["_"+i+"_html2bbcode"](n.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(n){function t(t,i){n=n.replace(t,i)}return n=tinymce.trim(n),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),n},_punbb_bbcode2html:function(n){function t(t,i){n=n.replace(t,i)}return n=tinymce.trim(n),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"<\/strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"<\/em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"<\/u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2<\/a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1<\/a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2<\/font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1<\/span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1<\/span>&nbsp;'),n}});tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}();tinymce.PluginManager.add("charmap",function(n){function t(){function h(n){for(;n;){if("TD"==n.nodeName)return n;n=n.parentNode}}var t,u,f,e,o,r,s;for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',o=25,f=0;10>f;f++){for(t+="<tr>",u=0;o>u;u++)r=i[f*o+u],t+='<td title="'+r[1]+'"><div tabindex="-1" title="'+r[1]+'" role="button">'+(r?String.fromCharCode(parseInt(r[0],10)):"&nbsp;")+"<\/div><\/td>";t+="<\/tr>"}t+="<\/tbody><\/table>";s={type:"container",html:t,onclick:function(t){var i=t.target;"TD"==i.tagName&&(i=i.firstChild);"DIV"==i.tagName&&(n.execCommand("mceInsertContent",!1,i.firstChild.data),t.ctrlKey||e.close())},onmouseover:function(n){var t=h(n.target);t&&e.find("#preview").text(t.firstChild.firstChild.data)}};e=n.windowManager.open({title:"Special character",spacing:10,padding:10,items:[s,{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:100,minHeight:80}],buttons:[{text:"Close",onclick:function(){e.close()}}]})}var i=[["160","no-break space"],["38","ampersand"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"],["173","soft hyphen"]];n.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:t});n.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:t,context:"insert"})});tinymce.PluginManager.add("code",function(n){function t(){var t=n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:n.getParam("code_dialog_width",600),minHeight:n.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){n.focus();n.undoManager.transact(function(){n.setContent(t.data.code)});n.selection.setCursorLocation();n.nodeChanged()}});t.find("#code").value(n.getContent({source_view:!0}))}n.addCommand("mceCodeEditor",t);n.addButton("code",{icon:"code",tooltip:"Source code",onclick:t});n.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})});tinymce.PluginManager.add("colorpicker",function(n){function t(t,i){function u(n){var t=new tinymce.util.Color(n),i=t.toRgb();r.fromJSON({r:i.r,g:i.g,b:i.b,hex:t.toHex().substr(1)});f(t.toHex())}function f(n){r.find("#preview")[0].getEl().style.background=n}var r=n.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:i,onchange:function(){var n=this.rgb();r&&(r.find("#r").value(n.r),r.find("#g").value(n.g),r.find("#b").value(n.b),r.find("#hex").value(this.value().substr(1)),f(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var t,n,i=r.find("colorpicker")[0];return t=this.name(),n=this.value(),"hex"==t?(n="#"+n,u(n),void i.value(n)):(n={r:r.find("#r").value(),g:r.find("#g").value(),b:r.find("#b").value()},i.value(n),void u(n))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});u(i)}n.settings.color_picker_callback||(n.settings.color_picker_callback=t)});tinymce.PluginManager.add("contextmenu",function(n){var t,i=n.settings.contextmenu_never_use_native;n.on("contextmenu",function(r){var o,s=n.getDoc(),u,f,e;if(!r.ctrlKey||i){if(r.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&2==r.button&&s.caretRangeFromPoint&&n.selection.setRng(s.caretRangeFromPoint(r.x,r.y)),o=n.settings.contextmenu||"link image inserttable | cell row column deletetable",t)t.show();else{for(u=[],tinymce.each(o.split(/[ ,]/),function(t){var i=n.menuItems[t];"|"==t&&(i={text:t});i&&(i.shortcut="",u.push(i))}),f=0;f<u.length;f++)"|"==u[f].text&&(0===f||f==u.length-1)&&u.splice(f,1);t=new tinymce.ui.Menu({items:u,context:"contextmenu"}).addClass("contextmenu").renderTo();n.on("remove",function(){t.remove();t=null})}e={x:r.pageX,y:r.pageY};n.inline||(e=tinymce.DOM.getPos(n.getContentAreaContainer()),e.x+=r.clientX,e.y+=r.clientY);t.moveTo(e.x,e.y)}})});tinymce.PluginManager.add("directionality",function(n){function t(t){var u,i=n.dom,r=n.selection.getSelectedBlocks();r.length&&(u=i.getAttrib(r[0],"dir"),tinymce.each(r,function(n){i.getParent(n.parentNode,"*[dir='"+t+"']",i.getRoot())||(u!=t?i.setAttrib(n,"dir",t):i.setAttrib(n,"dir",null))}),n.nodeChanged())}function i(n){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(i){t.push(i+"[dir="+n+"]")}),t.join(",")}n.addCommand("mceDirectionLTR",function(){t("ltr")});n.addCommand("mceDirectionRTL",function(){t("rtl")});n.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:i("ltr")});n.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:i("rtl")})});tinymce.PluginManager.add("emoticons",function(n,t){function i(){var n;return n='<table role="list" class="mce-grid">',tinymce.each(r,function(i){n+="<tr>";tinymce.each(i,function(i){var r=t+"/img/smiley-"+i+".gif";n+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+i+'" tabindex="-1" role="option" aria-label="'+i+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /><\/a><\/td>'});n+="<\/tr>"}),n+="<\/table>"}var r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];n.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:i,onclick:function(t){var i=n.dom.getParent(t.target,"a");i&&(n.insertContent('<img src="'+i.getAttribute("data-mce-url")+'" alt="'+i.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})});tinymce.PluginManager.add("fullpage",function(n){function e(){var t=o();n.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(n){s(tinymce.extend(t,n.data))}})}function o(){function f(n,t){var i=n.attr(t);return i||""}var t,o,e=u(),i={};return i.fontface=n.getParam("fullpage_default_fontface",""),i.fontsize=n.getParam("fullpage_default_fontsize",""),t=e.firstChild,7==t.type&&(i.xml_pi=!0,o=/encoding="([^"]+)"/.exec(t.value),o&&(i.docencoding=o[1])),t=e.getAll("#doctype")[0],t&&(i.doctype="<!DOCTYPE"+t.value+">"),t=e.getAll("title")[0],t&&t.firstChild&&(i.title=t.firstChild.value),r(e.getAll("meta"),function(n){var t,r=n.attr("name"),u=n.attr("http-equiv");r?i[r.toLowerCase()]=n.attr("content"):"Content-Type"==u&&(t=/charset\s*=\s*(.*)\s*/gi.exec(n.attr("content")),t&&(i.docencoding=t[1]))}),t=e.getAll("html")[0],t&&(i.langcode=f(t,"lang")||f(t,"xml:lang")),i.stylesheets=[],tinymce.each(e.getAll("link"),function(n){"stylesheet"==n.attr("rel")&&i.stylesheets.push(n.attr("href"))}),t=e.getAll("body")[0],t&&(i.langdir=f(t,"dir"),i.style=f(t,"style"),i.visited_color=f(t,"vlink"),i.link_color=f(t,"link"),i.active_color=f(t,"alink")),i}function s(f){function h(n,t,i){n.attr(t,i?i:void 0)}function c(n){s.firstChild?s.insert(n,s.firstChild):s.append(n)}var o,s,a,e,v,y=n.dom,l;o=u();s=o.getAll("head")[0];s||(e=o.getAll("html")[0],s=new t("head",1),e.firstChild?e.insert(s,e.firstChild,!0):e.append(s));e=o.firstChild;f.xml_pi?(v='version="1.0"',f.docencoding&&(v+=' encoding="'+f.docencoding+'"'),7!=e.type&&(e=new t("xml",7),o.insert(e,o.firstChild,!0)),e.value=v):e&&7==e.type&&e.remove();e=o.getAll("#doctype")[0];f.doctype?(e||(e=new t("#doctype",10),f.xml_pi?o.insert(e,o.firstChild):c(e)),e.value=f.doctype.substring(9,f.doctype.length-1)):e&&e.remove();e=null;r(o.getAll("meta"),function(n){"Content-Type"==n.attr("http-equiv")&&(e=n)});f.docencoding?(e||(e=new t("meta",1),e.attr("http-equiv","Content-Type"),e.shortEnded=!0,c(e)),e.attr("content","text/html; charset="+f.docencoding)):e&&e.remove();e=o.getAll("title")[0];f.title?(e?e.empty():(e=new t("title",1),c(e)),e.append(new t("#text",3)).value=f.title):e&&e.remove();r("keywords,description,author,copyright,robots".split(","),function(n){for(var r,s=o.getAll("meta"),u=f[n],i=0;i<s.length;i++)if(r=s[i],r.attr("name")==n)return void(u?r.attr("content",u):r.remove());u&&(e=new t("meta",1),e.attr("name",n),e.attr("content",u),e.shortEnded=!0,c(e))});l={};tinymce.each(o.getAll("link"),function(n){"stylesheet"==n.attr("rel")&&(l[n.attr("href")]=n)});tinymce.each(f.stylesheets,function(n){l[n]||(e=new t("link",1),e.attr({rel:"stylesheet",text:"text/css",href:n}),e.shortEnded=!0,c(e));delete l[n]});tinymce.each(l,function(n){n.remove()});e=o.getAll("body")[0];e&&(h(e,"dir",f.langdir),h(e,"style",f.style),h(e,"vlink",f.visited_color),h(e,"link",f.link_color),h(e,"alink",f.active_color),y.setAttribs(n.getBody(),{style:f.style,dir:f.dir,vLink:f.visited_color,link:f.link_color,aLink:f.active_color}));e=o.getAll("html")[0];e&&(h(e,"lang",f.langcode),h(e,"xml:lang",f.langcode));s.firstChild||s.remove();a=new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(o);i=a.substring(0,a.indexOf("<\/body>"))}function u(){return new tinymce.html.DomParser({validate:!1,root_name:"#document"}).parse(i)}function h(t){function w(n){return n.replace(/<\/?[A-Z]+/g,function(n){return n.toLowerCase()})}var s,h,v,e,o=t.content,y="",l=n.dom,p,a;t.selection||"raw"==t.format&&i||t.source_view&&n.getParam("fullpage_hide_in_source_view")||(o=o.replace(/<(\/?)BODY/gi,"<$1body"),s=o.indexOf("<body"),-1!=s?(s=o.indexOf(">",s),i=w(o.substring(0,s+1)),h=o.indexOf("<\/body",s),-1==h&&(h=o.length),t.content=o.substring(s+1,h),f=w(o.substring(h))):(i=c(),f="\n<\/body>\n<\/html>"),v=u(),r(v.getAll("style"),function(n){n.firstChild&&(y+=n.firstChild.value)}),e=v.getAll("body")[0],e&&l.setAttribs(n.getBody(),{style:e.attr("style")||"",dir:e.attr("dir")||"",vLink:e.attr("vlink")||"",link:e.attr("link")||"",aLink:e.attr("alink")||""}),l.remove("fullpage_styles"),p=n.getDoc().getElementsByTagName("head")[0],y&&(l.add(p,"style",{id:"fullpage_styles"},y),e=l.get("fullpage_styles"),e.styleSheet&&(e.styleSheet.cssText=y)),a={},tinymce.each(p.getElementsByTagName("link"),function(n){"stylesheet"==n.rel&&n.getAttribute("data-mce-fullpage")&&(a[n.href]=n)}),tinymce.each(v.getAll("link"),function(n){var t=n.attr("href");a[t]||"stylesheet"!=n.attr("rel")||l.add(p,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"});delete a[t]}),tinymce.each(a,function(n){n.parentNode.removeChild(n)}))}function c(){var t,i="",r="";return n.getParam("fullpage_default_xml_pi")&&(i+='<?xml version="1.0" encoding="'+n.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),i+=n.getParam("fullpage_default_doctype","<!DOCTYPE html>"),i+="\n<html>\n<head>\n",(t=n.getParam("fullpage_default_title"))&&(i+="<title>"+t+"<\/title>\n"),(t=n.getParam("fullpage_default_encoding"))&&(i+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=n.getParam("fullpage_default_font_family"))&&(r+="font-family: "+t+";"),(t=n.getParam("fullpage_default_font_size"))&&(r+="font-size: "+t+";"),(t=n.getParam("fullpage_default_text_color"))&&(r+="color: "+t+";"),i+("<\/head>\n<body"+(r?' style="'+r+'"':"")+">\n")}function l(t){t.selection||t.source_view&&n.getParam("fullpage_hide_in_source_view")||(t.content=tinymce.trim(i)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(f))}var i,f,r=tinymce.each,t=tinymce.html.Node;n.addCommand("mceFullPageProperties",e);n.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"});n.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"});n.on("BeforeSetContent",h);n.on("GetContent",l)});tinymce.PluginManager.add("fullscreen",function(n){function h(){var t,i,n=window,u=document,r=u.body;return r.offsetWidth&&(t=r.offsetWidth,i=r.offsetHeight),n.innerWidth&&n.innerHeight&&(t=n.innerWidth,i=n.innerHeight),{w:t,h:i}}function r(){function v(){t.setStyle(a,"height",h().h-(l.clientHeight-a.clientHeight))}var r,l,a,c,y=document.body,p=document.documentElement;i=!i;l=n.getContainer();r=l.style;a=n.getContentAreaContainer().firstChild;c=a.style;i?(o=c.width,s=c.height,c.width=c.height="100%",f=r.width,e=r.height,r.width=r.height="",t.addClass(y,"mce-fullscreen"),t.addClass(p,"mce-fullscreen"),t.addClass(l,"mce-fullscreen"),t.bind(window,"resize",v),v(),u=v):(c.width=o,c.height=s,f&&(r.width=f),e&&(r.height=e),t.removeClass(y,"mce-fullscreen"),t.removeClass(p,"mce-fullscreen"),t.removeClass(l,"mce-fullscreen"),t.unbind(window,"resize",u));n.fire("FullscreenStateChanged",{state:i})}var o,s,u,f,e,i=!1,t=tinymce.DOM;if(!n.settings.inline)return(n.on("init",function(){n.addShortcut("Ctrl+Alt+F","",r)}),n.on("remove",function(){u&&t.unbind(window,"resize",u)}),n.addCommand("mceFullScreen",r),n.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:r,onPostRender:function(){var t=this;n.on("FullscreenStateChanged",function(n){t.active(n.state)})},context:"view"}),n.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:r,onPostRender:function(){var t=this;n.on("FullscreenStateChanged",function(n){t.active(n.state)})}}),{isFullscreen:function(){return i}})});tinymce.PluginManager.add("hr",function(n){n.addCommand("InsertHorizontalRule",function(){n.execCommand("mceInsertContent",!1,"<hr />")});n.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});n.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})});tinymce.PluginManager.add("image",function(n){function u(n,t){function u(n,r){i.parentNode&&i.parentNode.removeChild(i);t({width:n,height:r})}var i=document.createElement("img"),r;i.onload=function(){u(i.clientWidth,i.clientHeight)};i.onerror=function(){u()};r=i.style;r.visibility="hidden";r.position="fixed";r.bottom=r.left=0;r.width=r.height="auto";document.body.appendChild(i);i.src=n}function r(n,t,i){function r(n,i){return i=i||[],tinymce.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t(u));i.push(u)}),i}return r(n,i||[])}function t(t){return function(){var i=n.settings.image_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):"function"==typeof i?i(t):t(i)}}function i(t){function a(){var i,r,n,t;i=o.find("#width")[0];r=o.find("#height")[0];i&&r&&(n=i.value(),t=r.value(),o.find("#constrain")[0].checked()&&s&&h&&n&&t&&(s!=n?(t=Math.round(n/s*t),r.value(t)):(n=Math.round(t/h*n),i.value(n))),s=n,h=t)}function p(){function t(t){function r(){t.onload=t.onerror=null;n.selection&&(n.selection.select(t),n.nodeChanged())}t.onload=function(){i.width||i.height||!y||e.setAttribs(t,{width:t.clientWidth,height:t.clientHeight});r()};t.onerror=r}w();a();i=tinymce.extend(i,o.toJSON());i.alt||(i.alt="");""===i.width&&(i.width=null);""===i.height&&(i.height=null);i.style||(i.style=null);i={src:i.src,alt:i.alt,width:i.width,height:i.height,style:i.style,"class":i["class"]};n.undoManager.transact(function(){return i.src?(f?e.setAttribs(f,i):(i.id="__mcenew",n.focus(),n.selection.setContent(e.createHTML("img",i)),f=e.get("__mcenew"),e.setAttrib(f,"id",null)),void t(f)):void(f&&(e.remove(f),n.focus(),n.nodeChanged()))})}function v(n){return n&&(n=n.replace(/px$/,"")),n}function k(t){var i=t.meta||{};l&&l.value(n.convertURL(this.value(),"src"));tinymce.each(i,function(n,t){o.find("#"+t).value(n)});i.width||i.height||u(this.value(),function(n){n.width&&n.height&&y&&(s=n.width,h=n.height,o.find("#width").value(s),o.find("#height").value(h))})}function w(){function r(n){return n.length>0&&/^[0-9]+$/.test(n)&&(n+="px"),n}if(n.settings.image_advtab){var i=o.toJSON(),t=e.parseStyle(i.style);delete t.margin;t["margin-top"]=t["margin-bottom"]=r(i.vspace);t["margin-left"]=t["margin-right"]=r(i.hspace);t["border-width"]=r(i.border);o.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(t))))}}var o,s,h,l,b,i={},e=n.dom,f=n.selection.getNode(),y=n.settings.image_dimensions!==!1,c;s=e.getAttrib(f,"width");h=e.getAttrib(f,"height");"IMG"!=f.nodeName||f.getAttribute("data-mce-object")||f.getAttribute("data-mce-placeholder")?f=null:i={src:e.getAttrib(f,"src"),alt:e.getAttrib(f,"alt"),"class":e.getAttrib(f,"class"),width:s,height:h};t&&(l={type:"listbox",label:"Image list",values:r(t,function(t){t.value=n.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:i.src&&n.convertURL(i.src,"src"),onselect:function(n){var t=o.find("#alt");(!t.value()||n.lastControl&&t.value()==n.lastControl.text())&&t.value(n.control.text());o.find("#src").value(n.control.value()).fire("change")},onPostRender:function(){l=this}});n.settings.image_class_list&&(b={name:"class",type:"listbox",label:"Class",values:r(n.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"img",classes:[t.value]})})})});c=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:k},l];n.settings.image_description!==!1&&c.push({name:"alt",type:"textbox",label:"Image description"});y&&c.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:a,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:a,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]});c.push(b);n.settings.image_advtab?(f&&(i.hspace=v(f.style.marginLeft||f.style.marginRight),i.vspace=v(f.style.marginTop||f.style.marginBottom),i.border=v(f.style.borderWidth),i.style=n.dom.serializeStyle(n.dom.parseStyle(n.dom.getAttrib(f,"style")))),o=n.windowManager.open({title:"Insert/edit image",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:c},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox"},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:w},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:p})):o=n.windowManager.open({title:"Insert/edit image",data:i,body:c,onSubmit:p})}n.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:t(i),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"});n.addMenuItem("image",{icon:"image",text:"Insert image",onclick:t(i),context:"insert",prependToContext:!0});n.addCommand("mceImage",t(i))});tinymce.PluginManager.add("importcss",function(n){function i(n){return"string"==typeof n?function(t){return-1!==t.indexOf(n)}:n instanceof RegExp?function(t){return n.test(t)}:n}function f(i,r){function u(n,i){var e,o=n.href;if(o&&r(o,i)){t(n.imports,function(n){u(n,!0)});try{e=n.cssRules||n.rules}catch(s){}t(e,function(n){n.styleSheet?u(n.styleSheet,!0):n.selectorText&&t(n.selectorText.split(","),function(n){f.push(tinymce.trim(n))})})}}var f=[],e={};t(n.contentCSS,function(n){e[n]=!0});r||(r=function(n,t){return t||e[n]});try{t(i.styleSheets,function(n){u(n)})}catch(o){}return f}function r(t){var i,u=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(u){var r=u[1],f=u[2].substr(1).split(".").join(" "),e=tinymce.makeMap("a,img");return u[1]?(i={title:t},n.schema.getTextBlockElements()[r]?i.block=r:n.schema.getBlockElements()[r]||e[r.toLowerCase()]?i.selector=r:i.inline=r):u[2]&&(i={inline:"span",title:t.substr(1),classes:f}),n.settings.importcss_merge_classes!==!1?i.classes=f:i.attributes={"class":f},i}}var u=this,t=tinymce.each;n.on("renderFormatsMenu",function(e){var s=n.settings,c={},a=s.importcss_selector_converter||r,l=i(s.importcss_selector_filter),h=e.control,o;n.settings.importcss_append||h.items().remove();o=[];tinymce.each(s.importcss_groups,function(n){n=tinymce.extend({},n);n.filter=i(n.filter);o.push(n)});t(f(e.doc||n.getDoc(),i(s.importcss_file_filter)),function(t){var f,r,e,i,s;if(-1===t.indexOf(".mce-")&&!c[t]&&(!l||l(t))){if(r=a.call(u,t),r){if(e=r.name||tinymce.DOM.uniqueId(),o)for(i=0;i<o.length;i++)if(!o[i].filter||o[i].filter(t)){o[i].item||(o[i].item={text:o[i].title,menu:[]});f=o[i].item.menu;break}n.formatter.register(e,r);s=tinymce.extend({},h.settings.itemDefaults,{text:r.title,format:e});f?f.push(s):h.add(s)}c[t]=!0}});t(o,function(n){h.add(n.item)});e.control.renderNew()});u.convertSelectorToFormat=r});tinymce.PluginManager.add("insertdatetime",function(n){function i(t,i){function r(n,t){if(n=""+n,n.length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n}return i=i||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+i.getFullYear()),t=t.replace("%y",""+i.getYear()),t=t.replace("%m",r(i.getMonth()+1,2)),t=t.replace("%d",r(i.getDate(),2)),t=t.replace("%H",""+r(i.getHours(),2)),t=t.replace("%M",""+r(i.getMinutes(),2)),t=t.replace("%S",""+r(i.getSeconds(),2)),t=t.replace("%I",""+((i.getHours()+11)%12+1)),t=t.replace("%p",""+(i.getHours()<12?"AM":"PM")),t=t.replace("%B",""+n.translate(h[i.getMonth()])),t=t.replace("%b",""+n.translate(s[i.getMonth()])),t=t.replace("%A",""+n.translate(o[i.getDay()])),t=t.replace("%a",""+n.translate(e[i.getDay()])),t=t.replace("%%","%")}function t(t){var r=i(t),f,u;if(n.settings.insertdatetime_element&&(f=i(/%[HMSIp]/.test(t)?"%Y-%m-%dT%H:%M":"%Y-%m-%d"),r='<time datetime="'+f+'">'+r+"<\/time>",u=n.dom.getParent(n.selection.getStart(),"time"),u))return void n.dom.setOuterHTML(u,r);n.insertContent(r)}var f,r,e="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="January February March April May June July August September October November December".split(" "),u=[];n.addCommand("mceInsertDate",function(){t(n.getParam("insertdatetime_dateformat",n.translate("%Y-%m-%d")))});n.addCommand("mceInsertTime",function(){t(n.getParam("insertdatetime_timeformat",n.translate("%H:%M:%S")))});n.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){t(f||r)},menu:u});tinymce.each(n.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(n){r||(r=n);u.push({text:i(n),onclick:function(){f=n;t(n)}})});n.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:u,context:"insert"})});!function(n){n.on("AddEditor",function(n){n.editor.settings.inline_styles=!1});n.PluginManager.add("legacyoutput",function(t,i,r){t.on("init",function(){var i="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",u=n.explode(t.settings.font_size_style_values),r=t.schema;t.formatter.register({alignleft:{selector:i,attributes:{align:"left"}},aligncenter:{selector:i,attributes:{align:"center"}},alignright:{selector:i,attributes:{align:"right"}},alignjustify:{selector:i,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return n.inArray(u,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});n.each("b,i,u,strike".split(","),function(n){r.addValidElements(n+"[*]")});r.getElementRule("font")||r.addValidElements("font[face|size|color|style]");n.each(i.split(","),function(n){var t=r.getElementRule(n);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})});t.addButton("fontsizeselect",function(){var n=[],i=t.settings.fontsize_formats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return t.$.each(i.split(" "),function(t,i){var u=i,f=i,r=i.split("=");r.length>1&&(u=r[0],f=r[1]);n.push({text:u,value:f})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:function(){var n=this;t.on("NodeChange",function(){var i;i=t.dom.getParent(t.selection.getNode(),"font");n.value(i?i.size:"")})},onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)}}});t.addButton("fontselect",function(){function i(n){n=n.replace(/;$/,"").split(";");for(var t=n.length;t--;)n[t]=n[t].split("=");return n}var n=[],u=i(t.settings.font_formats||"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.each(u,function(t,i){n.push({text:{raw:i[0]},value:i[1],textStyle:-1==i[1].indexOf("dings")?"font-family:"+i[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:function(){var n=this;t.on("NodeChange",function(){var i;i=t.dom.getParent(t.selection.getNode(),"font");n.value(i?i.face:"")})},onselect:function(n){n.control.settings.value&&t.execCommand("FontName",!1,n.control.settings.value)}}})})}(tinymce);tinymce.PluginManager.add("link",function(n){function i(t){return function(){var i=n.settings.link_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):"function"==typeof i?i(t):t(i)}}function r(n,t,i){function r(n,i){return i=i||[],tinymce.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t&&t(u));i.push(u)}),i}return r(n,i||[])}function t(t){function a(n){var t=h.find("#text");(!t.value()||n.lastControl&&t.value()==n.lastControl.text())&&t.value(n.control.text());h.find("#href").value(n.control.value())}function g(t){var i=[];return tinymce.each(n.dom.select("a:not([href])"),function(n){var r=n.name||n.id;r&&i.push({text:r,value:"#"+r,selected:-1!=t.indexOf("#"+r)})}),i.length?(i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:a}):void 0}function v(){!l&&0===i.text.length&&o&&this.parent().parent().find("#text")[0].value(this.value())}function nt(t){var i=t.meta||{};s&&s.value(n.convertURL(this.value(),"href"));tinymce.each(t.meta,function(n,t){h.find("#"+t).value(n)});i.text||v.call(this)}function tt(n){var r=c.getContent(),t,i;if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||-1==r.indexOf("href=")))return!1;if(n){if(i=n.childNodes,0===i.length)return!1;for(t=i.length-1;t>=0;t--)if(3!=i[t].nodeType)return!1}return!0}var y,u,l,h,o,p,s,w,b,k,d,e,i={},c=n.selection,f=n.dom;y=c.getNode();u=f.getParent(y,"a[href]");o=tt();i.text=l=u?u.innerText||u.textContent:c.getContent({format:"text"});i.href=u?f.getAttrib(u,"href"):"";(e=f.getAttrib(u,"target"))?i.target=e:n.settings.default_link_target&&(i.target=n.settings.default_link_target);(e=f.getAttrib(u,"rel"))&&(i.rel=e);(e=f.getAttrib(u,"class"))&&(i["class"]=e);(e=f.getAttrib(u,"title"))&&(i.title=e);o&&(p={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){i.text=this.value()}});t&&(s={type:"listbox",label:"Link list",values:r(t,function(t){t.value=n.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:a,value:n.convertURL(i.href,"href"),onPostRender:function(){s=this}});n.settings.target_list!==!1&&(n.settings.target_list||(n.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),b={name:"target",type:"listbox",label:"Target",values:r(n.settings.target_list)});n.settings.rel_list&&(w={name:"rel",type:"listbox",label:"Rel",values:r(n.settings.rel_list)});n.settings.link_class_list&&(k={name:"class",type:"listbox",label:"Class",values:r(n.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"a",classes:[t.value]})})})});n.settings.link_title!==!1&&(d={name:"title",type:"textbox",label:"Title",value:i.title});h=n.windowManager.open({title:"Insert link",data:i,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:nt,onkeyup:v},p,d,g(i.href),s,w,b,k],onSubmit:function(t){function s(t,i){var r=n.selection.getRng();window.setTimeout(function(){n.windowManager.confirm(t,function(t){n.selection.setRng(r);i(t)})},0)}function e(){var t={href:r,target:i.target?i.target:null,rel:i.rel?i.rel:null,"class":i["class"]?i["class"]:null,title:i.title?i.title:null};u?(n.focus(),o&&i.text!=l&&("innerText"in u?u.innerText=i.text:u.textContent=i.text),f.setAttribs(u,t),c.select(u),n.undoManager.add()):o?n.insertContent(f.createHTML("a",t,f.encode(i.text))):n.execCommand("mceInsertLink",!1,t)}var r;return i=tinymce.extend(i,t.data),(r=i.href)?r.indexOf("@")>0&&-1==r.indexOf("//")&&-1==r.indexOf("mailto:")?void s("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(n){n&&(r="mailto:"+r);e()}):/^\s*www\./i.test(r)?void s("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(n){n&&(r="http://"+r);e()}):void e():void n.execCommand("unlink")}})}n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:i(t),stateSelector:"a[href]"});n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"});n.addShortcut("Ctrl+K","",i(t));n.addCommand("mceLink",i(t));this.showDialog=t;n.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:i(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})});tinymce.PluginManager.add("lists",function(n){function t(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)}function i(n){return n.parentNode.firstChild==n}function f(n){return n.parentNode.lastChild==n}function r(t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]}var u=this;n.on("init",function(){function h(n){function i(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];1==r.nodeType&&(f=e.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):e.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u}var t={};return i(!0),n.collapsed||i(),t}function c(n){function i(t){function f(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t==n)return i;(1!=t.nodeType||"bookmark"!=t.getAttribute("data-mce-type"))&&i++;t=t.nextSibling}return-1}var i,r,u;i=u=n[t?"startContainer":"endContainer"];r=n[t?"startOffset":"endOffset"];i&&(1==i.nodeType&&(r=f(i),i=i.parentNode,e.remove(u)),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=e.createRng();t.setStart(n.startContainer,n.startOffset);n.endContainer&&t.setEnd(n.endContainer,n.endOffset);o.setRng(t)}function s(t,i){var u,r,o,f=e.createFragment(),h=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(r=e.create(i),r.tagName===n.settings.forced_root_block&&e.setAttribs(r,n.settings.forced_root_block_attrs),f.appendChild(r)),t)for(;u=t.firstChild;)s=u.nodeName,o||"SPAN"==s&&"bookmark"==u.getAttribute("data-mce-type")||(o=!0),h[s]?(f.appendChild(u),r=null):i?(r||(r=e.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?o||tinymce.Env.ie&&!(tinymce.Env.ie>10)||r.appendChild(e.create("br",{"data-mce-bogus":"1"})):f.appendChild(e.create("br")),f}function l(){return tinymce.grep(o.getSelectedBlocks(),function(n){return/^(LI|DT|DD)$/.test(n.nodeName)})}function y(n,t,i){var r,u,f=e.select('span[data-mce-type="bookmark"]',n);i=i||s(t);r=e.createRng();r.setStartAfter(t);r.setEndAfter(n);u=r.extractContents();e.isEmpty(u)||e.insertAfter(u,n);e.insertAfter(i,n);e.isEmpty(t.parentNode)&&(tinymce.each(f,function(n){t.parentNode.parentNode.insertBefore(n,t.parentNode)}),e.remove(t.parentNode));e.remove(t)}function p(n){var i,r;if(i=n.nextSibling,i&&t(i)&&i.nodeName==n.nodeName){for(;r=i.firstChild;)n.appendChild(r);e.remove(i)}if(i=n.previousSibling,i&&t(i)&&i.nodeName==n.nodeName){for(;r=i.firstChild;)n.insertBefore(r,n.firstChild);e.remove(i)}}function g(n){tinymce.each(tinymce.grep(e.select("ol,ul",n)),function(n){var i,r=n.parentNode;"LI"==r.nodeName&&r.firstChild==n&&(i=r.previousSibling,i&&"LI"==i.nodeName&&(i.appendChild(n),e.isEmpty(r)&&e.remove(r)));t(r)&&(i=r.previousSibling,i&&"LI"==i.nodeName&&i.appendChild(n))})}function w(n){function h(n){e.isEmpty(n)&&e.remove(n)}var o,u=n.parentNode,r=u.parentNode;return"DD"==n.nodeName?(e.rename(n,"DT"),!0):i(n)&&f(n)?("LI"==r.nodeName?(e.insertAfter(n,r),h(r),e.remove(u)):t(r)?e.remove(u,!0):(r.insertBefore(s(n),u),e.remove(u)),!0):i(n)?("LI"==r.nodeName?(e.insertAfter(n,r),n.appendChild(u),h(r)):t(r)?r.insertBefore(n,u):(r.insertBefore(s(n),u),e.remove(n)),!0):f(n)?("LI"==r.nodeName?e.insertAfter(n,r):t(r)?e.insertAfter(n,u):(e.insertAfter(s(n),u),e.remove(n)),!0):("LI"==r.nodeName?(u=r,o=s(n,"LI")):o=t(r)?s(n,"LI"):s(n),y(u,n,o),g(u.parentNode),!0)}function nt(n){function u(i,r){var u;if(t(i)){for(;u=n.lastChild.firstChild;)r.appendChild(u);e.remove(i)}}var i,r;return"DT"==n.nodeName?(e.rename(n,"DD"),!0):(i=n.previousSibling,i&&t(i)?(i.appendChild(n),!0):i&&"LI"==i.nodeName&&t(i.lastChild)?(i.lastChild.appendChild(n),u(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t(i)?(i.insertBefore(n,i.firstChild),!0):i&&"LI"==i.nodeName&&t(n.lastChild)?!1:(i=n.previousSibling,i&&"LI"==i.nodeName?(r=e.create(n.parentNode.nodeName),i.appendChild(r),r.appendChild(n),u(n.lastChild,r),!0):!1)))}function b(){var i=l(),r,t;if(i.length){for(r=h(o.getRng(!0)),t=0;t<i.length&&(nt(i[t])||0!==t);t++);return c(r),n.nodeChanged(),!0}}function k(){var i=l(),t,u,f,e,r;if(i.length){for(f=h(o.getRng(!0)),e=n.getBody(),t=i.length;t--;)for(r=i[t].parentNode;r&&r!=e;){for(u=i.length;u--;)if(i[u]===r){i.splice(t,1);break}r=r.parentNode}for(t=0;t<i.length&&(w(i[t])||0!==t);t++);return c(f),n.nodeChanged(),!0}}function tt(i){function s(){function o(n){var t,i;for(t=u[n?"startContainer":"endContainer"],i=u[n?"startOffset":"endOffset"],1==t.nodeType&&(t=t.childNodes[Math.min(i,t.childNodes.length-1)]||t);t.parentNode!=s;){if(r(t)||/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var t,f=[],s=n.getBody(),c=o(!0),l=o(),h=[],i=c;i&&(h.push(i),i!=l);i=i.nextSibling);return tinymce.each(h,function(n){if(r(n))return f.push(n),void(t=null);if(e.isBlock(n)||"BR"==n.nodeName)return"BR"==n.nodeName&&e.remove(n),void(t=null);var i=n.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(n)&&(r(i)||!i&&n.parentNode==s)?void(t=null):(t||(t=e.create("p"),n.parentNode.insertBefore(t,n),f.push(t)),void t.appendChild(n))}),f}var u=o.getRng(!0),l=h(u),f="LI";i=i.toUpperCase();"DL"==i&&(f="DT");tinymce.each(s(),function(n){var u,r;r=n.previousSibling;r&&t(r)&&r.nodeName==i?(u=r,n=e.rename(n,f),r.appendChild(n)):(u=e.create(i),n.parentNode.insertBefore(u,n),u.appendChild(n),n=e.rename(n,f));p(u)});c(l)}function d(){var i=h(o.getRng(!0)),r=n.getBody();tinymce.each(l(),function(n){var i,u;if(e.isEmpty(n))return void w(n);for(i=n;i&&i!=r;i=i.parentNode)t(i)&&(u=i);y(u,n)});c(i)}function a(n){var t=e.getParent(o.getStart(),"OL,UL,DL"),i;t?t.nodeName==n?d(n):(i=h(o.getRng(!0)),p(e.rename(t,n)),c(i)):tt(n)}function v(t){return function(){var i=e.getParent(n.selection.getStart(),"UL,OL,DL");return i&&i.nodeName==t}}var e=n.dom,o=n.selection;u.backspaceDelete=function(n){function l(n,t){var i=n.startContainer,r=n.startOffset,u;if(3==i.nodeType&&(t?r<i.data.length:r>0))return i;for(u=new tinymce.dom.TreeWalker(n.startContainer);i=u[t?"next":"prev"]();)if(3==i.nodeType&&i.data.length>0)return i}function f(n,i){var r,u,f=n.parentNode;for(t(i.lastChild)&&(u=i.lastChild),r=i.lastChild,r&&"BR"==r.nodeName&&n.hasChildNodes()&&e.remove(r);r=n.firstChild;)i.appendChild(r);u&&i.appendChild(u);e.remove(n);e.isEmpty(f)&&e.remove(f)}var i,u,r,s;if(o.isCollapsed()&&(i=e.getParent(o.getStart(),"LI"),i)){if(u=o.getRng(!0),r=e.getParent(l(u,n),"LI"),r&&r!=i)return s=h(u),n?f(r,i):f(i,r),c(s),!0;if(!r&&!n&&d(i.parentNode.nodeName))return!0}};n.addCommand("Indent",function(){if(!b())return!0});n.addCommand("Outdent",function(){if(!k())return!0});n.addCommand("InsertUnorderedList",function(){a("UL")});n.addCommand("InsertOrderedList",function(){a("OL")});n.addCommand("InsertDefinitionList",function(){a("DL")});n.addQueryStateHandler("InsertUnorderedList",v("UL"));n.addQueryStateHandler("InsertOrderedList",v("OL"));n.addQueryStateHandler("InsertDefinitionList",v("DL"));n.on("keydown",function(t){9==t.keyCode&&n.dom.getParent(n.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?k():b())})});n.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;n.on("nodechange",function(){for(var r,f=n.selection.getSelectedBlocks(),e=!1,u=0,o=f.length;!e&&o>u;u++)r=f[u].nodeName,e="LI"==r&&i(f[u])||"UL"==r||"OL"==r||"DD"==r;t.disabled(e)})}});n.on("keydown",function(n){n.keyCode==tinymce.util.VK.BACKSPACE?u.backspaceDelete()&&n.preventDefault():n.keyCode==tinymce.util.VK.DELETE&&u.backspaceDelete(!0)&&n.preventDefault()})});tinymce.PluginManager.add("media",function(n,t){function u(n){return-1!=n.indexOf(".mp3")?"audio/mpeg":-1!=n.indexOf(".wav")?"audio/wav":-1!=n.indexOf(".mp4")?"video/mp4":-1!=n.indexOf(".webm")?"video/webm":-1!=n.indexOf(".ogg")?"video/ogg":-1!=n.indexOf(".swf")?"application/x-shockwave-flash":""}function r(t){var r=n.settings.media_scripts,i;if(r)for(i=0;i<r.length;i++)if(-1!==t.indexOf(r[i].filter))return r[i]}function f(){function a(n){var e,o,t,i;e=r.find("#width")[0];o=r.find("#height")[0];t=e.value();i=o.value();r.find("#constrain")[0].checked()&&u&&f&&t&&i&&(n.control==e?(i=Math.round(t/u*i),o.value(i)):(t=Math.round(i/f*t),e.value(t)));u=t;f=i}function v(){t=i(this.value());this.parent().parent().fromJSON(t)}var r,u,f,t,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(n){tinymce.each(n.meta,function(n,t){r.find("#"+t).value(n)})}}],c;n.settings.media_alt_source!==!1&&o.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"});n.settings.media_poster!==!1&&o.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"});n.settings.media_dimensions!==!1&&o.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:a},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:a},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]});t=h(n.selection.getNode());u=t.width;f=t.height;c={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:s(),multiline:!0,label:"Source"};c[l]=v;r=n.windowManager.open({title:"Insert/edit video",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){t=i(this.next().find("#embed").value());this.fromJSON(t)},items:o},{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(e(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},c]}],onSubmit:function(){var u,t,r,i;for(u=n.dom.select("img[data-mce-object]"),n.insertContent(e(this.toJSON())),t=n.dom.select("img[data-mce-object]"),r=0;r<u.length;r++)for(i=t.length-1;i>=0;i--)u[r]==t[i]&&t.splice(i,1);n.selection.select(t[0]);n.nodeChanged()}})}function s(){var t=n.selection.getNode();if(t.getAttribute("data-mce-object"))return n.selection.getContent()}function e(f){var e="",s;return!f.source1&&(tinymce.extend(f,i(f.embed)),!f.source1)?"":((f.source2||(f.source2=""),f.poster||(f.poster=""),f.source1=n.convertURL(f.source1,"source"),f.source2=n.convertURL(f.source2,"source"),f.source1mime=u(f.source1),f.source2mime=u(f.source2),f.poster=n.convertURL(f.poster,"poster"),f.flashPlayerUrl=n.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(c,function(n){var r,t,i;if(r=n.regex.exec(f.source1)){for(i=n.url,t=0;r[t];t++)i=i.replace("$"+t,function(){return r[t]});f.source1=i;f.type=n.type;f.width=f.width||n.w;f.height=f.height||n.h}}),f.embed)?e=o(f.embed,f,!0):(s=r(f.source1),s&&(f.type="script",f.width=s.width,f.height=s.height),f.width=f.width||300,f.height=f.height||150,tinymce.each(f,function(t,i){f[i]=n.dom.encode(t)}),"iframe"==f.type?e+='<iframe src="'+f.source1+'" width="'+f.width+'" height="'+f.height+'"><\/iframe>':"application/x-shockwave-flash"==f.source1mime?(e+='<object data="'+f.source1+'" width="'+f.width+'" height="'+f.height+'" type="application/x-shockwave-flash">',f.poster&&(e+='<img src="'+f.poster+'" width="'+f.width+'" height="'+f.height+'" />'),e+="<\/object>"):-1!=f.source1mime.indexOf("audio")?n.settings.audio_template_callback?e=n.settings.audio_template_callback(f):e+='<audio controls="controls" src="'+f.source1+'">'+(f.source2?'\n<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"<\/audio>":"script"==f.type?e+='<script src="'+f.source1+'"><\/script>':e=n.settings.video_template_callback?n.settings.video_template_callback(f):'<video width="'+f.width+'" height="'+f.height+'"'+(f.poster?' poster="'+f.poster+'"':"")+' controls="controls">\n<source src="'+f.source1+'"'+(f.source1mime?' type="'+f.source1mime+'"':"")+" />\n"+(f.source2?'<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"<\/video>"),e)}function i(n){var t={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(n,i){if(t.source1||"param"!=n||(t.source1=i.map.movie),("iframe"==n||"object"==n||"embed"==n||"video"==n||"audio"==n)&&(t.type||(t.type=n),t=tinymce.extend(i.map,t)),"script"==n){var u=r(i.map.src);if(!u)return;t={type:"script",source1:i.map.src,width:u.width,height:u.height}}"source"==n&&(t.source1?t.source2||(t.source2=i.map.src):t.source1=i.map.src);"img"!=n||t.poster||(t.poster=i.map.src)}}).parse(n),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function h(t){return t.getAttribute("data-mce-object")?i(n.serializer.serialize(t,{selection:!0})):{}}function o(n,t,i){function u(n,t){var i,u,r,f;for(i in t)if(r=""+t[i],n.map[i])for(u=n.length;u--;)f=n[u],f.name==i&&(r?(n.map[i]=r,f.value=r):(delete n.map[i],n.splice(u,1)));else r&&(n.push({name:i,value:r}),n.map[i]=r)}var e,r=new tinymce.html.Writer,f=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(n){r.comment(n)},cdata:function(n){r.cdata(n)},text:function(n,t){r.text(n,t)},start:function(n,o,s){switch(n){case"video":case"object":case"embed":case"img":case"iframe":u(o,{width:t.width,height:t.height})}if(i)switch(n){case"video":u(o,{poster:t.poster,src:""});t.source2&&u(o,{src:""});break;case"iframe":u(o,{src:t.source1});break;case"source":if(f++,2>=f&&(u(o,{src:t["source"+f],type:t["source"+f+"mime"]}),!t["source"+f]))return;break;case"img":if(!t.poster)return;e=!0}r.start(n,o,s)},end:function(n){var o,s,h;if("video"==n&&i)for(o=1;2>=o;o++)t["source"+o]&&(s=[],s.map={},o>f&&(u(s,{src:t["source"+o],type:t["source"+o+"mime"]}),r.start("source",s,!0)));t.poster&&"object"==n&&i&&!e&&(h=[],h.map={},u(h,{src:t.poster,width:t.width,height:t.height}),r.start("img",h,!0));r.end(n)}},new tinymce.html.Schema({})).parse(n),r.getContent()}var c=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'}],l=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";n.on("ResolveName",function(n){var t;1==n.target.nodeType&&(t=n.target.getAttribute("data-mce-object"))&&(n.name=t)});n.on("preInit",function(){var i=n.schema.getSpecialElements(),t;tinymce.each("video audio iframe object".split(" "),function(n){i[n]=new RegExp("<\/"+n+"[^>]*>","gi")});t=n.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(n){t[n]={}});n.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t,i){for(var s,u,e,f,h,c,l,o,a=t.length;a--;)if(u=t[a],u.parent&&("script"!=u.name||(o=r(u.attr("src"))))){for(e=new tinymce.html.Node("img",1),e.shortEnded=!0,o&&(o.width&&u.attr("width",o.width.toString()),o.height&&u.attr("height",o.height.toString())),c=u.attributes,s=c.length;s--;)f=c[s].name,h=c[s].value,"width"!==f&&"height"!==f&&"style"!==f&&(("data"==f||"src"==f)&&(h=n.convertURL(h,f)),e.attr("data-mce-p-"+f,h));l=u.firstChild&&u.firstChild.value;l&&(e.attr("data-mce-html",escape(l)),e.firstChild=null);e.attr({width:u.attr("width")||"300",height:u.attr("height")||("audio"==i?"30":"150"),style:u.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":i,"class":"mce-object mce-object-"+i});u.replace(e)}});n.serializer.addAttributeFilter("data-mce-object",function(n,t){for(var i,r,f,e,s,o,u,c,h=n.length;h--;)if(i=n[h],i.parent){for(u=i.attr(t),r=new tinymce.html.Node(u,1),"audio"!=u&&"script"!=u&&r.attr({width:i.attr("width"),height:i.attr("height")}),r.attr({style:i.attr("style")}),e=i.attributes,f=e.length;f--;)c=e[f].name,0===c.indexOf("data-mce-p-")&&r.attr(c.substr(11),e[f].value);"script"==u&&r.attr("type","text/javascript");s=i.attr("data-mce-html");s&&(o=new tinymce.html.Node("#text",3),o.raw=!0,o.value=unescape(s),r.append(o));i.replace(r)}})});n.on("ObjectSelected",function(n){var t=n.target.getAttribute("data-mce-object");("audio"==t||"script"==t)&&n.preventDefault()});n.on("objectResized",function(n){var t,i=n.target;i.getAttribute("data-mce-object")&&(t=i.getAttribute("data-mce-html"),t&&(t=unescape(t),i.setAttribute("data-mce-html",escape(o(t,{width:n.width,height:n.height})))))});n.addButton("media",{tooltip:"Insert/edit video",onclick:f,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]});n.addMenuItem("media",{icon:"media",text:"Insert video",onclick:f,context:"insert",prependToContext:!0})});tinymce.PluginManager.add("nonbreaking",function(n){var t=n.getParam("nonbreaking_force_tab"),i;if(n.addCommand("mceNonBreaking",function(){n.insertContent(n.plugins.visualchars&&n.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;<\/span>':"&nbsp;");n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),n.addButton("nonbreaking",{title:"Insert nonbreaking space",cmd:"mceNonBreaking"}),n.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){i=+t>1?+t:3;n.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;i>r;r++)n.execCommand("mceNonBreaking")}})}});tinymce.PluginManager.add("noneditable",function(n){function r(n){var t;return 1===n.nodeType&&((t=n.getAttribute(f),t&&"inherit"!==t)||(t=n.contentEditable,"inherit"!==t))?t:null}function u(n){for(var t;n;){if(t=r(n))return"false"===t?n:null;n=n.parentNode}}function c(){function e(n){for(;n;){if(n.id===c)return n;n=n.parentNode}}function a(n){var t;if(n)for(t=new s(n,n),n=t.current();n;n=t.next())if(3===n.nodeType)return n}function v(t,u){var e,o;return"false"===r(t)&&f.isBlock(t)?void i.select(t):(o=f.createRng(),"true"===r(t)&&(t.firstChild||t.appendChild(n.getDoc().createTextNode(" ")),t=t.firstChild,u=!0),e=f.create("span",{id:c,"data-mce-bogus":!0},l),u?t.parentNode.insertBefore(e,t):f.insertAfter(e,t),o.setStart(e.firstChild,1),o.collapse(!0),i.setRng(o),e)}function o(n){var r,t,u,o;if(n)r=i.getRng(!0),r.setStartBefore(n),r.setEndBefore(n),t=a(n),t&&t.nodeValue.charAt(0)==l&&(t=t.deleteData(0,1)),f.remove(n,!0),i.setRng(r);else for(u=e(i.getStart());(n=f.get(c))&&n!==o;)u!==n&&(t=a(n),t&&t.nodeValue.charAt(0)==l&&(t=t.deleteData(0,1)),f.remove(n,!0)),o=n}function h(){function h(n,i){var u,f,h,e,o,c;if(u=t.startContainer,f=t.startOffset,3==u.nodeType){if(o=u.nodeValue.length,f>0&&o>f||(i?f==o:0===f))return}else{if(!(f<u.childNodes.length))return i?null:n;c=!i&&f>0?f-1:f;u=u.childNodes[c];u.hasChildNodes()&&(u=u.firstChild)}for(h=new s(u,n);e=h[i?"prev":"next"]();){if(3===e.nodeType&&e.nodeValue.length>0)return;if("true"===r(e))return e}return n}var n,f,c,t,e;o();c=i.isCollapsed();n=u(i.getStart());f=u(i.getEnd());(n||f)&&(t=i.getRng(!0),c?(n=n||f,(e=h(n,!0))?v(e,!0):(e=h(n,!1))?v(e,!1):i.select(n)):(t=i.getRng(!0),n&&t.setStartBefore(n),f&&t.setEndAfter(f),i.setRng(t)))}function y(c){function b(n,t){for(;n=n[t?"previousSibling":"nextSibling"];)if(3!==n.nodeType||n.nodeValue.length>0)return n}function p(n,t){i.select(n);i.collapse(t)}function nt(t){function l(n){for(var t=o;t;){if(t===n)return;t=t.parentNode}f.remove(n);h()}function v(){for(var i,e=n.schema.getNonEmptyElements(),f=new tinymce.dom.TreeWalker(o,n.getBody());(i=t?f.prev():f.next())&&!e[i.nodeName.toLowerCase()]&&!(3===i.nodeType&&tinymce.trim(i.nodeValue).length>0);)if("false"===r(i))return l(i),!0;return u(i)?!0:!1}var c,o,s,a;if(i.isCollapsed()){if(c=i.getRng(!0),o=c.startContainer,s=c.startOffset,o=e(o)||o,a=u(o))return l(a),!1;if(3==o.nodeType&&(t?s>0:s<o.nodeValue.length))return!0;if(1==o.nodeType&&(o=o.childNodes[s]||o),v())return!1}return!0}var a,v,w,k,l=c.keyCode,y;if(w=i.getStart(),k=i.getEnd(),a=u(w)||u(k),a&&(112>l||l>124)&&l!=t.DELETE&&l!=t.BACKSPACE){if((tinymce.isMac?c.metaKey:c.ctrlKey)&&(67==l||88==l||86==l))return;if(c.preventDefault(),l==t.LEFT||l==t.RIGHT)if(y=l==t.LEFT,n.dom.isBlock(a)){var d=y?a.previousSibling:a.nextSibling,g=new s(d,d),tt=y?g.prev():g.next();p(tt,!y)}else p(a,y)}else if(l==t.LEFT||l==t.RIGHT||l==t.BACKSPACE||l==t.DELETE){if(v=e(w)){if(l==t.LEFT||l==t.BACKSPACE)if(a=b(v,!0),a&&"false"===r(a)){if(c.preventDefault(),l!=t.LEFT)return void f.remove(a);p(a,!0)}else o(v);if(l==t.RIGHT||l==t.DELETE)if(a=b(v),a&&"false"===r(a)){if(c.preventDefault(),l!=t.RIGHT)return void f.remove(a);p(a,!1)}else o(v)}if((l==t.BACKSPACE||l==t.DELETE)&&!nt(l==t.BACKSPACE))return c.preventDefault(),!1}}var f=n.dom,i=n.selection,c="mce_noneditablecaret",l="﻿";n.on("mousedown",function(t){var i=n.selection.getNode();"false"===r(i)&&i==t.target&&h()});n.on("mouseup keyup",h);n.on("keydown",y)}function l(t){var u=i.length,r=t.content,f=tinymce.trim(o);if("raw"!=t.format){for(;u--;)r=r.replace(i[u],function(t){var i=arguments,u=i[i.length-2];return u>0&&'"'==r.charAt(u-1)?t:'<span class="'+f+'" data-mce-content="'+n.dom.encode(i[0])+'">'+n.dom.encode("string"==typeof i[1]?i[1]:i[0])+"<\/span>"});t.content=r}}var h,o,i,s=tinymce.dom.TreeWalker,e="contenteditable",f="data-mce-"+e,t=tinymce.util.VK;h=" "+tinymce.trim(n.getParam("noneditable_editable_class","mceEditable"))+" ";o=" "+tinymce.trim(n.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";i=n.getParam("noneditable_regexp");i&&!i.length&&(i=[i]);n.on("PreInit",function(){c();i&&n.on("BeforeSetContent",l);n.parser.addAttributeFilter("class",function(n){for(var i,t,r=n.length;r--;)t=n[r],i=" "+t.attr("class")+" ",-1!==i.indexOf(h)?t.attr(f,"true"):-1!==i.indexOf(o)&&t.attr(f,"false")});n.serializer.addAttributeFilter(f,function(n){for(var t,r=n.length;r--;)t=n[r],i&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(e,null),t.attr(f,null))});n.parser.addAttributeFilter(e,function(n){for(var t,i=n.length;i--;)t=n[i],t.attr(f,t.attr(e)),t.attr(e,null)})});n.on("drop",function(n){u(n.target)&&n.preventDefault()})});tinymce.PluginManager.add("pagebreak",function(n){var t="mce-pagebreak",i=n.getParam("pagebreak_separator","<!-- pagebreak -->"),u=new RegExp(i.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(n){return"\\"+n}),"gi"),r='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" />';n.addCommand("mcePageBreak",function(){n.insertContent(n.settings.pagebreak_split_block?"<p>"+r+"<\/p>":r)});n.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});n.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"});n.on("ResolveName",function(i){"IMG"==i.target.nodeName&&n.dom.hasClass(i.target,t)&&(i.name="pagebreak")});n.on("click",function(i){i=i.target;"IMG"===i.nodeName&&n.dom.hasClass(i,t)&&n.selection.select(i)});n.on("BeforeSetContent",function(n){n.content=n.content.replace(u,r)});n.on("PreInit",function(){n.serializer.addNodeFilter("img",function(t){for(var r,f,u,e=t.length;e--;)if(r=t[e],f=r.attr("class"),f&&-1!==f.indexOf("mce-pagebreak")){if(u=r.parent,n.schema.getBlockElements()[u.name]&&n.settings.pagebreak_split_block){u.type=3;u.value=i;u.raw=!0;r.remove();continue}r.type=3;r.value=i;r.raw=!0}})})});!function(n,t){"use strict";function a(n,t){for(var r,f=[],i=0;i<n.length;++i){if(r=u[n[i]]||v(n[i]),!r)throw"module definition dependecy not found: "+n[i];f.push(r)}t.apply(null,f)}function i(n,i,r){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";a(i,function(){u[n]=r.apply(null,arguments)})}function v(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function y(i){for(var o=0;o<i.length;o++){for(var f=n,s=i[o],r=s.split(/[.\/]/),e=0;e<r.length-1;++e)f[r[e]]===t&&(f[r[e]]={}),f=f[r[e]];f[r[r.length-1]]=u[s]}}var u={},r="tinymce/pasteplugin/Utils",e="tinymce/util/Tools",o="tinymce/html/DomParser",s="tinymce/html/Schema",h="tinymce/pasteplugin/Clipboard",c="tinymce/Env",f="tinymce/pasteplugin/WordFilter",l="tinymce/pasteplugin/Quirks";i(r,[e,o,s],function(n,t,i){function r(t,i){return n.each(i,function(n){t=n.constructor==RegExp?t.replace(n,""):t.replace(n[0],n[1])}),t}function u(r){function e(n){var t=n.name,i=n;if("br"===t)return void(u+="\n");if(s[t]&&(u+=" "),h[t])return void(u+=" ");if(3==n.type&&(u+=n.value),!n.shortEnded&&(n=n.firstChild))do e(n);while(n=n.next);c[t]&&i.next&&(u+="\n","p"==t&&(u+="\n"))}var f=new i,o=new t({},f),u="",s=f.getShortEndedElements(),h=n.makeMap("script noscript style textarea video audio iframe object"," "),c=f.getBlockElements();return e(o.parse(r)),u}function f(n){function t(n,t,i){return t||i?" ":" "}return r(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i])}return{filter:r,innerText:u,trimHtml:f}});i(h,[c,"tinymce/util/VK",r],function(n,t,i){return function(r){function e(n){var t,u=r.dom,i;(t=r.fire("BeforePastePreProcess",{content:n}),t=r.fire("PastePreProcess",t),n=t.content,t.isDefaultPrevented())||(r.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()&&(i=u.add(r.getBody(),"div",{style:"display:none"},n),t=r.fire("PastePostProcess",{node:i}),u.remove(i),n=t.node.innerHTML),t.isDefaultPrevented()||r.insertContent(n,{merge:r.settings.paste_merge_formats!==!1}))}function c(n){n=r.dom.encode(n).replace(/\r\n/g,"\n");var f=r.dom.getParent(r.selection.getStart(),r.dom.isBlock),u=r.settings.forced_root_block,t;u&&(t=r.dom.createHTML(u,r.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">");f&&/^(PRE|DIV)$/.test(f.nodeName)||!u?n=i.filter(n,[[/\n/g,"<br>"]]):(n=i.filter(n,[[/\n\n/g,"<\/p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=n.indexOf("<p>")&&(n=t+n));e(n)}function a(){var i=r.dom,o=r.getBody(),a=r.dom.getViewPort(r.getWin()),c=a.y,s=20,e,l,t;(f=r.selection.getRng(),r.inline&&(e=r.selection.getScrollContainer(),e&&e.scrollTop>0&&(c=e.scrollTop)),f.getClientRects)&&(l=f.getClientRects(),l.length?s=c+(l[0].top-i.getPos(o).y):(s=c,t=f.startContainer,t&&(3==t.nodeType&&t.parentNode!=o&&(t=t.parentNode),1==t.nodeType&&(s=i.getPos(t,e||o).y))));u=i.add(r.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},h);(n.ie||n.gecko)&&i.setStyle(u,"left","rtl"==i.getStyle(o,"direction",!0)?65535:-65535);i.bind(u,"beforedeactivate focusin focusout",function(n){n.stopPropagation()});u.focus();r.selection.select(u,!0)}function o(){if(u){for(var n;n=r.dom.get("mcepastebin");)r.dom.remove(n),r.dom.unbind(n);f&&r.selection.setRng(f)}u=f=null}function v(){for(var i="",n,f,u=r.dom.select("div[id=mcepastebin]"),t=0;t<u.length;t++)n=u[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),f=n.innerHTML,i!=h&&(i+=f);return i}function y(n){var r={},t,i,u;if(n&&n.types)for(t=n.getData("Text"),t&&t.length>0&&(r["text/plain"]=t),i=0;i<n.types.length;i++)u=n.types[i],r[u]=n.getData(u);return r}function d(n){return y(n.clipboardData||r.getDoc().dataTransfer)}function p(n,t){function u(i){function s(){t&&(r.selection.setRng(t),t=null);e('<img src="'+o.result+'">')}var f,u,o;if(i)for(f=0;f<i.length;f++)if(u=i[f],/^image\/(jpeg|png|gif)$/.test(u.type))return o=new FileReader,o.onload=s,o.readAsDataURL(u.getAsFile?u.getAsFile():u),n.preventDefault(),!0}var i=n.clipboardData||n.dataTransfer;if(r.settings.paste_data_images&&i)return u(i.items)||u(i.files)}function g(n){var t=n.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function nt(n){var i=r.getDoc(),t,u;if(i.caretPositionFromPoint)u=i.caretPositionFromPoint(n.clientX,n.clientY),t=i.createRange(),t.setStart(u.offsetNode,u.offset),t.collapse(!0);else if(i.caretRangeFromPoint)t=i.caretRangeFromPoint(n.clientX,n.clientY);else if(i.body.createTextRange){t=i.body.createTextRange();try{t.moveToPoint(n.clientX,n.clientY);t.collapse(!0)}catch(f){t.collapse(n.clientY<i.body.clientHeight)}}return t}function w(n,t){return t in n&&n[t].length>0}function b(n){return t.metaKeyPressed(n)&&86==n.keyCode||n.shiftKey&&45==n.keyCode}function tt(){r.on("keydown",function(t){function i(n){b(n)&&!n.isDefaultPrevented()&&o()}if(b(t)&&!t.isDefaultPrevented()){if(s=t.shiftKey&&86==t.keyCode,s&&n.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),k=(new Date).getTime(),n.ie&&s)return t.preventDefault(),void r.fire("paste",{ieFake:!0});o();a();r.once("keyup",i);r.once("paste",function(){r.off("keyup",i)})}});r.on("paste",function(t){var f=d(t),b=(new Date).getTime()-k<1e3,y="text"==l.pasteFormat||s;return s=!1,t.isDefaultPrevented()||g(t)?void o():p(t)?void o():(b||t.preventDefault(),!n.ie||b&&!t.ieFake||(a(),r.dom.bind(u,"paste",function(n){n.stopPropagation()}),r.getDoc().execCommand("Paste",!1,null),f["text/html"]=v()),void setTimeout(function(){var n;return w(f,"text/html")?n=f["text/html"]:(n=v(),n==h&&(y=!0)),n=i.trimHtml(n),u&&u.firstChild&&"mcepastebin"===u.firstChild.id&&(y=!0),o(),y&&(n=w(f,"text/plain")&&-1==n.indexOf("<\/p>")?f["text/plain"]:i.innerText(n)),n==h?void(b||r.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(y?c(n):e(n))},0))});r.on("dragstart",function(n){if(n.dataTransfer.types)try{n.dataTransfer.setData("mce-internal",r.selection.getContent())}catch(t){}});r.on("drop",function(n){var u=nt(n),t,i;n.isDefaultPrevented()||p(n,u)||!u||(t=y(n.dataTransfer),i=t["mce-internal"]||t["text/html"]||t["text/plain"],i&&(n.preventDefault(),r.undoManager.transact(function(){t["mce-internal"]&&r.execCommand("Delete");r.selection.setRng(u);t["text/html"]?e(i):c(i)})))});r.on("dragover dragend",function(n){var t,i=n.dataTransfer;if(r.settings.paste_data_images&&i)for(t=0;t<i.types.length;t++)if("Files"==i.types[t])return n.preventDefault(),!1})}var l=this,u,f,k=0,h="%MCEPASTEBIN%",s;l.pasteHtml=e;l.pasteText=c;r.on("preInit",function(){tt();r.parser.addNodeFilter("img",function(t){var i,u;if(!r.settings.paste_data_images)for(i=t.length;i--;)u=t[i].attributes.map.src,u&&/^(data:image|webkit\-fake\-url)/.test(u)&&(t[i].attr("data-mce-object")||u===n.transparentSrc||t[i].remove())})})}});i(f,[e,o,s,"tinymce/html/Serializer","tinymce/html/Node",r],function(n,t,i,r,u,f){function e(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)}function o(o){var s=o.settings;o.on("BeforePastePreProcess",function(h){function b(n){function l(n){var t="";if(3===n.type)return n.value;if(n=n.firstChild)do t+=l(n);while(n=n.next);return t}function f(n,t){if(3===n.type&&t.test(n.value))return n.value=n.value.replace(t,""),!1;if(n=n.firstChild)do if(!f(n,t))return!1;while(n=n.next);return!0}function a(n){if(n._listIgnore)return void n.remove();if(n=n.firstChild)do a(n);while(n=n.next)}function o(n,e,o){var s=n._listLevel||r;s!=r&&(r>s?t&&(t=t.parent.parent):(i=t,t=null));t&&t.name==e?t.append(n):(i=i||t,t=new u(e,1),o>1&&t.attr("start",""+o),n.wrap(t));n.name="li";s>r&&i&&i.lastChild.append(t);r=s;a(n);f(n,/^\u00a0+/);f(n,/^\s*([\u2022\u00b7\u00a7\u00d8\u25CF]|\w+\.)/);f(n,/^\u00a0+/)}for(var e,y,h,c,t,i,r=1,v=n.getAll("p"),s=0;s<v.length;s++)if(n=v[s],"p"==n.name&&n.firstChild){if(e=l(n),y=n.firstChild,/^[\s\u00a0]*[\u2022\u00b7\u00a7\u00d8\u25CF]\s*/.test(e)){o(n,"ul");continue}if(/^[\s\u00a0]*\w+\./.test(e)&&!/^[\s\u00a0]*\w+\.\s*[^\s]+/.test(y.value)){h=/([0-9])\./.exec(e);c=1;h&&(c=parseInt(h[1],10));o(n,"ol",c);continue}if(n._listLevel){o(n,"ul",1);continue}t=null}}function k(t,i){var r={},f,e=o.dom.parseStyle(i);return n.each(e,function(n,u){switch(u){case"mso-list":f=/\w+ \w+([0-9]+)/i.exec(i);f&&(t._listLevel=parseInt(f[1],10));/Ignore/i.test(n)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!=n&&(r[u]=n));case"mso-element":if(/^(comment|comment-list)$/i.test(n))return void t.remove()}return 0===u.indexOf("mso-comment")?void t.remove():void(0!==u.indexOf("mso-")&&("all"==l||p&&p[u])&&(r[u]=n))}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new u("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new u("i",1))),r=o.dom.serializeStyle(r,t.name),r?r:null}var y=h.content,l,p,a,v,c,w;(l=s.paste_retain_style_properties,l&&(p=n.makeMap(l.split(/[, ]/))),s.paste_enable_default_filters!==!1&&e(h.content))&&(h.wordContent=!0,y=f.filter(y,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),a=s.paste_word_valid_elements,a||(a="-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-table[width],-tr,-td[colspan|rowspan|width],-th,-thead,-tfoot,-tbody,-a[href|name],sub,sup,strike,br,del"),v=new i({valid_elements:a,valid_children:"-li[p]"}),n.each(v.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}),c=new t({},v),c.addAttributeFilter("style",function(n){for(var i=n.length,t;i--;)t=n[i],t.attr("style",k(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),c.addAttributeFilter("class",function(n){for(var i=n.length,t,r;i--;)t=n[i],r=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel|MsoCaption)$/i.test(r)&&t.remove(),t.attr("class",null)}),c.addNodeFilter("del",function(n){for(var t=n.length;t--;)n[t].remove()}),c.addNodeFilter("a",function(n){for(var u=n.length,i,t,r;u--;)if(i=n[u],t=i.attr("href"),r=i.attr("name"),t&&-1!=t.indexOf("#_msocom_"))i.remove();else if(t&&0===t.indexOf("file://")&&(t=t.split("#")[1],t&&(t="#"+t)),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){i.unwrap();continue}i.attr({href:t,name:r})}else i.unwrap()}),w=c.parse(y),b(w),h.content=new r({},v).serialize(w))})}return o.isWordContent=e,o});i(l,[c,e,f,r],function(n,t,i,r){return function(u){function f(n){u.on("BeforePastePreProcess",function(t){t.content=n(t.content)})}function e(n){var f,e;return i.isWordContent(n)?(f=[],t.each(u.schema.getBlockElements(),function(n,t){f.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+f.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),n=r.filter(n,[[e,"$1"]]),n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):n}function o(n){var t,r,f;return i.isWordContent(n)?n:(t=u.settings.paste_webkit_styles,u.settings.paste_remove_styles_if_webkit===!1||"all"==t)?n:((t&&(t=t.split(/[, ]/)),t)?(r=u.dom,f=u.selection.getNode(),n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(n,i,u,e){var l=r.parseStyle(u,"span"),s={},o,h,c;if("none"===t)return i+e;for(o=0;o<t.length;o++)h=l[t[o]],c=r.getStyle(f,t[o],!0),/color/.test(t[o])&&(h=r.toHex(h),c=r.toHex(c)),c!=h&&(s[t[o]]=h);return s=r.serializeStyle(s,"span"),s?i+' style="'+s+'"'+e:""})):n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3"),n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(n,t,i,r){return t+' style="'+i+'"'+r}))}n.webkit&&f(o);n.ie&&f(e)}});i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager",h,f,l],function(n,t,i,r){var u;n.add("paste",function(n){function s(){"text"==e.pasteFormat?(this.active(!1),e.pasteFormat="html"):(e.pasteFormat="text",this.active(!0),u||(n.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),u=!0))}var f=this,e,o=n.settings;f.clipboard=e=new t(n);f.quirks=new r(n);f.wordFilter=new i(n);n.settings.paste_as_text&&(f.clipboard.pasteFormat="text");o.paste_preprocess&&n.on("PastePreProcess",function(n){o.paste_preprocess.call(f,f,n)});o.paste_postprocess&&n.on("PastePostProcess",function(n){o.paste_postprocess.call(f,f,n)});n.addCommand("mceInsertClipboardContent",function(n,t){t.content&&f.clipboard.pasteHtml(t.content);t.text&&f.clipboard.pasteText(t.text)});n.paste_block_drop&&n.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault();n.stopPropagation()});n.settings.paste_data_images||n.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&t.files.length>0&&n.preventDefault()});n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:s,active:"text"==f.clipboard.pasteFormat});n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,onclick:s})})});y([r,f])}(this);tinymce.PluginManager.add("preview",function(n){var t=n.settings,i=!tinymce.Env.ie;n.addCommand("mcePreview",function(){n.windowManager.open({title:"Preview",width:parseInt(n.getParam("plugin_preview_width","650"),10),height:parseInt(n.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(i?' sandbox="allow-scripts"':"")+"><\/iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var e,o="",r,u,s,f;o+='<base href="'+n.documentBaseURI.getURI()+'">';tinymce.each(n.contentCSS,function(t){o+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(t)+'">'});r=t.body_id||"tinymce";-1!=r.indexOf("=")&&(r=n.getParam("body_id","","hash"),r=r[n.id]||r);u=t.body_class||"";-1!=u.indexOf("=")&&(u=n.getParam("body_class","","hash"),u=u[n.id]||"");s=n.settings.directionality?' dir="'+n.settings.directionality+'"':"";(e="<!DOCTYPE html><html><head>"+o+'<\/head><body id="'+r+'" class="mce-content-body '+u+'"'+s+">"+n.getContent()+"<\/body><\/html>",i)?this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(e):(f=this.getEl("body").firstChild.contentWindow.document,f.open(),f.write(e),f.close())}})});n.addButton("preview",{title:"Preview",cmd:"mcePreview"});n.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})});tinymce.PluginManager.add("print",function(n){n.addCommand("mcePrint",function(){n.getWin().print()});n.addButton("print",{title:"Print",cmd:"mcePrint"});n.addShortcut("Ctrl+P","","mcePrint");n.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Ctrl+P",context:"file"})});tinymce.PluginManager.add("save",function(n){function i(){var t;return t=tinymce.DOM.getParent(n.id,"form"),!n.getParam("save_enablewhendirty",!0)||n.isDirty()?(tinymce.triggerSave(),n.getParam("save_onsavecallback")?void(n.execCallback("save_onsavecallback",n)&&(n.startContent=tinymce.trim(n.getContent({format:"raw"})),n.nodeChanged())):void(t?(n.isNotDirty=!0,(!t.onsubmit||t.onsubmit())&&("function"==typeof t.submit?t.submit():n.windowManager.alert("Error: Form submit field collision.")),n.nodeChanged()):n.windowManager.alert("Error: No form element found."))):void 0}function r(){var t=tinymce.trim(n.startContent);return n.getParam("save_oncancelcallback")?void n.execCallback("save_oncancelcallback",n):(n.setContent(t),n.undoManager.clear(),void n.nodeChanged())}function t(){var t=this;n.on("nodeChange",function(){t.disabled(n.getParam("save_enablewhendirty",!0)&&!n.isDirty())})}n.addCommand("mceSave",i);n.addCommand("mceCancel",r);n.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:t});n.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:t});n.addShortcut("ctrl+s","","mceSave")});!function(){function n(n,t,i,r,u){function a(n,t){var i,r;if(t=t||0,!n[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(i=n.index,t>0){if(r=n[t],!r)throw"Invalid capture group";i+=n[0].indexOf(r);n[0]=r}return[i,i+n[0].length,[n[0]]]}function v(n){var t;if(3===n.nodeType)return n.data;if(c[n.nodeName]&&!e[n.nodeName])return"";if(t="",(e[n.nodeName]||l[n.nodeName])&&(t+="\n"),n=n.firstChild)do t+=v(n);while(n=n.nextSibling);return t}function p(n,t,i){var o,s,v,h,a=[],u=0,r=n,f=t.shift(),y=0;n:for(;;){if((e[r.nodeName]||l[r.nodeName])&&u++,3===r.nodeType&&(!s&&r.length+u>=f[1]?(s=r,h=f[1]-u):o&&a.push(r),!o&&r.length+u>f[0]&&(o=r,v=f[0]-u),u+=r.length),o&&s){if(r=i({startNode:o,startNodeIndex:v,endNode:s,endNodeIndex:h,innerNodes:a,match:f[2],matchIndex:y}),u-=s.length-h,o=null,s=null,a=[],f=t.shift(),y++,!f)break}else{if((!c[r.nodeName]||e[r.nodeName])&&r.firstChild){r=r.firstChild;continue}if(r.nextSibling){r=r.nextSibling;continue}}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}function w(n){var t,i;return"function"!=typeof n?(i=n.nodeType?n:f.createElement(n),t=function(n,t){var r=i.cloneNode(!1);return r.setAttribute("data-mce-index",t),n&&r.appendChild(f.createTextNode(n)),r}):t=n,function(n){var o,s,i,u=n.startNode,e=n.endNode,h=n.matchIndex,r,l,c,v,y;if(u===e)return r=u,i=r.parentNode,n.startNodeIndex>0&&(o=f.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(o,r)),l=t(n.match[0],h),i.insertBefore(l,r),n.endNodeIndex<r.length&&(s=f.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(s,r)),r.parentNode.removeChild(r),l;o=f.createTextNode(u.data.substring(0,n.startNodeIndex));s=f.createTextNode(e.data.substring(n.endNodeIndex));for(var p=t(u.data.substring(n.startNodeIndex),h),w=[],a=0,b=n.innerNodes.length;b>a;++a)c=n.innerNodes[a],v=t(c.data,h),c.parentNode.replaceChild(v,c),w.push(v);return y=t(e.data.substring(0,n.endNodeIndex),h),i=u.parentNode,i.insertBefore(o,u),i.insertBefore(p,u),i.removeChild(u),i=e.parentNode,i.insertBefore(y,e),i.insertBefore(s,e),i.removeChild(e),y}}var s,h,f,e,c,l,o=[],y=0;if(f=t.ownerDocument,e=u.getBlockElements(),c=u.getWhiteSpaceElements(),l=u.getShortEndedElements(),h=v(t)){if(n.global)for(;s=n.exec(h);)o.push(a(s,r));else s=h.match(n),o.push(a(s,r));return o.length&&(y=o.length,p(t,o,w(i))),y}}function t(t){function f(){function e(){n.statusbar.find("#next").disabled(!u(r+1).length);n.statusbar.find("#prev").disabled(!u(r-1).length)}function o(){tinymce.ui.MessageBox.alert("Could not find the specified string.",function(){n.find("#find")[0].focus()})}var f={},n=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){t.focus();i.done()},onSubmit:function(t){var l,h,s,c;return t.preventDefault(),h=n.find("#case").checked(),c=n.find("#words").checked(),s=n.find("#find").value(),s.length?f.text==s&&f.caseState==h&&f.wholeWord==c?0===u(r+1).length?void o():(i.next(),void e()):(l=i.find(s,h,c),l||o(),n.statusbar.items().slice(1).disabled(0===l),e(),void(f={text:s,caseState:h,wholeWord:c})):(i.done(!1),void n.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",onclick:function(){n.submit()}},{text:"Replace",disabled:!0,onclick:function(){i.replace(n.find("#replace").value())||(n.statusbar.items().slice(1).disabled(!0),r=-1,f={})}},{text:"Replace all",disabled:!0,onclick:function(){i.replace(n.find("#replace").value(),!0,!0);n.statusbar.items().slice(1).disabled(!0);f={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){i.prev();e()}},{text:"Next",name:"next",disabled:!0,onclick:function(){i.next();e()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:t.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}}).renderTo().reflow()}function e(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function c(r){var f,u;return u=t.dom.create("span",{"data-mce-bogus":1}),u.className="mce-match-marker",f=t.getBody(),i.done(!1),n(r,f,u,!1,t.schema)}function s(n){var t=n.parentNode;n.firstChild&&t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}function u(n){var i,f=[],r,u;if(i=tinymce.toArray(t.getBody().getElementsByTagName("span")),i.length)for(r=0;r<i.length;r++)u=e(i[r]),null!==u&&u.length&&u===n.toString()&&f.push(i[r]);return f}function o(n){var i=r,e=t.dom,f;return n=n!==!1,n?i++:i--,e.removeClass(u(r),"mce-match-marker-selected"),f=u(i),f.length?(e.addClass(u(i),"mce-match-marker-selected"),t.selection.scrollIntoView(f[0]),i):-1}function h(n){n.parentNode.removeChild(n)}var i=this,r=-1;i.init=function(n){n.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Ctrl+F",onclick:f,separator:"before",context:"edit"});n.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Ctrl+F",onclick:f});n.addCommand("SearchReplace",f);n.shortcuts.add("Ctrl+F","",f)};i.find=function(n,t,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=i?"\\b"+n+"\\b":n;var u=c(new RegExp(n,t?"g":"gi"));return u&&(r=-1,r=o(!0)),u};i.next=function(){var n=o(!0);-1!==n&&(r=n)};i.prev=function(){var n=o(!1);-1!==n&&(r=n)};i.replace=function(n,f,o){var c,l,b,v,y,w,p=r,a;for(f=f!==!1,b=t.getBody(),l=tinymce.toArray(b.getElementsByTagName("span")),c=0;c<l.length;c++)if(a=e(l[c]),null!==a&&a.length)if(v=y=parseInt(a,10),o||v===r){for(n.length?(l[c].firstChild.nodeValue=n,s(l[c])):h(l[c]);l[++c];)if(v=e(l[c]),null!==a&&a.length){if(v!==y){c--;break}h(l[c])}f&&p--}else y>r&&l[c].setAttribute("data-mce-index",y-1);return t.undoManager.add(),r=p,f?(w=u(p+1).length>0,i.next()):(w=u(p-1).length>0,i.prev()),!o&&w};i.done=function(n){for(var o,h,c,f,u=tinymce.toArray(t.getBody().getElementsByTagName("span")),i=0;i<u.length;i++)c=e(u[i]),null!==c&&c.length&&(c===r.toString()&&(o||(o=u[i].firstChild),h=u[i].firstChild),s(u[i]));if(o&&h)return f=t.dom.createRng(),f.setStart(o,0),f.setEnd(h,h.data.length),n!==!1&&t.selection.setRng(f),f}}tinymce.PluginManager.add("searchreplace",t)}();!function(n,t){"use strict";function u(n,t){for(var u,e=[],r=0;r<n.length;++r){if(u=i[n[r]]||f(n[r]),!u)throw"module definition dependecy not found: "+n[r];e.push(u)}t.apply(null,e)}function r(n,r,f){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(r,function(){i[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function e(r){for(var o=0;o<r.length;o++){for(var f=n,s=r[o],u=s.split(/[.\/]/),e=0;e<u.length-1;++e)f[u[e]]===t&&(f[u[e]]={}),f=f[u[e]];f[u[u.length-1]]=i[s]}}var i={};r("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){return function(n,t){function p(n,t){if(!n[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:n.index,end:n.index+n[0].length,text:n[0],data:t}}function h(n){var t;if(3===n.nodeType)return n.data;if(o[n.nodeName]&&!u[n.nodeName])return"";if(t="",(u[n.nodeName]||s[n.nodeName])&&(t+="\n"),n=n.firstChild)do t+=h(n);while(n=n.nextSibling);return t}function w(n,t,i){var h,c,v,l,f,a=[],e=0,r=n,y=0;t=t.slice(0);t.sort(function(n,t){return n.start-t.start});f=t.shift();n:for(;;){if((u[r.nodeName]||s[r.nodeName])&&e++,3===r.nodeType&&(!c&&r.length+e>=f.end?(c=r,l=f.end-e):h&&a.push(r),!h&&r.length+e>f.start&&(h=r,v=f.start-e),e+=r.length),h&&c){if(r=i({startNode:h,startNodeIndex:v,endNode:c,endNodeIndex:l,innerNodes:a,match:f.text,matchIndex:y}),e-=c.length-l,h=null,c=null,a=[],f=t.shift(),y++,!f)break}else{if((!o[r.nodeName]||u[r.nodeName])&&r.firstChild){r=r.firstChild;continue}if(r.nextSibling){r=r.nextSibling;continue}}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}function b(n){function t(t,r){var u=i[r],f;return u.stencil||(u.stencil=n(u)),f=u.stencil.cloneNode(!1),f.setAttribute("data-mce-index",r),t&&f.appendChild(y.doc.createTextNode(t)),f}return function(n){var e,o,i,u=n.startNode,f=n.endNode,s=n.matchIndex,h=y.doc,r,l,c,v,p;if(u===f)return r=u,i=r.parentNode,n.startNodeIndex>0&&(e=h.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(e,r)),l=t(n.match,s),i.insertBefore(l,r),n.endNodeIndex<r.length&&(o=h.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(o,r)),r.parentNode.removeChild(r),l;e=h.createTextNode(u.data.substring(0,n.startNodeIndex));o=h.createTextNode(f.data.substring(n.endNodeIndex));for(var w=t(u.data.substring(n.startNodeIndex),s),b=[],a=0,k=n.innerNodes.length;k>a;++a)c=n.innerNodes[a],v=t(c.data,s),c.parentNode.replaceChild(v,c),b.push(v);return p=t(f.data.substring(0,n.endNodeIndex),s),i=u.parentNode,i.insertBefore(e,u),i.insertBefore(w,u),i.removeChild(u),i=f.parentNode,i.insertBefore(p,f),i.insertBefore(o,f),i.removeChild(f),p}}function k(n){var t=n.parentNode;t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}function e(t){var f=n.getElementsByTagName("*"),e=[],i,u,r;for(t="number"==typeof t?""+t:null,i=0;i<f.length;i++)u=f[i],r=u.getAttribute("data-mce-index"),null!==r&&r.length&&(r===t||null===t)&&e.push(u);return e}function f(n){for(var t=i.length;t--;)if(i[t]===n)return t;return-1}function d(n){var t=[];return c(function(i,r){n(i,r)&&t.push(i)}),i=t,this}function c(n){for(var t=0,r=i.length;r>t&&n(i[t],t)!==!1;t++);return this}function g(t){return i.length&&w(n,i,b(t)),this}function nt(n,t){if(r&&n.global)for(;v=n.exec(r);)i.push(p(v,t));return this}function l(n){for(var i=e(n?f(n):null),t=i.length;t--;)k(i[t]);return this}function tt(n){return i[n.getAttribute("data-mce-index")]}function it(n){return e(f(n))[0]}function rt(n,t,u){return i.push({start:n,end:n+t,text:r.substr(n,t),data:u}),this}function a(n){var i=e(f(n)),r=t.dom.createRng();return r.setStartBefore(i[0]),r.setEndAfter(i[i.length-1]),r}function ut(n,i){var r=a(n);return r.deleteContents(),i.length>0&&r.insertNode(t.dom.doc.createTextNode(i)),r}function ft(){return i.splice(0,i.length),l(),this}var v,r,u,o,s,i=[],y=t.dom;return u=t.schema.getBlockElements(),o=t.schema.getWhiteSpaceElements(),s=t.schema.getShortEndedElements(),r=h(n),{text:r,matches:i,each:c,filter:d,reset:ft,matchFromElement:tt,elementFromMatch:it,find:nt,add:rt,wrap:g,unwrap:l,replace:ut,rangeFromMatch:a,indexOf:f}}});r("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(n,t,i,r,u,f,e,o){t.add("spellchecker",function(t,s){function p(){return y.textMatcher||(y.textMatcher=new n(t.getBody(),t)),y.textMatcher}function ut(n,t){var r=[];return i.each(t,function(n){r.push({selectable:!0,text:n.name,data:n.value})}),r}function ft(n){for(var t in n)return!1;return!0}function et(n,f){var o=[],l=it[n];i.each(l,function(n){o.push({text:n,onclick:function(){t.insertContent(t.dom.encode(n));t.dom.remove(f);w()}})});o.push({text:"-"});rt&&o.push({text:"Add to Dictionary",onclick:function(){st(n,f)}});o.push.apply(o,[{text:"Ignore",onclick:function(){nt(n,f)}},{text:"Ignore all",onclick:function(){nt(n,f,!0)}},{text:"Finish",onclick:v}]);c=new r({items:o,context:"contextmenu",onautohide:function(n){-1!=n.target.className.indexOf("spellchecker")&&n.preventDefault()},onhide:function(){c.remove();c=null}});c.renderTo(document.body);var h=u.DOM.getPos(t.getContentAreaContainer()),s=t.dom.getPos(f[0]),e=t.dom.getRoot();"BODY"==e.nodeName?(s.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,s.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop):(s.x-=e.scrollLeft,s.y-=e.scrollTop);h.x+=s.x;h.y+=s.y;c.moveTo(h.x,h.y+f[0].offsetHeight)}function d(){return t.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„]+',"g")}function ot(n,t,r,u){var c={method:n},l="";"spellcheck"==n&&(c.text=t,c.lang=h.spellchecker_language);"addToDictionary"==n&&(c.word=t);i.each(c,function(n,t){l&&(l+="&");l+=t+"="+encodeURIComponent(n)});f.send({url:new e(s).toAbsolute(h.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:l,success:function(n){n=o.parse(n);n?n.error?u(n.error):r(n):u("Sever response wasn't proper JSON.")},error:function(n,t){u("Spellchecker request error: "+t.status)}})}function g(n,t,i,r){var u=h.spellchecker_callback||ot;u.call(y,n,t,i,r)}function b(){function n(n){var i;return n.words?(rt=!!n.dictionary,i=n.words):i=n,t.setProgressState(!1),ft(i)?(t.windowManager.alert("No misspellings found"),void(l=!1)):(it=i,p().find(d()).filter(function(n){return!!i[n.text]}).wrap(function(n){return t.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":n.text})}),void t.fire("SpellcheckStart"))}function i(n){t.windowManager.alert(n);t.setProgressState(!1);v()}return l?void v():(v(),l=!0,t.setProgressState(!0),g("spellcheck",p().text,n,i),void t.focus())}function w(){t.dom.select("span.mce-spellchecker-word").length||v()}function st(n,i){t.setProgressState(!0);g("addToDictionary",n,function(){t.setProgressState(!1);t.dom.remove(i,!0);w()},function(n){t.windowManager.alert(n);t.setProgressState(!1)})}function nt(n,r,u){t.selection.collapse();u?i.each(t.dom.select("span.mce-spellchecker-word"),function(i){i.getAttribute("data-mce-word")==n&&t.dom.remove(i,!0)}):t.dom.remove(r,!0);w()}function v(){p().reset();y.textMatcher=null;l&&(l=!1,t.fire("SpellcheckEnd"))}function tt(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function ht(n){var r,e=[],u,f;if(r=i.toArray(t.getBody().getElementsByTagName("span")),r.length)for(u=0;u<r.length;u++)f=tt(r[u]),null!==f&&f.length&&f===n.toString()&&e.push(r[u]);return e}function ct(n){var t=h.spellchecker_language;n.control.items().each(function(n){n.active(n.settings.data===t)})}var k,it,l,c,rt,y=this,h=t.settings,lt=h.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv",a;k=ut("Language",i.map(lt.split(","),function(n){return n=n.split("="),{name:n[0],value:n[1]}}));t.on("click",function(n){var u=n.target,i,r;"mce-spellchecker-word"==u.className&&(n.preventDefault(),i=ht(tt(u)),i.length>0&&(r=t.dom.createRng(),r.setStartBefore(i[0]),r.setEndAfter(i[i.length-1]),t.selection.setRng(r),et(u.getAttribute("data-mce-word"),i)))});t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:b,selectable:!0,onPostRender:function(){var n=this;t.on("SpellcheckStart SpellcheckEnd",function(){n.active(l)})}});a={tooltip:"Spellcheck",onclick:b,onPostRender:function(){var n=this;t.on("SpellcheckStart SpellcheckEnd",function(){n.active(l)})}};k.length>1&&(a.type="splitbutton",a.menu=k,a.onshow=ct,a.onselect=function(n){h.spellchecker_language=n.control.settings.data});t.addButton("spellchecker",a);t.addCommand("mceSpellCheck",b);t.on("remove",function(){c&&(c.remove(),c=null)});t.on("change",w);this.getTextMatcher=p;this.getWordCharPattern=d;this.getLanguage=function(){return h.spellchecker_language};h.spellchecker_language=h.spellchecker_language||h.language||"en"})});e(["tinymce/spellcheckerplugin/DomTextMatcher"])}(this);tinymce.PluginManager.add("tabfocus",function(n){function r(n){9!==n.keyCode||n.ctrlKey||n.altKey||n.metaKey||n.preventDefault()}function i(i){function c(i){function f(n){return"BODY"===n.nodeName||"hidden"!=n.type&&"none"!=n.style.display&&"hidden"!=n.style.visibility&&f(n.parentNode)}function h(n){return n.tabIndex||"INPUT"==n.nodeName||"TEXTAREA"==n.nodeName}function o(n){return!h(n)&&"-1"!=n.getAttribute("tabindex")&&f(n)}if(r=t.select(":input:enabled,*[tabindex]:not(iframe)"),u(r,function(t,i){if(t.id==n.id)return(s=i,!1)}),i>0){for(e=s+1;e<r.length;e++)if(o(r[e]))return r[e]}else for(e=s-1;e>=0;e--)if(o(r[e]))return r[e];return null}var s,r,o,e,h;9!==i.keyCode||i.ctrlKey||i.altKey||i.metaKey||!(o=f(n.getParam("tab_focus",n.getParam("tabfocus_elements",":prev,:next"))),1==o.length&&(o[1]=o[0],o[0]=":prev"),r=i.shiftKey?":prev"==o[0]?c(-1):t.get(o[0]):":next"==o[1]?c(1):t.get(o[1]))||(h=tinymce.get(r.id||r.name),r.id&&h?h.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus();r.focus()},10),i.preventDefault())}var t=tinymce.DOM,u=tinymce.each,f=tinymce.explode;n.on("init",function(){n.inline&&tinymce.DOM.setAttrib(n.getBody(),"tabIndex",null)});n.on("keyup",r);tinymce.Env.gecko?n.on("keypress keydown",i):n.on("keydown",i)});!function(n,t){"use strict";function l(n,t){for(var r,f=[],i=0;i<n.length;++i){if(r=u[n[i]]||a(n[i]),!r)throw"module definition dependecy not found: "+n[i];f.push(r)}t.apply(null,f)}function i(n,i,r){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";l(i,function(){u[n]=r.apply(null,arguments)})}function a(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function v(i){for(var o=0;o<i.length;o++){for(var f=n,s=i[o],r=s.split(/[.\/]/),e=0;e<r.length-1;++e)f[r[e]]===t&&(f[r[e]]={}),f=f[r[e]];f[r[r.length-1]]=u[s]}}var u={},e="tinymce/tableplugin/TableGrid",r="tinymce/util/Tools",f="tinymce/Env",o="tinymce/tableplugin/Quirks",s="tinymce/tableplugin/CellSelection",h="tinymce/dom/TreeWalker",c="tinymce/tableplugin/Dialogs";i(e,[r,f],function(n,i){function u(n,t){return parseInt(n.getAttribute(t)||1,10)}var r=n.each;return function(f,e){function d(){var n=0;o=[];b=0;r(["thead","tbody","tfoot"],function(t){var i=s.select("> "+t+" tr",e);r(i,function(i,f){f+=n;r(s.select("> td, > th",i),function(n,i){var e,r,s,h;if(o[f])for(;o[f][i];)i++;for(s=u(n,"rowspan"),h=u(n,"colspan"),r=f;f+s>r;r++)for(o[r]||(o[r]=[]),e=i;i+h>e;e++)o[r][e]={part:t,real:r==f&&e==i,elm:n,rowspan:s,colspan:h};b=Math.max(b,i+1)})});n+=i.length})}function g(n,t){return n=n.cloneNode(t),n.removeAttribute("id"),n}function k(n,t){var i;return i=o[t],i?i[n]:void 0}function c(n,t,i){n&&(i=parseInt(i,10),1===i?n.removeAttribute(t,1):n.setAttribute(t,i,1))}function w(n){return n&&(s.hasClass(n.elm,"mce-item-selected")||n==p)}function nt(){var n=[];return r(e.rows,function(t){r(t.cells,function(i){if(s.hasClass(i,"mce-item-selected")||p&&i==p.elm)return(n.push(t),!1)})}),n}function ut(){var n=s.createRng();n.setStartAfter(e);n.setEndAfter(e);a.setRng(n);s.remove(e)}function y(t){var u,e={};return f.settings.table_clone_elements!==!1&&(e=n.makeMap((f.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),n.walk(t,function(n){var f;if(3==n.nodeType)return(r(s.getParents(n.parentNode,null,t).reverse(),function(n){e[n.nodeName]&&(n=g(n,!1),u?f&&f.appendChild(n):u=f=n,f=n)}),f&&(f.innerHTML=i.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1)},"childNodes"),t=g(t,!1),c(t,"rowSpan",1),c(t,"colSpan",1),u?t.appendChild(u):(!i.ie||i.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function tt(){var t=s.createRng(),n;return r(s.select("tr",e),function(n){0===n.cells.length&&s.remove(n)}),0===s.select("tr",e).length?(t.setStartBefore(e),t.setEndBefore(e),a.setRng(t),void s.remove(e)):(r(s.select("thead,tbody,tfoot",e),function(n){0===n.rows.length&&s.remove(n)}),d(),void(h&&(n=o[Math.min(o.length-1,h.y)],n&&(a.select(n[Math.min(n.length-1,h.x)].elm,!0),a.collapse(!0)))))}function it(n,t,i,r){for(var e,f,c,u=o[t][n].elm.parentNode,h=1;i>=h;h++)if(u=s.getNext(u,"tr")){for(e=n;e>=0;e--)if(c=o[t+h][e].elm,c.parentNode==u){for(f=1;r>=f;f++)s.insertAfter(y(c),c);break}if(-1==e)for(f=1;r>=f;f++)u.insertBefore(y(u.cells[0]),u.cells[0])}}function rt(){r(o,function(n,t){r(n,function(n,i){var r,f,e;if(w(n)&&(n=n.elm,r=u(n,"colspan"),f=u(n,"rowspan"),r>1||f>1)){for(c(n,"rowSpan",1),c(n,"colSpan",1),e=0;r-1>e;e++)s.insertAfter(y(n),n);it(i,t,f-1,r)}})})}function ft(t,i,u){var it,e,a,b,g,nt,y,f,ut,p,ft;if(t?(it=v(t),e=it.x,a=it.y,b=e+(i-1),g=a+(u-1)):(h=l=null,r(o,function(n,t){r(n,function(n,i){w(n)&&(h||(h={x:i,y:t}),l={x:i,y:t})})}),h&&(e=h.x,a=h.y,b=l.x,g=l.y)),f=k(e,a),ut=k(b,g),f&&ut&&f.part==ut.part){for(rt(),d(),f=k(e,a).elm,c(f,"colSpan",b-e+1),c(f,"rowSpan",g-a+1),y=a;g>=y;y++)for(nt=e;b>=nt;nt++)o[y]&&o[y][nt]&&(t=o[y][nt].elm,t!=f&&(p=n.grep(t.childNodes),r(p,function(n){f.appendChild(n)}),p.length&&(p=n.grep(f.childNodes),ft=0,r(p,function(n){"BR"==n.nodeName&&s.getAttrib(n,"data-mce-bogus")&&ft++<p.length-1&&f.removeChild(n)})),s.remove(t)));tt()}}function et(n){var i,f,b,e,l,a,v,p,h;if(r(o,function(t,u){return r(t,function(t){if(w(t)&&(t=t.elm,l=t.parentNode,a=g(l,!1),i=u,n))return!1}),n?!i:void 0}),i!==t){for(e=0;e<o[0].length;e++)if(o[i][e]&&(f=o[i][e].elm,f!=b)){if(n){if(i>0&&o[i-1][e]&&(p=o[i-1][e].elm,h=u(p,"rowSpan"),h>1)){c(p,"rowSpan",h+1);continue}}else if(h=u(f,"rowspan"),h>1){c(f,"rowSpan",h+1);continue}v=y(f);c(v,"colSpan",f.colSpan);a.appendChild(v);b=f}a.hasChildNodes()&&(n?l.parentNode.insertBefore(a,l):s.insertAfter(a,l))}}function ot(n){var t,i;r(o,function(i){return r(i,function(i,r){if(w(i)&&(t=r,n))return!1}),n?!t:void 0});r(o,function(r,f){var e,h,o;r[t]&&(e=r[t].elm,e!=i&&(o=u(e,"colspan"),h=u(e,"rowspan"),1==o?n?(e.parentNode.insertBefore(y(e),e),it(t,f,h-1,o)):(s.insertAfter(y(e),e),it(t,f,h-1,o)):c(e,"colSpan",e.colSpan+1),i=e))})}function st(){var t=[];r(o,function(i){r(i,function(i,f){w(i)&&-1===n.inArray(t,f)&&(r(o,function(n){var t=n[f].elm,i;i=u(t,"colSpan");i>1?c(t,"colSpan",i-1):s.remove(t)}),t.push(f))})});tt()}function ht(){function t(n){var t,i;r(n.cells,function(n){var i=u(n,"rowSpan");i>1&&(c(n,"rowSpan",i-1),t=v(n),it(t.x,t.y,1,1))});t=v(n.cells[0]);r(o[t.y],function(n){var t;n=n.elm;n!=i&&(t=u(n,"rowSpan"),1>=t?s.remove(n):c(n,"rowSpan",t-1),i=n)})}var n;n=nt();r(n.reverse(),function(n){t(n)});tt()}function ct(){var n=nt();return s.remove(n),tt(),n}function lt(){var n=nt();return r(n,function(t,i){n[i]=g(t,!0)}),n}function at(n,t){var f=nt(),i=f[t?0:f.length-1],u=i.cells.length;n&&(r(o,function(n){var t;return u=0,r(n,function(n){n.real&&(u+=n.colspan);n.elm.parentNode==i&&(t=1)}),t?!1:void 0}),t||n.reverse(),r(n,function(n){for(var f=n.cells.length,e,r=0;f>r;r++)e=n.cells[r],c(e,"colSpan",1),c(e,"rowSpan",1);for(r=f;u>r;r++)n.appendChild(y(n.cells[f-1]));for(r=u;f>r;r++)s.remove(n.cells[r]);t?i.parentNode.insertBefore(n,i):s.insertAfter(n,i)}),s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function v(n){var t;return r(o,function(i,u){return r(i,function(i,r){if(i.elm==n)return(t={x:r,y:u},!1)}),!t}),t}function vt(n){h=v(n)}function yt(){var n,t;return n=t=0,r(o,function(i,u){r(i,function(i,r){var f,e;w(i)&&(i=o[u][r],r>n&&(n=r),u>t&&(t=u),i.real&&(f=i.colspan-1,e=i.rowspan-1,f&&r+f>n&&(n=r+f),e&&u+e>t&&(t=u+e)))})}),{x:n,y:t}}function pt(n){var r,u,y,p,f,e,c,a,t,i;if(l=v(n),h&&l){for(r=Math.min(h.x,l.x),u=Math.min(h.y,l.y),y=Math.max(h.x,l.x),p=Math.max(h.y,l.y),f=y,e=p,i=u;e>=i;i++)n=o[i][r],n.real||r-(n.colspan-1)<r&&(r-=n.colspan-1);for(t=r;f>=t;t++)n=o[u][t],n.real||u-(n.rowspan-1)<u&&(u-=n.rowspan-1);for(i=u;p>=i;i++)for(t=r;y>=t;t++)n=o[i][t],n.real&&(c=n.colspan-1,a=n.rowspan-1,c&&t+c>f&&(f=t+c),a&&i+a>e&&(e=i+a));for(s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=u;e>=i;i++)for(t=r;f>=t;t++)o[i][t]&&s.addClass(o[i][t].elm,"mce-item-selected")}}function wt(n,t){var u,r,i;u=v(n);r=u.y*b+u.x;do{if(r+=t,i=k(r%b,Math.floor(r/b)),!i)break;if(i.elm!=n)return a.select(i.elm,!0),s.isEmpty(i.elm)&&a.collapse(!0),!0}while(i.elm==n);return!1}var o,b,h,l,p,a=f.selection,s=a.dom;e=e||s.getParent(a.getStart(),"table");d();p=s.getParent(a.getStart(),"th,td");p&&(h=v(p),l=yt(),p=k(h.x,h.y));n.extend(this,{deleteTable:ut,split:rt,merge:ft,insertRow:et,insertCol:ot,deleteCols:st,deleteRows:ht,cutRows:ct,copyRows:lt,pasteRows:at,getPos:v,setStartCell:vt,setEndCell:pt,moveRelIdx:wt,refresh:d})}});i(o,["tinymce/util/VK",f,r],function(n,t,i){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var u=i.each;return function(i){function o(){function t(t){function h(n,r){var e=n?"previousSibling":"nextSibling",u=i.dom.getParent(r,"tr"),o=u[e],f;if(o)return c(i,r,o,n),t.preventDefault(),!0;var s=i.dom.getParent(u,"table"),h=u.parentNode,a=h.nodeName.toLowerCase();return("tbody"===a||a===(n?"tfoot":"thead"))&&(f=l(n,s,h,"tbody"),null!==f)?v(n,f,r):y(n,u,e,s)}function l(n,t,r,u){var f=i.dom.select(">"+u,t),e=f.indexOf(r),o;return n&&0===e||!n&&e===f.length-1?a(n,t):-1===e?(o="thead"===r.tagName.toLowerCase()?0:f.length-1,f[o]):f[e+(n?-1:1)]}function a(n,t){var u=n?"thead":"tfoot",r=i.dom.select(">"+u,t);return 0!==r.length?r[0]:null}function v(n,r,u){var e=f(r,n);return e&&c(i,u,e,n),t.preventDefault(),!0}function y(n,r,u,o){var c=o[u],s,l;return c?(e(c),!0):(s=i.dom.getParent(o,"td,th"),s)?h(n,s,t):(l=f(r,!n),e(l),t.preventDefault(),!1)}function f(n,t){var r=n&&n[t?"lastChild":"firstChild"];return r&&"BR"===r.nodeName?i.dom.getParent(r,"td,th"):r}function e(n){i.selection.setCursorLocation(n,0)}function p(){return o==n.UP||o==n.DOWN}function w(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"tr");return null!==i}function b(n){for(var i=0,t=n;t.previousSibling;)t=t.previousSibling,i+=r(t,"colspan");return i}function k(n,t){var i=0,f=0;return u(n.children,function(n,u){return i+=r(n,"colspan"),f=u,i>t?!1:void 0}),f}function c(n,t,r,u){var s=b(i.dom.getParent(t,"td,th")),h=k(r,s),o=r.childNodes[h],c=f(o,u);e(c||o)}function d(n){var u=i.selection.getNode(),t=i.dom.getParent(u,"td,th"),r=i.dom.getParent(n,"td,th");return t&&t!==r&&g(t,r)}function g(n,t){return i.dom.getParent(n,"TABLE")===i.dom.getParent(t,"TABLE")}var o=t.keyCode,s;p()&&w(i)&&(s=i.selection.getNode(),setTimeout(function(){d(s)&&h(!t.shiftKey&&o===n.UP,s,t)},0))}i.on("KeyDown",function(n){t(n)})}function f(){function n(n,t){var u=t.ownerDocument,i=u.createRange(),r;return i.setStartBefore(t),i.setEnd(n.endContainer,n.endOffset),r=u.createElement("body"),r.appendChild(i.cloneContents()),0===r.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}i.on("KeyDown",function(t){var r,u,f=i.dom;(37==t.keyCode||38==t.keyCode)&&(r=i.selection.getRng(),u=f.getParent(r.startContainer,"table"),u&&i.getBody().firstChild==u&&n(r,u)&&(r=f.createRng(),r.setStartBefore(u),r.setEndBefore(u),i.selection.setRng(r),t.preventDefault()))})}function e(){i.on("KeyDown SetContent VisualAid",function(){for(var n=i.getBody().lastChild;n;n=n.previousSibling)if(3==n.nodeType){if(n.nodeValue.length>0)break}else if(1==n.nodeType&&("BR"==n.tagName||!n.getAttribute("data-mce-bogus")))break;n&&"TABLE"==n.nodeName&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))});i.on("PreProcess",function(n){var t=n.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&i.dom.remove(t)})}function s(){function t(n,t,i,r){var u=n.dom.getParent(t.startContainer,"TABLE"),f,e,o;return u&&(f=u.parentNode),e=t.startContainer.nodeType==3&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==i.nodeName||i==f),o=("TD"==i.nodeName||"TH"==i.nodeName)&&!r,e||o}function n(){var r=i.selection.getRng(),f=i.selection.getNode(),u=i.dom.getParent(r.startContainer,"TD,TH"),n;if(t(i,r,f,u)){for(u||(u=f),n=u.lastChild;n.lastChild;)n=n.lastChild;3==n.nodeType&&(r.setEnd(n,n.data.length),i.selection.setRng(r))}}i.on("KeyDown",function(){n()});i.on("MouseDown",function(t){2!=t.button&&n()})}function h(){i.on("keydown",function(t){var r,u,f;if((t.keyCode==n.DELETE||t.keyCode==n.BACKSPACE)&&!t.isDefaultPrevented()&&(r=i.dom.getParent(i.selection.getStart(),"table"),r)){for(u=i.dom.select("td,th",r),f=u.length;f--;)if(!i.dom.hasClass(u[f],"mce-item-selected"))return;t.preventDefault();i.execCommand("mceTableDelete")}})}h();t.webkit&&(o(),s());t.gecko&&(f(),e());t.ie>10&&(f(),e())}});i(s,[e,h,r],function(n,t,i){return function(r){function s(n){r.getBody().style.webkitUserSelect="";(n||h)&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),h=!1)}function l(t){var s,l,i=t.target;if(!c&&e&&(f||i!=e)&&("TD"==i.nodeName||"TH"==i.nodeName)){l=u.getParent(i,"table");l==o&&(f||(f=new n(r,l),f.setStartCell(e),r.getBody().style.webkitUserSelect="none"),f.setEndCell(i),h=!0);s=r.selection.getSel();try{s.removeAllRanges?s.removeAllRanges():s.empty()}catch(a){}t.preventDefault()}}var u=r.dom,f,e,o,h=!0,c;return r.on("MouseDown",function(n){2==n.button||c||(s(),e=u.getParent(n.target,"td,th"),o=u.getParent(e,"table"))}),r.on("mouseover",l),r.on("remove",function(){u.unbind(r.getDoc(),"mouseover",l)}),r.on("MouseUp",function(){function c(n,r){var u=new t(n,n);do{if(3==n.nodeType&&0!==i.trim(n.nodeValue).length)return void(r?s.setStart(n,0):s.setEnd(n,n.nodeValue.length));if("BR"==n.nodeName)return void(r?s.setStartBefore(n):s.setEndBefore(n))}while(n=r?u.next():u.prev())}var s,v=r.selection,h,l,n,a;if(e){if(f&&(r.getBody().style.webkitUserSelect=""),h=u.select("td.mce-item-selected,th.mce-item-selected"),h.length>0){s=u.createRng();n=h[0];s.setStartBefore(n);s.setEndAfter(n);c(n,1);l=new t(n,u.getParent(h[0],"table"));do if("TD"==n.nodeName||"TH"==n.nodeName){if(!u.hasClass(n,"mce-item-selected"))break;a=n}while(n=l.next());c(a);v.setRng(s)}r.nodeChanged();e=f=o=null}}),r.on("KeyUp Drop SetContent",function(n){s("setcontent"==n.type);e=f=o=null}),r.on("ObjectResizeStart ObjectResized",function(n){c="ObjectResized"!=n.type}),{clear:s}}});i(c,[r,f],function(n,t){var i=n.each;return function(r){function a(){var n=this,t=r.settings.color_picker_callback;t&&t.call(r,function(t){n.value(t).fire("change")},n.value())}function s(n){return{title:"Advanced",type:"form",defaults:{onchange:function(){o(n,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:a},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:a}]}]}}function f(n){return n?n.replace(/px$/,""):""}function e(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function h(n){i("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},n)})}function v(n){i("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},n)})}function c(t,i,r){function u(t,r){return r=r||[],n.each(t,function(n){var t={text:n.text||n.title};n.menu?t.menu=u(n.menu):(t.value=n.value,i&&i(t));r.push(t)}),r}return u(t,r||[])}function o(n,t,i){var u=t.toJSON(),r=n.parseStyle(u.style);i?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=u.borderColor,r["background-color"]=u.backgroundColor);t.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(r))))}function l(n,t,i){var r=n.parseStyle(n.getAttrib(i,"style"));r["border-color"]&&(t.borderColor=r["border-color"]);r["background-color"]&&(t.backgroundColor=r["background-color"]);t.style=n.serializeStyle(r)}var u=this;u.tableProps=function(){u.table(!0)};u.table=function(u){function w(){var i;o(y,this);a=n.extend(a,this.toJSON());n.each("backgroundColor borderColor".split(" "),function(n){delete a[n]});a["class"]===!1&&delete a["class"];r.undoManager.transact(function(){v||(v=r.plugins.table.insertTable(a.cols||1,a.rows||1));r.dom.setAttribs(v,{cellspacing:a.cellspacing,cellpadding:a.cellpadding,border:a.border,style:a.style,"class":a["class"]});r.dom.setStyles(v,{width:e(a.width),height:e(a.height)});i=y.select("caption",v)[0];i&&!a.caption&&y.remove(i);!i&&a.caption&&(i=y.create("caption"),i.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',v.insertBefore(i,v.firstChild));h(v);a.align&&r.formatter.apply("align"+a.align,{},v);r.focus();r.addVisual()})}var y=r.dom,v,b,k,d,a={},p;u===!0?(v=y.getParent(r.selection.getStart(),"table"),v&&(a={width:f(y.getStyle(v,"width")||y.getAttrib(v,"width")),height:f(y.getStyle(v,"height")||y.getAttrib(v,"height")),cellspacing:v?y.getAttrib(v,"cellspacing"):"",cellpadding:v?y.getAttrib(v,"cellpadding"):"",border:v?y.getAttrib(v,"border"):"",caption:!!y.select("caption",v)[0],"class":y.getAttrib(v,"class")},i("left center right".split(" "),function(n){r.formatter.matchNode(v,"align"+n)&&(a.align=n)}))):(b={label:"Cols",name:"cols"},k={label:"Rows",name:"rows"});r.settings.table_class_list&&(a["class"]&&(a["class"]=a["class"].replace(/\s*mce\-item\-table\s*/g,"")),d={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[n.value]})})})});p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[b,k,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},d]};r.settings.table_adv_tab!==!1?(l(y,a,v),r.windowManager.open({title:"Table properties",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},s(y)],onsubmit:w})):r.windowManager.open({title:"Table properties",data:a,body:p,onsubmit:w})};u.merge=function(n,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var i=this.toJSON();r.undoManager.transact(function(){n.merge(t,i.cols,i.rows)})}})};u.cell=function(){function w(){o(a,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){i(y,function(n){r.dom.setAttribs(n,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(n,{width:e(t.width),height:e(t.height)});t.type&&n.nodeName.toLowerCase()!=t.type&&(n=a.rename(n,t.type));h(n);t.align&&r.formatter.apply("align"+t.align,{},n);v(n);t.valign&&r.formatter.apply("valign"+t.valign,{},n)});r.focus()})}var a=r.dom,u,t,b,y=[],p;(y=r.dom.select("td.mce-item-selected,th.mce-item-selected"),u=r.dom.getParent(r.selection.getStart(),"td,th"),!y.length&&u&&y.push(u),u=u||y[0])&&(t={width:f(a.getStyle(u,"width")||a.getAttrib(u,"width")),height:f(a.getStyle(u,"height")||a.getAttrib(u,"height")),scope:a.getAttrib(u,"scope"),"class":a.getAttrib(u,"class")},t.type=u.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(u,"align"+n)&&(t.align=n)}),i("top middle bottom".split(" "),function(n){r.formatter.matchNode(u,"valign"+n)&&(t.valign=n)}),r.settings.table_cell_class_list&&(b={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_cell_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[n.value]})})})}),p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},b]},r.settings.table_cell_adv_tab!==!1?(l(a,t,u),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:t,body:[{title:"General",type:"form",items:p},s(a)],onsubmit:w})):r.windowManager.open({title:"Cell properties",data:t,items:p,onsubmit:w}))};u.row=function(){function p(){var f,c,s;o(u,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){var n=t.type;i(v,function(i){r.dom.setAttribs(i,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(i,{height:e(t.height)});n!=i.parentNode.nodeName.toLowerCase()&&(f=u.getParent(i,"table"),c=i.parentNode,s=u.select(n,f)[0],s||(s=u.create(n),f.firstChild?f.insertBefore(s,f.firstChild):f.appendChild(s)),s.appendChild(i),c.hasChildNodes()||u.remove(c));h(i);t.align&&r.formatter.apply("align"+t.align,{},i)});r.focus()})}var u=r.dom,w,b,a,k,t,v=[],y;w=r.dom.getParent(r.selection.getStart(),"table");b=r.dom.getParent(r.selection.getStart(),"td,th");i(w.rows,function(n){i(n.cells,function(t){if(u.hasClass(t,"mce-item-selected")||t==b)return(v.push(n),!1)})});a=v[0];a&&(t={height:f(u.getStyle(a,"height")||u.getAttrib(a,"height")),scope:u.getAttrib(a,"scope"),"class":u.getAttrib(a,"class")},t.type=a.parentNode.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(a,"align"+n)&&(t.align=n)}),r.settings.table_row_class_list&&(k={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_row_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[n.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},k]},r.settings.table_row_adv_tab!==!1?(l(u,t,a),r.windowManager.open({title:"Row properties",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},s(u)],onsubmit:p})):r.windowManager.open({title:"Row properties",data:t,body:y,onsubmit:p}))}}});i("tinymce/tableplugin/Plugin",[e,o,s,c,r,h,f,"tinymce/PluginManager"],function(n,t,i,r,u,f,e,o){function h(u){function f(n){return function(){u.execCommand(n)}}function v(n,t){for(var o,r,i='<table id="__mce"><tbody>',f=0;t>f;f++){for(i+="<tr>",o=0;n>o;o++)i+="<td>"+(e.ie?" ":"<br>")+"<\/td>";i+="<\/tr>"}return i+="<\/tbody><\/table>",u.undoManager.transact(function(){u.insertContent(i);r=u.dom.get("__mce");u.dom.setAttrib(r,"id",null);u.dom.setAttribs(r,u.settings.table_default_attributes||{});u.dom.setStyles(r,u.settings.table_default_styles||{})}),r}function y(n,t){function i(){n.disabled(!u.dom.getParent(u.selection.getStart(),t));u.selection.selectorChanged(t,function(t){n.disabled(!t)})}u.initialized?i():u.on("init",i)}function p(){y(this,"table")}function o(){y(this,"td,th")}function b(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;10>t;t++){for(n+="<tr>",i=0;10>i;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}function w(n,t,i){var s=i.getEl().getElementsByTagName("table")[0],r,f,h,e,o,c=i.isRtl()||"tl-tr"==i.parent().rel;for(s.nextSibling.innerHTML=n+1+" x "+(t+1),c&&(n=9-n),f=0;10>f;f++)for(r=0;10>r;r++)e=s.rows[f].childNodes[r].firstChild,o=(c?r>=n:n>=r)&&t>=f,u.dom.toggleClass(e,"mce-active",o),o&&(h=e);return h.parentNode}var c,l=this,h=new r(u),a;u.settings.table_grid===!1?u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:h.table}):u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),h.table())},onshow:function(){w(0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(n,"mce-active");u.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:b(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var r=n.target,t,i;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),i=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),(t!==this.lastX||i!==this.lastY)&&(w(t,i,n.control),this.lastX=t,this.lastY=i))},onclick:function(n){var t=this;"A"==n.target.tagName.toUpperCase()&&(n.preventDefault(),n.stopPropagation(),t.parent().cancel(),u.undoManager.transact(function(){v(t.lastX+1,t.lastY+1)}),u.addVisual())}}]});u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:p,onclick:h.tableProps});u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"});u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:f("mceTableCellProps"),onPostRender:o},{text:"Merge cells",onclick:f("mceTableMergeCells"),onPostRender:o},{text:"Split cell",onclick:f("mceTableSplitCells"),onPostRender:o}]});u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:f("mceTableInsertRowBefore"),onPostRender:o},{text:"Insert row after",onclick:f("mceTableInsertRowAfter"),onPostRender:o},{text:"Delete row",onclick:f("mceTableDeleteRow"),onPostRender:o},{text:"Row properties",onclick:f("mceTableRowProps"),onPostRender:o},{text:"-"},{text:"Cut row",onclick:f("mceTableCutRow"),onPostRender:o},{text:"Copy row",onclick:f("mceTableCopyRow"),onPostRender:o},{text:"Paste row before",onclick:f("mceTablePasteRowBefore"),onPostRender:o},{text:"Paste row after",onclick:f("mceTablePasteRowAfter"),onPostRender:o}]});u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:f("mceTableInsertColBefore"),onPostRender:o},{text:"Insert column after",onclick:f("mceTableInsertColAfter"),onPostRender:o},{text:"Delete column",onclick:f("mceTableDeleteCol"),onPostRender:o}]});a=[];s("inserttable tableprops deletetable | cell row column".split(" "),function(n){a.push("|"==n?{text:"-"}:u.menuItems[n])});u.addButton("table",{type:"menubutton",title:"Table",menu:a});e.isIE||u.on("click",function(n){n=n.target;"TABLE"===n.nodeName&&(u.selection.select(n),u.nodeChanged())});l.quirks=new t(u);u.on("Init",function(){l.cellSelection=new i(u)});s({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(n){var t;t=u.dom.getParent(u.selection.getStart(),"th,td");u.dom.select("td.mce-item-selected,th.mce-item-selected").length?n.merge():h.merge(n,t)},mceTableInsertRowBefore:function(n){n.insertRow(!0)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(!0)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){c=n.cutRows()},mceTableCopyRow:function(n){c=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(c,!0)},mceTablePasteRowAfter:function(n){n.pasteRows(c)},mceTableDelete:function(n){n.deleteTable()}},function(t,i){u.addCommand(i,function(){var i=new n(u);i&&(t(i),u.execCommand("mceRepaint"),l.cellSelection.clear())})});s({mceInsertTable:h.table,mceTableProps:function(){h.table(!0)},mceTableRowProps:h.row,mceTableCellProps:h.cell},function(n,t){u.addCommand(t,function(t,i){n(i)})});u.settings.table_tab_navigation!==!1&&u.on("keydown",function(t){var r,i,f;9==t.keyCode&&(r=u.dom.getParent(u.selection.getStart(),"th,td"),r&&(t.preventDefault(),i=new n(u),f=t.shiftKey?-1:1,u.undoManager.transact(function(){!i.moveRelIdx(r,f)&&f>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(r,f))})))});l.insertTable=v}var s=u.each;o.add("table",h)});v([])}(this);tinymce.PluginManager.add("template",function(n){function r(t){return function(){var i=n.settings.templates;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):t(i)}}function u(t){function f(t){function f(t){var u,i;-1==t.indexOf("<html>")&&(u="",tinymce.each(n.contentCSS,function(t){u+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(t)+'">'}),t="<!DOCTYPE html><html><head>"+u+"<\/head><body>"+t+"<\/body><\/html>");t=e(t,"template_preview_replace_values");i=r.find("iframe")[0].getEl().contentWindow.document;i.open();i.write(t);i.close()}var u=t.control.value();u.url?tinymce.util.XHR.send({url:u.url,success:function(n){i=n;f(i)}}):(i=u.content,f(i));r.find("#description")[0].text(t.control.value().description)}var r,i,u=[];return t&&0!==t.length?(tinymce.each(t,function(n){u.push({selected:!u.length,text:n.title,value:{url:n.url,content:n.content,description:n.description}})}),r=n.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:u,onselect:f}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){o(!1,i)},width:n.getParam("template_popup_width",600),height:n.getParam("template_popup_height",500)}),void r.find("listbox")[0].fire("select")):void n.windowManager.alert("No templates defined")}function i(t,i){function r(n,t){if(n=""+n,n.length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n}var u="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o="January February March April May June July August September October November December".split(" ");return i=i||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+i.getFullYear()),t=t.replace("%y",""+i.getYear()),t=t.replace("%m",r(i.getMonth()+1,2)),t=t.replace("%d",r(i.getDate(),2)),t=t.replace("%H",""+r(i.getHours(),2)),t=t.replace("%M",""+r(i.getMinutes(),2)),t=t.replace("%S",""+r(i.getSeconds(),2)),t=t.replace("%I",""+((i.getHours()+11)%12+1)),t=t.replace("%p",""+(i.getHours()<12?"AM":"PM")),t=t.replace("%B",""+n.translate(o[i.getMonth()])),t=t.replace("%b",""+n.translate(e[i.getMonth()])),t=t.replace("%A",""+n.translate(f[i.getDay()])),t=t.replace("%a",""+n.translate(u[i.getDay()])),t=t.replace("%%","%")}function f(i){var u=n.dom,r=n.getParam("template_replace_values");t(u.select("*",i),function(n){t(r,function(t,i){u.hasClass(n,i)&&"function"==typeof r[i]&&r[i](n)})})}function e(i,r){return t(n.getParam(r),function(n,t){"function"!=typeof n&&(i=i.replace(new RegExp("\\{\\$"+t+"\\}","g"),n))}),i}function o(r,u){function c(n,t){return new RegExp("\\b"+t+"\\b","g").test(n.className)}var o,s,h=n.dom,l=n.selection.getContent();u=e(u,"template_replace_values");o=h.create("div",null,u);s=h.select(".mceTmpl",o);s&&s.length>0&&(o=h.create("div",null),o.appendChild(s[0].cloneNode(!0)));t(h.select("*",o),function(t){c(t,n.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_cdate_format",n.getLang("template.cdate_format"))));c(t,n.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_mdate_format",n.getLang("template.mdate_format"))));c(t,n.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=l)});f(o);n.execCommand("mceInsertContent",!1,o.innerHTML);n.addVisual()}var t=tinymce.each;n.addCommand("mceInsertTemplate",o);n.addButton("template",{title:"Insert template",onclick:r(u)});n.addMenuItem("template",{text:"Insert template",onclick:r(u),context:"insert"});n.on("PreProcess",function(r){var u=n.dom;t(u.select("div",r.node),function(r){u.hasClass(r,"mceTmpl")&&(t(u.select("*",r),function(t){u.hasClass(t,n.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_mdate_format",n.getLang("template.mdate_format"))))}),f(r))})})});tinymce.PluginManager.add("textcolor",function(n){function o(t){var i;return n.dom.getParents(n.selection.getStart(),function(n){var r;(r=n.style["forecolor"==t?"color":"background-color"])&&(i=r)}),i}function s(){for(var r=[],i=n.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=0;t<i.length;t+=2)r.push({text:i[t+1],color:"#"+i[t]});return r}function i(){function l(n,t){var i="transparent"==n;return'<td class="mce-grid-cell'+(i?" mce-colorbtn-trans":"")+'"><div id="'+c+"-"+y+++'" data-mce-color="'+(n?n:"")+'" role="option" tabIndex="-1" style="'+(n?"background-color: "+n:"")+'" title="'+tinymce.translate(t)+'">'+(i?"&#215;":"")+"<\/div><\/td>"}var u,o,i,a,r,f,h,v=this,c=v._id,y=0;for(u=s(),u.push({text:tinymce.translate("No color"),color:"transparent"}),i='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=u.length-1,f=0;e>f;f++){for(i+="<tr>",r=0;t>r;r++)h=f*t+r,h>a?i+="<td><\/td>":(o=u[h],i+=l(o.color,o.text));i+="<\/tr>"}if(n.settings.color_picker_callback){for(i+='<tr><td colspan="'+t+'" class="mce-custom-color-btn"><div id="'+c+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+c+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"<\/button><\/div><\/td><\/tr>",i+="<tr>",r=0;t>r;r++)i+=l("","Custom color");i+="<\/tr>"}return i+"<\/tbody><\/table>"}function r(t,i){n.focus();n.formatter.apply(t,{value:i});n.nodeChanged()}function h(t){n.focus();n.formatter.remove(t,{value:null},null,!0);n.nodeChanged()}function u(i){function e(n){u.hidePanel();u.color(n);r(u.settings.format,n)}function s(n,t){n.style.background=t;n.setAttribute("data-mce-color",t)}var f,u=this.parent();if(tinymce.DOM.getParent(i.target,".mce-custom-color-btn")&&(u.hidePanel(),n.settings.color_picker_callback.call(n,function(n){for(var f,o=u.panel.getEl().getElementsByTagName("table")[0],r=tinymce.map(o.rows[o.rows.length-1].childNodes,function(n){return n.firstChild}),i=0;i<r.length&&(f=r[i],f.getAttribute("data-mce-color"));i++);if(i==t)for(i=0;t-1>i;i++)s(r[i],r[i+1].getAttribute("data-mce-color"));s(f,n);e(n)},o(u.settings.format))),f=i.target.getAttribute("data-mce-color")){if(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),i.target.setAttribute("aria-selected",!0),this.lastId=i.target.id,"transparent"==f)return h(u.settings.format),void u.hidePanel();e(f)}else null!==f&&u.hidePanel()}function f(){var n=this;n._color&&r(n.settings.format,n._color)}var t,e;e=n.settings.textcolor_rows||5;t=n.settings.textcolor_cols||8;n.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:i,onclick:u},onclick:f});n.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:i,onclick:u},onclick:f})});tinymce.PluginManager.add("textpattern",function(n){function i(){return r&&(t.sort(function(n,t){return n.start.length>t.start.length?-1:n.start.length<t.start.length?1:0}),r=!1),t}function u(n){for(var r=i(),t=0;t<r.length;t++)if(0===n.indexOf(r[t].start)&&(!r[t].end||n.lastIndexOf(r[t].end)==n.length-r[t].end.length))return r[t]}function e(n,t,r){for(var u,e=i(),f=0;f<e.length;f++)if(u=e[f],u.end&&n.substr(t-u.end.length-r,u.end.length)==u.end)return u}function f(t){function p(){i=i.splitText(f);i.splitText(o-f-s);i.deleteData(0,r.start.length);i.deleteData(i.data.length-r.end.length,r.end.length)}var c,y,l,i,o,f,a,h,r,s,v;return c=n.selection,y=n.dom,c.isCollapsed()&&(l=c.getRng(!0),i=l.startContainer,o=l.startOffset,a=i.data,s=t?1:0,3==i.nodeType&&(r=e(a,o,s),r&&(f=Math.max(0,o-s),f=a.lastIndexOf(r.start,f-r.end.length-1),-1!==f&&(h=y.createRng(),h.setStart(i,f),h.setEnd(i,o-s),r=u(h.toString()),r&&r.end&&!(i.data.length<=r.start.length+r.end.length)))))?(v=n.formatter.get(r.format),v&&v[0].inline?(p(),n.formatter.apply(r.format,{},i),i):void 0):void 0}function o(){var f,l,o,i,s,h,c,t,a,r,e;if(f=n.selection,l=n.dom,f.isCollapsed()&&(c=l.getParent(f.getStart(),"p"))){for(a=new tinymce.dom.TreeWalker(c,c);s=a.next();)if(3==s.nodeType){i=s;break}if(i){if(t=u(i.data),!t)return;if(r=f.getRng(!0),o=r.startContainer,e=r.startOffset,i==o&&(e=Math.max(0,e-t.start.length)),tinymce.trim(i.data).length==t.start.length)return;t.format&&(h=n.formatter.get(t.format),h&&h[0].block&&(i.deleteData(0,t.start.length),n.formatter.apply(t.format,{},i),r.setStart(o,e),r.collapse(!0),f.setRng(r)));t.cmd&&n.undoManager.transact(function(){i.deleteData(0,t.start.length);n.execCommand(t.cmd)})}}}function s(){var i,t;t=f();t&&(i=n.dom.createRng(),i.setStart(t,t.data.length),i.setEnd(t,t.data.length),n.selection.setRng(i));o()}function h(){var t,e,i,r,u;t=f(!0);t&&(u=n.dom,e=t.data.slice(-1),/[\u00a0 ]/.test(e)&&(t.deleteData(t.data.length-1,1),i=u.doc.createTextNode(e),t.nextSibling?u.insertAfter(i,t.nextSibling):t.parentNode.appendChild(i),r=u.createRng(),r.setStart(i,1),r.setEnd(i,1),n.selection.setRng(r)))}var t,r=!0;t=n.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];n.on("keydown",function(n){13!=n.keyCode||tinymce.util.VK.modifierPressed(n)||s()},!0);n.on("keyup",function(n){32!=n.keyCode||tinymce.util.VK.modifierPressed(n)||h()});this.getPatterns=i;this.setPatterns=function(n){t=n;r=!0}});tinymce.PluginManager.add("visualblocks",function(n,t){function u(){var t=this;t.active(r);n.on("VisualBlocks",function(){t.active(n.dom.hasClass(n.getBody(),"mce-visualblocks"))})}var i,f,r;window.NodeList&&(n.addCommand("mceVisualBlocks",function(){var e,u=n.dom;i||(i=u.uniqueId(),e=u.create("link",{id:i,rel:"stylesheet",href:t+"/css/visualblocks.css"}),n.getDoc().getElementsByTagName("head")[0].appendChild(e));n.on("PreviewFormats AfterPreviewFormats",function(t){r&&u.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)});u.toggleClass(n.getBody(),"mce-visualblocks");r=n.dom.hasClass(n.getBody(),"mce-visualblocks");f&&f.active(u.hasClass(n.getBody(),"mce-visualblocks"));n.fire("VisualBlocks")}),n.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:u}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:u,selectable:!0,context:"view",prependToContext:!0}),n.on("init",function(){n.settings.visualblocks_default_state&&n.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")}))});tinymce.PluginManager.add("visualchars",function(n){function i(i){var o,f,r,e,s,h,c=n.getBody(),l=n.selection;if(t=!t,u.state=t,n.fire("VisualChars",{state:t}),i&&(h=l.getBookmark()),t)for(f=[],tinymce.walk(c,function(n){3==n.nodeType&&n.nodeValue&&-1!=n.nodeValue.indexOf(" ")&&f.push(n)},"childNodes"),r=0;r<f.length;r++){for(e=f[r].nodeValue,e=e.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mce-nbsp">$1<\/span>'),s=n.dom.create("div",null,e);o=s.lastChild;)n.dom.insertAfter(o,f[r]);n.dom.remove(f[r])}else for(f=n.dom.select("span.mce-nbsp",c),r=f.length-1;r>=0;r--)n.dom.remove(f[r],1);l.moveToBookmark(h)}function r(){var t=this;n.on("VisualChars",function(n){t.active(n.state)})}var t,u=this;n.addCommand("mceVisualChars",i);n.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:r});n.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:r,selectable:!0,context:"view",prependToContext:!0});n.on("beforegetcontent",function(n){t&&"raw"!=n.format&&!n.draft&&(t=!0,i(!1))})});tinymce.PluginManager.add("wordcount",function(n){function i(){n.theme.panel.find("#wordcount").text(["Words: {0}",t.getCount()])}var r,u,t=this;r=n.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);u=n.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);n.on("init",function(){var r=n.theme.panel&&n.theme.panel.find("#statusbar")[0];r&&window.setTimeout(function(){r.insert({type:"label",name:"wordcount",text:["Words: {0}",t.getCount()],classes:"wordcount",disabled:n.settings.readonly},0);n.on("setcontent beforeaddundo",i);n.on("keyup",function(n){32==n.keyCode&&i()})},0)});t.getCount=function(){var t=n.getContent({format:"raw"}),f=0,i;return t&&(t=t.replace(/\.\.\./g," "),t=t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),t=t.replace(u,""),i=t.match(r),i&&(f=i.length)),f}});tinymce.ThemeManager.add("modern",function(n){function o(){function f(r){var f,o=[];if(r)return e(r.split(/[ ,]/),function(i){function e(){var t=n.selection;"bullist"==r&&t.selectorChanged("ul > li",function(n,t){for(var r,u=t.parents.length;u--&&(r=t.parents[u].nodeName,"OL"!=r&&"UL"!=r););i.active(n&&"UL"==r)});"numlist"==r&&t.selectorChanged("ol > li",function(n,t){for(var r,u=t.parents.length;u--&&(r=t.parents[u].nodeName,"OL"!=r&&"UL"!=r););i.active(n&&"OL"==r)});i.settings.stateSelector&&t.selectorChanged(i.settings.stateSelector,function(n){i.active(n)},!0);i.settings.disabledStateSelector&&t.selectorChanged(i.settings.disabledStateSelector,function(n){i.disabled(n)})}var r;"|"==i?f=null:u.has(i)?(i={type:i},t.toolbar_items_size&&(i.size=t.toolbar_items_size),o.push(i),f=null):(f||(f={type:"buttongroup",items:[]},o.push(f)),n.buttons[i]&&(r=i,i=n.buttons[r],"function"==typeof i&&(i=i()),i.type=i.type||"button",t.toolbar_items_size&&(i.size=t.toolbar_items_size),i=u.create(i),f.items.push(i),n.initialized?e():n.on("init",e)))}),i.push({type:"toolbar",layout:"flow",items:o}),!0}var i=[],r;if(tinymce.isArray(t.toolbar)){if(0===t.toolbar.length)return;tinymce.each(t.toolbar,function(n,i){t["toolbar"+(i+1)]=n});delete t.toolbar}for(r=1;10>r&&f(t["toolbar"+r]);r++);return i.length||t.toolbar===!1||f(t.toolbar||y),i.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}:void 0}function s(){function s(t){var i;return"|"==t?{text:"|"}:i=n.menuItems[t]}function l(i){var o,f,r,h,l,u;if(l=tinymce.makeMap((t.removed_menuitems||"").split(/[ ,]/)),t.menu?(f=t.menu[i],h=!0):f=c[i],f){for(o={text:f.title},r=[],e((f.items||"").split(/[ ,]/),function(n){var t=s(n);t&&!l[n]&&r.push(s(n))}),h||e(n.menuItems,function(n){n.context==i&&("before"==n.separator&&r.push({text:"|"}),n.prependToContext?r.unshift(n):r.push(n),"after"==n.separator&&r.push({text:"|"}))}),u=0;u<r.length;u++)"|"==r[u].text&&(0===u||u==r.length-1)&&r.splice(u,1);if(o.menu=r,!o.menu.length)return null}return o}var r,h=[],f=[],o,u,i;if(t.menu)for(r in t.menu)f.push(r);else for(r in c)f.push(r);for(o="string"==typeof t.menubar?t.menubar.split(/[ ,]/):f,u=0;u<o.length;u++)i=o[u],i=l(i),i&&h.push(i);return h}function h(t){function i(n){var i=t.find(n)[0];i&&i.focus(!0)}n.shortcuts.add("Alt+F9","",function(){i("menubar")});n.shortcuts.add("Alt+F10","",function(){i("toolbar")});n.shortcuts.add("Alt+F11","",function(){i("elementpath")});t.on("cancel",function(){n.focus()})}function f(i,u){function o(n){return{width:n.clientWidth,height:n.clientHeight}}var e,f,s,h;e=n.getContainer();f=n.getContentAreaContainer().firstChild;s=o(e);h=o(f);null!==i&&(i=Math.max(t.min_width||100,i),i=Math.min(t.max_width||65535,i),r.setStyles(e,"width",i+(s.width-h.width)),r.setStyles(f,"width",i));u=Math.max(t.min_height||100,u);u=Math.min(t.max_height||65535,u);r.setStyles(f,"height",u);n.fire("ResizeEditor")}function l(t,r){var u=n.getContentAreaContainer();i.resizeTo(u.clientWidth+t,u.clientHeight+r)}function a(f){function v(){var t,i;if(e&&e.moveRel&&e.visible()&&!e._fixed){var u=n.selection.getScrollContainer(),f=n.getBody(),o=0,s=0;u&&(t=r.getPos(f),i=r.getPos(u),o=Math.max(0,i.x-t.x),s=Math.max(0,i.y-t.y));e.fixed(!1).moveRel(f,n.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,s)}}function l(){e&&(e.show(),v(),r.addClass(n.getBody(),"mce-edit-focus"))}function y(){e&&(e.hide(),r.removeClass(n.getBody(),"mce-edit-focus"))}function a(){return e?void(e.visible()||l()):(e=i.panel=u.create({type:c?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!c,border:1,items:[t.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s()},o()]}),n.fire("BeforeRenderUI"),e.renderTo(c||document.body).reflow(),h(e),l(),n.on("nodeChange",v),n.on("activate",l),n.on("deactivate",y),void n.nodeChanged())}var e,c;return t.fixed_toolbar_container&&(c=r.select(t.fixed_toolbar_container)[0]),t.content_editable=!0,n.on("focus",function(){f.skinUiCss?tinymce.DOM.styleSheetLoader.load(f.skinUiCss,a,a):a()}),n.on("blur hide",y),n.on("remove",function(){e&&(e.remove(),e=null)}),f.skinUiCss&&tinymce.DOM.styleSheetLoader.load(f.skinUiCss),{}}function v(r){var e,l,c;return r.skinUiCss&&tinymce.DOM.loadCSS(r.skinUiCss),e=i.panel=u.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[t.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s()},o(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),t.resize!==!1&&(l={type:"resizehandle",direction:t.resize,onResizeStart:function(){var t=n.getContentAreaContainer().firstChild;c={width:t.clientWidth,height:t.clientHeight}},onResize:function(n){"both"==t.resize?f(c.width+n.deltaX,c.height+n.deltaY):f(null,c.height+n.deltaY)}}),t.statusbar!==!1&&e.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},l]}),t.readonly&&e.find("*").disabled(!0),n.fire("BeforeRenderUI"),e.renderBefore(r.targetNode).reflow(),t.width&&tinymce.DOM.setStyle(e.getEl(),"width",t.width),n.on("remove",function(){e.remove();e=null}),h(e),{iframeContainer:e.find("#iframe")[0].getEl(),editorContainer:e.getEl()}}var i=this,t=n.settings,u=tinymce.ui.Factory,e=tinymce.each,r=tinymce.DOM,c={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},y="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";i.renderUI=function(r){var f=t.skin!==!1?t.skin||"lightgray":!1,u;return f&&(u=t.skin_url,u=u?n.documentBaseURI.toAbsolute(u):tinymce.baseURL+"/skins/"+f,r.skinUiCss=tinymce.Env.documentMode<=7?u+"/skin.ie7.min.css":u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")),n.on("ProgressState",function(n){i.throbber=i.throbber||new tinymce.ui.Throbber(i.panel.getEl("body"));n.state?i.throbber.show(n.time):i.throbber.hide()}),t.inline?a(r):v(r)};i.resizeTo=f;i.resizeBy=l});!function(n){"use strict";var t=function(t,i){this.$ns="bootstrap-markdown";this.$element=n(t);this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null};this.$options=n.extend(!0,{},n.fn.markdown.defaults,i,this.$element.data(),this.$element.data("options"));this.$oldContent=null;this.$isPreview=!1;this.$isFullscreen=!1;this.$editor=null;this.$textarea=null;this.$handler=[];this.$callback=[];this.$nextTab=[];this.showEditor()},r,i,u;t.prototype={constructor:t,__alterButtons:function(t,i){var r=this.$handler,u=t=="all",f=this;n.each(r,function(n,r){var e=!0;e=u?!1:r.indexOf(t)<0;e==!1&&i(f.$editor.find('button[data-handler="'+r+'"]'))})},__buildButtons:function(t,i){for(var v=this.$ns,w=this.$handler,b=this.$callback,e,s,o,h,c,f=0;f<t.length;f++)for(s=t[f],e=0;e<s.length;e++){for(h=s[e].data,c=n("<div/>",{"class":"btn-group"}),o=0;o<h.length;o++){var r=h[o],u,l,y=v+"-"+r.name,k=this.__getIcon(r.icon),d=r.btnText?r.btnText:"",p=r.btnClass?r.btnClass:"btn",g=r.tabIndex?r.tabIndex:"-1",a=typeof r.hotkey!="undefined"?r.hotkey:"",nt=typeof jQuery.hotkeys!="undefined"&&a!==""?" ("+a+")":"";u=n("<button><\/button>");u.text(" "+this.__localize(d)).addClass("btn-default btn-sm").addClass(p);p.match(/btn\-(primary|success|info|warning|danger|link)/)&&u.removeClass("btn-default");u.attr({type:"button",title:this.__localize(r.title)+nt,tabindex:g,"data-provider":v,"data-handler":y,"data-hotkey":a});r.toggle==!0&&u.attr("data-toggle","button");l=n("<span/>");l.addClass(k);l.prependTo(u);c.append(u);w.push(y);b.push(r.callback)}i.append(c)}return i},__setListener:function(){var t=typeof this.$textarea.attr("rows")!="undefined",i=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",r=t?this.$textarea.attr("rows"):i;this.$textarea.attr("rows",r);this.$options.resize&&this.$textarea.css("resize",this.$options.resize);this.$textarea.on("focus",n.proxy(this.focus,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this)).on("change",n.proxy(this.change,this));if(this.eventSupported("keydown"))this.$textarea.on("keydown",n.proxy(this.keydown,this));this.$textarea.data("markdown",this)},__handle:function(t){var r=n(t.currentTarget),u=this.$handler,f=this.$callback,i=r.attr("data-handler"),e=u.indexOf(i),o=f[e];n(t.currentTarget).focus();o(this);this.change(this);i.indexOf("cmdSave")<0&&this.$textarea.focus();t.preventDefault()},__localize:function(t){var i=n.fn.markdown.messages,r=this.$options.language;return typeof i!="undefined"&&typeof i[r]!="undefined"&&typeof i[r][t]!="undefined"?i[r][t]:t},__getIcon:function(n){return typeof n=="object"?n[this.$options.iconlibrary]:n},setFullscreen:function(t){var i=this.$editor,r=this.$textarea;if(t===!0){i.addClass("md-fullscreen-mode");n("body").addClass("md-nooverflow");this.$options.onFullscreen(this)}else i.removeClass("md-fullscreen-mode"),n("body").removeClass("md-nooverflow");this.$isFullscreen=t;r.focus()},showEditor:function(){var c=this,u,w=this.$ns,i=this.$element,d=i.css("height"),g=i.css("width"),o=this.$editable,b=this.$handler,k=this.$callback,t=this.$options,r=n("<div/>",{"class":"md-editor",click:function(){c.focus()}}),e,f,y,p,v,s;if(this.$editor==null){if(e=n("<div/>",{"class":"md-header btn-toolbar"}),f=[],t.buttons.length>0&&(f=f.concat(t.buttons[0])),t.additionalButtons.length>0&&(f=f.concat(t.additionalButtons[0])),t.reorderButtonGroups.length>0&&(f=f.filter(function(n){return t.reorderButtonGroups.indexOf(n.name)>-1}).sort(function(n,i){return t.reorderButtonGroups.indexOf(n.name)<t.reorderButtonGroups.indexOf(i.name)?-1:t.reorderButtonGroups.indexOf(n.name)>t.reorderButtonGroups.indexOf(i.name)?1:0})),f.length>0&&(e=this.__buildButtons([f],e)),t.fullscreen.enable)e.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(t.fullscreen.icons.fullscreenOn)+'"><\/span><\/a><\/div>').on("click",".md-control-fullscreen",function(n){n.preventDefault();c.setFullscreen(!0)});r.append(e);i.is("textarea")?(i.before(r),u=i,u.addClass("md-input"),r.append(u)):(y=typeof toMarkdown=="function"?toMarkdown(i.html()):i.html(),p=n.trim(y),u=n("<textarea/>",{"class":"md-input",val:p}),r.append(u),o.el=i,o.type=i.prop("tagName").toLowerCase(),o.content=i.html(),n(i[0].attributes).each(function(){o.attrKeys.push(this.nodeName);o.attrValues.push(this.nodeValue)}),i.replaceWith(r));var h=n("<div/>",{"class":"md-footer"}),l=!1,a="";t.savable&&(l=!0,v="cmdSave",b.push(v),k.push(t.onSave),h.append('<button class="btn btn-success" data-provider="'+w+'" data-handler="'+v+'"><i class="icon icon-white icon-ok"><\/i> '+this.__localize("Save")+"<\/button>"));a=typeof t.footer=="function"?t.footer(this):t.footer;n.trim(a)!==""&&(l=!0,h.append(a));l&&r.append(h);t.width&&t.width!=="inherit"&&(jQuery.isNumeric(t.width)?(r.css("display","table"),u.css("width",t.width+"px")):r.addClass(t.width));t.height&&t.height!=="inherit"&&(jQuery.isNumeric(t.height)?(s=t.height,e&&(s=Math.max(0,s-e.outerHeight())),h&&(s=Math.max(0,s-h.outerHeight())),u.css("height",s+"px")):r.addClass(t.height));this.$editor=r;this.$textarea=u;this.$editable=o;this.$oldContent=this.getContent();this.__setListener();this.$editor.attr("id",(new Date).getTime());this.$editor.on("click",'[data-provider="bootstrap-markdown"]',n.proxy(this.__handle,this));(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all"));this.eventSupported("keydown")&&typeof jQuery.hotkeys=="object"&&e.find('[data-provider="bootstrap-markdown"]').each(function(){var t=n(this),i=t.attr("data-hotkey");i.toLowerCase()!==""&&u.bind("keydown",i,function(){return t.trigger("click"),!1})});t.initialstate==="preview"?this.showPreview():t.initialstate==="fullscreen"&&t.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();if(t.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),t.fullscreen.enable&&t.fullscreen!==!1){this.$editor.append('          <div class="md-fullscreen-controls">            <a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(t.fullscreen.icons.fullscreenOff)+'"><\/span><\/a>          <\/div>');this.$editor.on("click",".exit-fullscreen",function(n){n.preventDefault();c.setFullscreen(!1)})}this.hideButtons(t.hiddenButtons);this.disableButtons(t.disabledButtons);t.onShow(this);return this},parseContent:function(){var t,i=this.$options.onPreview(this),n;return typeof i=="string"?t=i:(n=this.$textarea.val(),t=typeof markdown=="object"?markdown.toHTML(n):typeof marked=="function"?marked(n):n),t},showPreview:function(){var f=this.$options,i=this.$textarea,r=i.next(),t=n("<div/>",{"class":"md-preview","data-provider":"markdown-preview"}),u;return this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),u=this.parseContent(),t.html(u),r&&r.attr("class")=="md-footer"?t.insertBefore(r):i.parent().append(t),t.css({width:i.outerWidth()+"px",height:i.outerHeight()+"px"}),this.$options.resize&&t.css("resize",this.$options.resize),i.hide(),t.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this},hidePreview:function(){this.$isPreview=!1;var n=this.$editor.find('div[data-provider="markdown-preview"]');return n.remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(n){return this.$textarea.val(n),this},findSelection:function(n){var u=this.getContent(),t,i,r;return(t=u.indexOf(n),t>=0&&n.length>0)?(i=this.getSelection(),this.setSelection(t,t+n.length),r=this.getSelection(),this.setSelection(i.start,i.end),r):null},getSelection:function(){var n=this.$textarea[0];return("selectionStart"in n&&function(){var t=n.selectionEnd-n.selectionStart;return{start:n.selectionStart,end:n.selectionEnd,length:t,text:n.value.substr(n.selectionStart,t)}}||function(){return null})()},setSelection:function(n,t){var i=this.$textarea[0];return("selectionStart"in i&&function(){i.selectionStart=n;i.selectionEnd=t;return}||function(){return null})()},replaceSelection:function(n){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+n+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=n,jQuery(t)})()},getNextTab:function(){if(this.$nextTab.length==0)return null;var t,n=this.$nextTab.shift();return typeof n=="function"?t=n():typeof n=="object"&&n.length>0&&(t=n),t},setNextTab:function(n,t){var r,i;typeof n=="string"?(r=this,this.$nextTab.push(function(){return r.findSelection(n)})):typeof n=="number"&&typeof t=="number"&&(i=this.getSelection(),this.setSelection(n,t),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end));return},__parseButtonNameParam:function(n){var t=[];return typeof n=="string"?t.push(n):t=n,t},enableButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.removeAttr("disabled")})}),this},disableButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.attr("disabled","disabled")})}),this},hideButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.addClass("hidden")})}),this},showButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.removeClass("hidden")})}),this},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},keyup:function(n){var t=!1,i,u,r;switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:(i=this.getNextTab(),i!=null)?(u=this,setTimeout(function(){u.setSelection(i.start,i.end)},500),t=!0):(r=this.getSelection(),r.start==r.end&&r.end==this.getContent().length?t=!1:(this.setSelection(this.getContent().length,this.getContent().length),t=!0));break;case 13:t=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1);t=!1;break;default:t=!1}t&&(n.stopPropagation(),n.preventDefault());this.$options.onChange(this)},change:function(){this.$options.onChange(this);return this},focus:function(){var t=this.$options,r=t.hideable,i=this.$editor;i.addClass("active");n(document).find(".md-editor").each(function(){if(n(this).attr("id")!=i.attr("id")){var t;(t=n(this).find("textarea").data("markdown"),t==null)&&(t=n(this).find('div[data-provider="markdown-preview"]').data("markdown"));t&&t.blur()}});t.onFocus(this);return this},blur:function(){var u=this.$options,e=u.hideable,i=this.$editor,t=this.$editable;if(i.hasClass("active")||this.$element.parent().length==0){if(i.removeClass("active"),e)if(t.el!=null){var r=n("<"+t.type+"/>"),f=this.getContent(),o=typeof markdown=="object"?markdown.toHTML(f):f;n(t.attrKeys).each(function(n){r.attr(t.attrKeys[n],t.attrValues[n])});r.html(o);i.replaceWith(r)}else i.hide();u.onBlur(this)}return this}};r=n.fn.markdown;n.fn.markdown=function(i){return this.each(function(){var r=n(this),u=r.data("markdown"),f=typeof i=="object"&&i;u||r.data("markdown",u=new t(this,f))})};n.fn.markdown.messages={};n.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length==0?n.__localize("strong text"):t.text;u.substr(t.start-2,2)=="**"&&u.substr(t.end,2)=="**"?(n.setSelection(t.start-2,t.end+2),n.replaceSelection(i),r=t.start-2):(n.replaceSelection("**"+i+"**"),r=t.start+2);n.setSelection(r,r+i.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length==0?n.__localize("emphasized text"):t.text;u.substr(t.start-1,1)=="_"&&u.substr(t.end,1)=="_"?(n.setSelection(t.start-1,t.end+1),n.replaceSelection(i),r=t.start-1):(n.replaceSelection("_"+i+"_"),r=t.start+1);n.setSelection(r,r+i.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(n){var r,u,t=n.getSelection(),f=n.getContent(),i,e;r=t.length==0?n.__localize("heading text"):t.text+"\n";(i=4,f.substr(t.start-i,i)=="### ")||(i=3,f.substr(t.start-i,i)=="###")?(n.setSelection(t.start-i,t.end),n.replaceSelection(r),u=t.start-i):t.start>0&&(e=f.substr(t.start-1,1),!!e&&e!="\n")?(n.replaceSelection("\n\n### "+r),u=t.start+6):(n.replaceSelection("### "+r),u=t.start+4);n.setSelection(u,u+r.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(t){var r,u,f=t.getSelection(),o=t.getContent(),i,e;r=f.length==0?t.__localize("enter link description here"):f.text;i=prompt(t.__localize("Insert Hyperlink"),"http://");i!=null&&i!=""&&i!="http://"&&i.substr(0,4)=="http"&&(e=n("<div>"+i+"<\/div>").text(),t.replaceSelection("["+r+"]("+e+")"),u=f.start+1,t.setSelection(u,u+r.length))}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture-o"},callback:function(t){var r,u,f=t.getSelection(),o=t.getContent(),i,e;r=f.length==0?t.__localize("enter image description here"):f.text;i=prompt(t.__localize("Insert Image Hyperlink"),"http://");i!=null&&i!=""&&i!="http://"&&i.substr(0,4)=="http"&&(e=n("<div>"+i+"<\/div>").text(),t.replaceSelection("!["+r+"]("+e+' "'+t.__localize("enter image title here")+'")'),u=f.start+2,t.setNextTab(t.__localize("enter image title here")),t.setSelection(u,u+r.length))}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(t){var r,f,i=t.getSelection(),e=t.getContent(),u;i.length==0?(r=t.__localize("list text here"),t.replaceSelection("- "+r),f=i.start+2):i.text.indexOf("\n")<0?(r=i.text,t.replaceSelection("- "+r),f=i.start+2):(u=[],u=i.text.split("\n"),r=u[0],n.each(u,function(n,t){u[n]="- "+t}),t.replaceSelection("\n\n"+u.join("\n")),f=i.start+4);t.setSelection(f,f+r.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(t){var r,f,i=t.getSelection(),e=t.getContent(),u;i.length==0?(r=t.__localize("list text here"),t.replaceSelection("1. "+r),f=i.start+3):i.text.indexOf("\n")<0?(r=i.text,t.replaceSelection("1. "+r),f=i.start+3):(u=[],u=i.text.split("\n"),r=u[0],n.each(u,function(n,t){u[n]="1. "+t}),t.replaceSelection("\n\n"+u.join("\n")),f=i.start+5);t.setSelection(f,f+r.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length==0?n.__localize("code text here"):t.text;u.substr(t.start-1,1)=="`"&&u.substr(t.end,1)=="`"?(n.setSelection(t.start-1,t.end+1),n.replaceSelection(i),r=t.start-1):(n.replaceSelection("`"+i+"`"),r=t.start+1);n.setSelection(r,r+i.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(t){var r,f,i=t.getSelection(),e=t.getContent(),u;i.length==0?(r=t.__localize("quote here"),t.replaceSelection("> "+r),f=i.start+2):i.text.indexOf("\n")<0?(r=i.text,t.replaceSelection("> "+r),f=i.start+2):(u=[],u=i.text.split("\n"),r=u[0],n.each(u,function(n,t){u[n]="> "+t}),t.replaceSelection("\n\n"+u.join("\n")),f=i.start+4);t.setSelection(f,f+r.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(n){var t=n.$isPreview;t==!1?n.showPreview():n.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(){},onPreview:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){},onChange:function(){},onFullscreen:function(){}};n.fn.markdown.Constructor=t;n.fn.markdown.noConflict=function(){return n.fn.markdown=r,this};i=function(n){var t=n;if(t.data("markdown")){t.data("markdown").showEditor();return}t.markdown()};u=function(){var t=n(document.activeElement);n(document).find(".md-editor").each(function(){var i=n(this),u=t.closest(".md-editor")[0]===this,r=i.find("textarea").data("markdown")||i.find('div[data-provider="markdown-preview"]').data("markdown");r&&!u&&r.blur()})};n(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(t){i(n(this));t.preventDefault()}).on("click focusin",function(n){u(n)}).ready(function(){n('textarea[data-provide="markdown"]').each(function(){i(n(this))})})}(window.jQuery);
/**
 * @license
 * =========================================================
 * bootstrap-datetimepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Contributions:
 *  - Andrew Rowls
 *  - Thiago de Arruda
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 * Patched 2013-07-14 to match formats of http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx 
 */
(function(n){function a(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function r(n,t,i){return t<n.length?n:Array(t-n.length+1).join(i||" ")+n}function y(n,i,r,u,f,o){return i&&r?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(o?' class="collapse in"':"")+'><div class="datepicker">'+t.template+'<\/div><\/li><li class="picker-switch accordion-toggle"><a><i class="'+n+'"><\/i><\/a><\/li><li'+(o?' class="collapse"':"")+'><div class="timepicker">'+e.getTemplate(u,f)+"<\/div><\/li><\/ul><\/div>":r?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+e.getTemplate(u,f)+"<\/div><\/div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+t.template+"<\/div><\/div>"}function i(){return new Date(Date.UTC.apply(Date,arguments))}var p=window.orientation!=undefined,o=function(n,t){this.id=v++;this.init(n,t)},w=function(n){return typeof n=="string"?new Date(n):n},h,c,l,t,e;o.prototype={constructor:o,init:function(t,i){var r;if(!(i.pickTime||i.pickDate))throw new Error("Must choose at least one picker");if(this.options=i,this.$element=n(t),this.language=i.language in s?i.language:"en",this.pickDate=i.pickDate,this.pickTime=i.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=i.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(r=this.component.find("i")),this.pickTime&&(r&&r.length&&(this.timeIcon=r.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),r.addClass(this.timeIcon)),this.pickDate&&(r&&r.length&&(this.dateIcon=r.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),r.removeClass(this.timeIcon),r.addClass(this.dateIcon)),this.widget=n(y(this.timeIcon,i.pickDate,i.pickTime,i.pick12HourFormat,i.pickSeconds,i.collapse)).appendTo("body"),this.minViewMode=i.minViewMode||this.$element.data("date-minviewmode")||0,typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.$element.data("date-viewmode")||0,typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode;this.weekStart=i.weekStart||this.$element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.setStartDate(i.startDate||this.$element.data("date-startdate"));this.setEndDate(i.endDate||this.$element.data("date-enddate"));this.fillDow();this.fillMonths();this.fillHours();this.fillMinutes();this.fillSeconds();this.update();this.showMode();this._attachDatePickerEvents()},show:function(n){this.widget.show();this.height=this.component?this.component.outerHeight():this.$element.outerHeight();this.place();this.$element.trigger({type:"show",date:this._date});this._attachDatePickerGlobalEvents();n&&(n.stopPropagation(),n.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0);this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1);this._attachDatePickerEvents()},hide:function(){for(var t,i=this.widget.find(".collapse"),n=0;n<i.length;n++)if(t=i.eq(n).data("collapse"),t&&t.transitioning)return;this.widget.hide();this.viewMode=this.startViewMode;this.showMode();this.set();this.$element.trigger({type:"hide",date:this._date});this._detachDatePickerGlobalEvents()},set:function(){var n="",t;this._unset||(n=this.formatDate(this._date));this.isInput?(this.$element.val(n),this._resetMaskPos(this.$element)):(this.component&&(t=this.$element.find("input"),t.val(n),this._resetMaskPos(t)),this.$element.data("date",n))},setValue:function(n){this._unset=n?!1:!0;typeof n=="string"?this._date=this.parseDate(n):n&&(this._date=new Date(n));this.set();this.viewDate=i(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0);this.fillDate();this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(n){n?this.setValue(n.valueOf()):this.setValue(null)},setStartDate:function(n){n instanceof Date?this.startDate=n:typeof n=="string"?(this.startDate=new i(n),this.startDate.getUTCFullYear()||(this.startDate=-Infinity)):this.startDate=-Infinity;this.viewDate&&this.update()},setEndDate:function(n){n instanceof Date?this.endDate=n:typeof n=="string"?(this.endDate=new i(n),this.endDate.getUTCFullYear()||(this.endDate=Infinity)):this.endDate=Infinity;this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var n=this._date;return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())},setLocalDate:function(n){n?this.setValue(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())):this.setValue(null)},place:function(){var r="absolute",t=this.component?this.component.offset():this.$element.offset(),i;this.width=this.component?this.component.outerWidth():this.$element.outerWidth();t.top=t.top+this.height;i=n(window);this.options.width!=undefined&&this.widget.width(this.options.width);this.options.orientation=="left"&&(this.widget.addClass("left-oriented"),t.left=t.left-this.widget.width()+20);this._isInFixed()&&(r="fixed",t.top-=i.scrollTop(),t.left-=i.scrollLeft());i.width()<t.left+this.widget.outerWidth()?(t.right=i.width()-t.left-this.width,t.left="auto",this.widget.addClass("pull-right")):(t.right="auto",this.widget.removeClass("pull-right"));this.widget.css({position:r,top:t.top,left:t.left,right:t.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(n){var r=n,t;r||(r=this.isInput?this.$element.val():this.$element.find("input").val(),r&&(this._date=this.parseDate(r)),this._date||(t=new Date,this._date=i(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())));this.viewDate=i(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0);this.fillDate();this.fillTime()},fillDow:function(){for(var t=this.weekStart,i=n("<tr>");t<this.weekStart+7;)i.append('<th class="dow">'+s[this.language].daysMin[t++%7]+"<\/th>");this.widget.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+s[this.language].monthsShort[t++]+"<\/span>";this.widget.find(".datepicker-months td").append(n)},fillDate:function(){var r=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth(),g=i(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),e=typeof this.startDate=="object"?this.startDate.getUTCFullYear():-Infinity,b=typeof this.startDate=="object"?this.startDate.getUTCMonth():-1,o=typeof this.endDate=="object"?this.endDate.getUTCFullYear():Infinity,k=typeof this.endDate=="object"?this.endDate.getUTCMonth():12,u,p,l,a,w,h,v,y,d,f;for(this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(s[this.language].months[c]+" "+r),u=i(r,c-1,28,0,0,0,0),p=t.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth()),u.setUTCDate(p),u.setUTCDate(p-(u.getUTCDay()-this.weekStart+7)%7),(r==e&&c<=b||r<e)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(r==o&&c>=k||r>o)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),l=new Date(u.valueOf()),l.setUTCDate(l.getUTCDate()+42),l=l.valueOf(),a=[];u.valueOf()<l;)u.getUTCDay()===this.weekStart&&(w=n("<tr>"),a.push(w)),h="",u.getUTCFullYear()<r||u.getUTCFullYear()==r&&u.getUTCMonth()<c?h+=" old":(u.getUTCFullYear()>r||u.getUTCFullYear()==r&&u.getUTCMonth()>c)&&(h+=" new"),u.valueOf()===g.valueOf()&&(h+=" active"),u.valueOf()+864e5<=this.startDate&&(h+=" disabled"),u.valueOf()>this.endDate&&(h+=" disabled"),w.append('<td class="day'+h+'">'+u.getUTCDate()+"<\/td>"),u.setUTCDate(u.getUTCDate()+1);for(this.widget.find(".datepicker-days tbody").empty().append(a),v=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active"),v===r&&y.eq(this._date.getUTCMonth()).addClass("active"),v-1<e&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),v+1>o&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),f=0;f<12;f++)r==e&&b>f||r<e?n(y[f]).addClass("disabled"):(r==o&&k<f||r>o)&&n(y[f]).addClass("disabled");for(a="",r=parseInt(r/10,10)*10,d=this.widget.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td"),this.widget.find(".datepicker-years").find("th").removeClass("disabled"),e>r&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),o<r+9&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),r-=1,f=-1;f<11;f++)a+='<span class="year'+(f===-1||f===10?" old":"")+(v===r?" active":"")+(r<e||r>o?" disabled":"")+'">'+r+"<\/span>",r+=1;d.html(a)},fillHours:function(){var e=this.widget.find(".timepicker .timepicker-hours table"),n,t,i,u,f;if(e.parent().hide(),n="",this.options.pick12HourFormat)for(t=1,i=0;i<3;i+=1){for(n+="<tr>",u=0;u<4;u+=1)f=t.toString(),n+='<td class="hour">'+r(f,2,"0")+"<\/td>",t++;n+="<\/tr>"}else for(t=0,i=0;i<6;i+=1){for(n+="<tr>",u=0;u<4;u+=1)f=t.toString(),n+='<td class="hour">'+r(f,2,"0")+"<\/td>",t++;n+="<\/tr>"}e.html(n)},fillMinutes:function(){var f=this.widget.find(".timepicker .timepicker-minutes table"),n,t,i,u,e;for(f.parent().hide(),n="",t=0,i=0;i<5;i++){for(n+="<tr>",u=0;u<4;u+=1)e=t.toString(),n+='<td class="minute">'+r(e,2,"0")+"<\/td>",t+=3;n+="<\/tr>"}f.html(n)},fillSeconds:function(){var f=this.widget.find(".timepicker .timepicker-seconds table"),n,t,i,u,e;for(f.parent().hide(),n="",t=0,i=0;i<5;i++){for(n+="<tr>",u=0;u<4;u+=1)e=t.toString(),n+='<td class="second">'+r(e,2,"0")+"<\/td>",t+=3;n+="<\/tr>"}f.html(n)},fillTime:function(){var u,f;if(this._date){var t=this.widget.find(".timepicker span[data-time-component]"),o=t.closest("table"),e=this.options.pick12HourFormat,n=this._date.getUTCHours(),i="AM";e&&(n>=12&&(i="PM"),n===0?n=12:n!=12&&(n=n%12),this.widget.find(".timepicker [data-action=togglePeriod]").text(i));n=r(n.toString(),2,"0");u=r(this._date.getUTCMinutes().toString(),2,"0");f=r(this._date.getUTCSeconds().toString(),2,"0");t.filter("[data-time-component=hours]").text(n);t.filter("[data-time-component=minutes]").text(u);t.filter("[data-time-component=seconds]").text(f)}},click:function(r){var u,f,e;if(r.stopPropagation(),r.preventDefault(),this._unset=!1,u=n(r.target).closest("span, td, th"),u.length===1&&!u.is(".disabled"))switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=this.viewDate,h=t.modes[this.viewMode].navFnc,o=t.modes[this.viewMode].navStep;u[0].className==="prev"&&(o=o*-1);s["set"+h](s["get"+h]()+o);this.fillDate();this.set()}break;case"span":u.is(".month")?(f=u.parent().find("span").index(u),this.viewDate.setUTCMonth(f)):(e=parseInt(u.text(),10)||0,this.viewDate.setUTCFullYear(e));this.viewMode!==0&&(this._date=i(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange());this.showMode(-1);this.fillDate();this.set();break;case"td":if(u.is(".day")){var c=parseInt(u.text(),10)||1,f=this.viewDate.getUTCMonth(),e=this.viewDate.getUTCFullYear();u.is(".old")?f===0?(f=11,e-=1):f-=1:u.is(".new")&&(f==11?(f=0,e+=1):f+=1);this._date=i(e,f,c,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds());this.viewDate=i(e,f,Math.min(28,c),0,0,0,0);this.fillDate();this.set();this.notifyChange()}}},actions:{incrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(){var n=this._date.getUTCHours();n>=12?n-=12:n+=12;this._date.setUTCHours(n)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide();this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var u=n(t.target),i=parseInt(u.text(),10),r;this.options.pick12HourFormat&&(r=this._date.getUTCHours(),r>=12?i!=12&&(i=(i+12)%24):i=i===12?0:i%12);this._date.setUTCHours(i);this.actions.showPicker.call(this)},selectMinute:function(t){var i=n(t.target),r=parseInt(i.text(),10);this._date.setUTCMinutes(r);this.actions.showPicker.call(this)},selectSecond:function(t){var i=n(t.target),r=parseInt(i.text(),10);this._date.setUTCSeconds(r);this.actions.showPicker.call(this)}},doAction:function(t){t.stopPropagation();t.preventDefault();this._date||(this._date=i(1970,0,0,0,0,0,0));var r=n(t.currentTarget).data("action"),u=this.actions[r].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),u},stopEvent:function(n){n.stopPropagation();n.preventDefault()},keydown:function(t){var r=this,i=t.which,u=n(t.target);(i==8||i==46)&&setTimeout(function(){r._resetMaskPos(u)})},keypress:function(t){var f=t.which,r;if(f!=8&&f!=46){var u=n(t.target),e=String.fromCharCode(f),i=u.val()||"";if(i+=e,r=this._mask[this._maskPos],!r)return!1;if(r.end==i.length)if(r.pattern.test(i.slice(r.start)))this._maskPos++;else{for(i=i.slice(0,i.length-1);(r=this._mask[this._maskPos])&&r.character;)i+=r.character,this._maskPos++;return i+=e,r.end!=i.length?(u.val(i),!1):r.pattern.test(i.slice(r.start))?(u.val(i),this._maskPos++,!1):(u.val(i.slice(0,r.start)),!1)}}},change:function(t){var i=n(t.target),r=i.val();this._formatPattern.test(r)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):r&&r.trim()?(this.setValue(this._date.getTime()),this._date?this.set():i.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0);this._resetMaskPos(i)},showMode:function(n){n&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+n)));this.widget.find(".datepicker > div").hide().filter(".datepicker-"+t.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents();this._detachDatePickerGlobalEvents();this.widget.remove();this.$element.removeData("datetimepicker");this.component.removeData("datetimepicker")},formatDate:function(n){return this.format.replace(l,function(t){var f,e,i,o=t.length;if(t==="ms"&&(o=1),e=u[t].property,e==="Hours12")i=n.getUTCHours(),i===0?i=12:i!==12&&(i=i%12);else{if(e==="Period12")return n.getUTCHours()>=12?"PM":"AM";f="get"+e;i=n[f]()}return f==="getUTCMonth"&&(i=i+1),f==="getUTCYear"&&(i=i+1900-2e3),r(i.toString(),o,"0")})},parseDate:function(n){var r,t,u,i,f={};if(!(r=this._formatPattern.exec(n)))return null;for(t=1;t<r.length;t++)(u=this._propertiesByIndex[t],u)&&(i=r[t],/^\d+$/.test(i)&&(i=parseInt(i,10)),f[u]=i);return this._finishParsingDate(f)},_resetMaskPos:function(n){for(var i=n.val(),t=0;t<this._mask.length;t++)if(this._mask[t].end>i.length){this._maskPos=t;break}else if(this._mask[t].end===i.length){this._maskPos=t+1;break}},_finishParsingDate:function(n){var r,u,f,t,e,o,s;return r=n.UTCFullYear,n.UTCYear&&(r=2e3+n.UTCYear),r||(r=1970),u=n.UTCMonth?n.UTCMonth-1:0,f=n.UTCDate||1,t=n.UTCHours||0,e=n.UTCMinutes||0,o=n.UTCSeconds||0,s=n.UTCMilliseconds||0,n.Hours12&&(t=n.Hours12),n.Period12&&(/pm/i.test(n.Period12)?t!=12&&(t=(t+12)%24):t=t%12),i(r,u,f,t,e,o,s)},_compileFormat:function(){for(var e,n,i=[],r=[],f=this.format,o={},s=0,t=0;e=c.exec(f);)n=e[0],n in u?(s++,o[s]=u[n].property,i.push("\\s*"+u[n].getPattern(this)+"\\s*"),r.push({pattern:new RegExp(u[n].getPattern(this)),property:u[n].property,start:t,end:t+=n.length})):(i.push(a(n)),r.push({pattern:new RegExp(a(n)),character:n,start:t,end:++t})),f=f.slice(n.length);this._mask=r;this._maskPos=0;this._formatPattern=new RegExp("^\\s*"+i.join("")+"\\s*$");this._propertiesByIndex=o},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",n.proxy(this.click,this));this.widget.on("click","[data-action]",n.proxy(this.doAction,this));this.widget.on("mousedown",n.proxy(this.stopEvent,this));if(this.pickDate&&this.pickTime)this.widget.on("click.togglePicker",".accordion-toggle",function(i){var u;i.stopPropagation();var f=n(this),e=f.closest("ul"),r=e.find(".collapse.in"),o=e.find(".collapse:not(.in)");if(r&&r.length){if(u=r.data("collapse"),u&&u.transitioning)return;r.collapse("hide");o.collapse("show");f.find("i").toggleClass(t.timeIcon+" "+t.dateIcon);t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}});if(this.isInput){this.$element.on({focus:n.proxy(this.show,this),change:n.proxy(this.change,this)});if(this.options.maskInput)this.$element.on({keydown:n.proxy(this.keydown,this),keypress:n.proxy(this.keypress,this)})}else{this.$element.on({change:n.proxy(this.change,this)},"input");if(this.options.maskInput)this.$element.on({keydown:n.proxy(this.keydown,this),keypress:n.proxy(this.keypress,this)},"input");if(this.component)this.component.on("click",n.proxy(this.show,this));else this.$element.on("click",n.proxy(this.show,this))}},_attachDatePickerGlobalEvents:function(){n(window).on("resize.datetimepicker"+this.id,n.proxy(this.place,this));if(!this.isInput)n(document).on("mousedown.datetimepicker"+this.id,n.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click);this.widget.off("click","[data-action]");this.widget.off("mousedown",this.stopEvent);this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker");this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){n(window).off("resize.datetimepicker"+this.id);this.isInput||n(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){var i,r,t;if(this.$element){for(i=this.$element.parents(),r=!1,t=0;t<i.length;t++)if(n(i[t]).css("position")=="fixed"){r=!0;break}return r}return!1}};n.fn.datetimepicker=function(t,i){return this.each(function(){var u=n(this),r=u.data("datetimepicker"),f=typeof t=="object"&&t;r||u.data("datetimepicker",r=new o(this,n.extend({},n.fn.datetimepicker.defaults,f)));typeof t=="string"&&r[t](i)})};n.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-Infinity,endDate:Infinity,collapse:!0};n.fn.datetimepicker.Constructor=o;var v=0,s=n.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},u={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},HH:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},hh:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},f=[];for(h in u)f.push(h);f[f.length-1]+="\\b";f.push(".");c=new RegExp(f.join("\\b|"));f.pop();l=new RegExp(f.join("\\b|"),"g");t={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]},headTemplate:'<thead><tr><th class="prev">&lsaquo;<\/th><th colspan="5" class="switch"><\/th><th class="next">&rsaquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>'};t.template='<div class="datepicker-days"><table class="table-condensed">'+t.headTemplate+'<tbody><\/tbody><\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+t.headTemplate+t.contTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+t.headTemplate+t.contTemplate+"<\/table><\/div>";e={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"><\/span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"><\/span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"><\/span>'};e.getTemplate=function(n,t){return'<div class="timepicker-picker"><table class="table-condensed"'+(n?' data-hour-format="12"':"")+'><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"><\/i><\/a><\/td><td class="separator"><\/td><td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"><\/i><\/a><\/td>'+(t?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"><\/i><\/a><\/td>':"")+(n?'<td class="separator"><\/td>':"")+"<\/tr><tr><td>"+e.hourTemplate+'<\/td> <td class="separator">:<\/td><td>'+e.minuteTemplate+"<\/td> "+(t?'<td class="separator">:<\/td><td>'+e.secondTemplate+"<\/td>":"")+(n?'<td class="separator"><\/td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"><\/button><\/td>':"")+'<\/tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"><\/i><\/a><\/td><td class="separator"><\/td><td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"><\/i><\/a><\/td>'+(t?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"><\/i><\/a><\/td>':"")+(n?'<td class="separator"><\/td>':"")+'<\/tr><\/table><\/div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"><\/table><\/div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"><\/table><\/div>'+(t?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"><\/table><\/div>':"")}})(window.jQuery);
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map"?!1:(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().andSelf().filter(function(){return n.css(this,"visibility")==="hidden"}).length}var u=0,f=/^ui-id-\d+$/;(n.ui=n.ui||{},n.ui.version)||(n.extend(n.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),n.fn.extend({_focus:n.fn.focus,focus:function(t,i){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){n(r).focus();i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r=n(this[0]),u,f;r.length&&r[0]!==document;){if(u=r.css("position"),(u==="absolute"||u==="relative"||u==="fixed")&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&f!==0))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}}),n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));t.offsetHeight;n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});n.support.minHeight=t.offsetHeight===100;n.support.selectstart="onselectstart"in t;i.removeChild(t).style.display="none"}),n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function u(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],f=r.toLowerCase(),e={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?e["inner"+r].call(this):this.each(function(){n(this).css(f,u(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?e["outer"+r].call(this,t):this.each(function(){n(this).css(f,u(this,t,!0,i)+"px")})}}),n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];n.ui.ie=t.length?!0:!1;n.ui.ie6=parseFloat(t[1],10)===6}(),n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11)for(r=0;r<u.length;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},contains:n.contains,hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},isOverAxis:function(n,t,i){return n>t&&n<t+i},isOver:function(t,i,r,u,f,e){return n.ui.isOverAxis(t,r,f)&&n.ui.isOverAxis(i,u,e)}}))})(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i=0,r;(r=t[i])!=null;i++)try{n(r).triggerHandler("remove")}catch(f){}u(t)};n.widget=function(t,i,r){var o,f,u,s,e=t.split(".")[0];t=t.split(".")[1];o=e+"-"+t;r||(r=i,i=n.Widget);n.expr[":"][o.toLowerCase()]=function(t){return!!n.data(t,o)};n[e]=n[e]||{};f=n[e][t];u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)};n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]});s=new i;s.options=n.widget.extend({},s.options);n.each(r,function(t,u){n.isFunction(u)&&(r[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},r=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=r,t=u.apply(this,arguments),this._super=i,this._superApply=f,t}}())});u.prototype=n.widget.extend(s,{widgetEventPrefix:f?s.widgetEventPrefix:t},r,{constructor:u,namespace:e,widgetName:t,widgetBaseClass:o,widgetFullName:o});f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u);n.widget.bridge(t,u)};n.widget.extend=function(r){for(var o=i.call(arguments,1),e=0,s=o.length,u,f;e<s;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r};n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h=typeof e=="string",o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?!n.isFunction(u[e])||e.charAt(0)==="_"?n.error("no such method '"+e+"' for "+r+" widget instance"):(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetName,this),n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var o=i,u,f,e;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof i=="string")if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;e<u.length-1;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),r===t)return f[i]===t?null:f[i];f[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^(\w+)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&(n.effects.effect[e]||n.uiBackCompat!==!1&&n.effects[e])?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});n.uiBackCompat!==!1&&(n.Widget.prototype._getCreateOptions=function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(n){var t=!1;n(document).mouseup(function(){t=!1});n.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=i.which===1,f=typeof this.options.cancel=="string"&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(i)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted))?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)}},_mouseMove:function(t){return!n.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper!="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n('<div class="ui-draggable-iframeFix" style="background: #fff;"><\/div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1,r,u,f;for(n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),r=this.element[0],u=!1;r&&(r=r.parentNode);)r==document&&(u=!0);return!u&&this.options.helper==="original"?!1:(this.options.revert=="invalid"&&!i||this.options.revert=="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?(f=this,n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",t)!==!1&&f._clear()})):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!n(this.options.handle,this.element).length?!0:!1;return n(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):r.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(r.appendTo=="parent"?this.element[0].parentNode:r.appendTo),i[0]!=this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options,r,t,f,u;if(i.containment=="parent"&&(i.containment=this.helper[0].parentNode),(i.containment=="document"||i.containment=="window")&&(this.containment=[i.containment=="document"?0:n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment=="document"?0:n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment=="document"?0:n(window).scrollLeft())+n(i.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment=="document"?0:n(window).scrollTop())+(n(i.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array)i.containment.constructor==Array&&(this.containment=i.containment);else{if(r=n(i.containment),t=r[0],!t)return;f=r.offset();u=n(t).css("overflow")!="hidden";this.containment=[(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0),(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0),(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=r}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r=this.options,h=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(h[0].tagName),e=t.pageX,o=t.pageY,i,s,u,f;return this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top<i[1]||u-this.offset.click.top>i[3]?u-this.offset.click.top<i[1]?u+r.grid[1]:u-r.grid[1]:u:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left<i[0]||f-this.offset.click.left>i[2]?f-this.offset.click.left<i[0]?f+r.grid[0]:f-r.grid[0]:f:f)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:h.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[];n(u.connectToSortable).each(function(){var i=n.data(this,"sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("draggable"),u=this,f=function(t){var i=this.offset.click.top,r=this.offset.click.left,u=this.positionAbs.top,f=this.positionAbs.left,e=t.height,o=t.width,s=t.top,h=t.left;return n.ui.isOver(u+i,f+r,s,h,e,o)};n.each(r.sortables,function(){var f=!1,e=this;this.instance.positionAbs=r.positionAbs;this.instance.helperProportions=r.helperProportions;this.instance.offset.click=r.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=e&&this.instance._intersectsWith(this.instance.containerCache)&&n.ui.contains(e.instance.element[0],this.instance.element[0])&&(f=!1),f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}});n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=n(i.helper),u=n(this).data("draggable").options;r.css("opacity")&&(u._opacity=r.css("opacity"));r.css("opacity",u.opacity)},stop:function(t,i){var r=n(this).data("draggable").options;r._opacity&&n(i.helper).css("opacity",r._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("draggable");t.scrollParent[0]!=document&&t.scrollParent[0].tagName!="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("draggable"),i=r.options,u=!1;r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"?(i.axis&&i.axis=="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&i.axis=="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&i.axis=="x"||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&i.axis=="y"||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))));u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("draggable"),i=t.options;t.snapElements=[];n(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var d,r=n(this).data("draggable"),k=r.options,u=k.snapTolerance,c=i.offset.left,a=c+r.helperProportions.width,l=i.offset.top,v=l+r.helperProportions.height,f=r.snapElements.length-1;f>=0;f--){var e=r.snapElements[f].left,s=e+r.snapElements[f].width,o=r.snapElements[f].top,h=o+r.snapElements[f].height;if(!(e-u<c&&c<s+u&&o-u<l&&l<h+u||e-u<c&&c<s+u&&o-u<v&&v<h+u||e-u<a&&a<s+u&&o-u<l&&l<h+u||e-u<a&&a<s+u&&o-u<v&&v<h+u)){r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item}));r.snapElements[f].snapping=!1;continue}if(k.snapMode!="inner"){var y=Math.abs(o-v)<=u,p=Math.abs(h-l)<=u,w=Math.abs(e-a)<=u,b=Math.abs(s-c)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o-r.helperProportions.height,left:0}).top-r.margins.top);p&&(i.position.top=r._convertPositionTo("relative",{top:h,left:0}).top-r.margins.top);w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e-r.helperProportions.width}).left-r.margins.left);b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s}).left-r.margins.left)}if(d=y||p||w||b,k.snapMode!="outer"){var y=Math.abs(o-l)<=u,p=Math.abs(h-v)<=u,w=Math.abs(e-c)<=u,b=Math.abs(s-a)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o,left:0}).top-r.margins.top);p&&(i.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top-r.margins.top);w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e}).left-r.margins.left);b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[f].snapping&&(y||p||w||b||d)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item}));r.snapElements[f].snapping=y||p||w||b||d}}});n.ui.plugin.add("draggable","stack",{start:function(){var r=n(this).data("draggable").options,t=n.makeArray(n(r.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)}),i;t.length&&(i=parseInt(t[0].style.zIndex)||0,n(t).each(function(n){this.style.zIndex=i+n}),this[0].style.zIndex=i+t.length)}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=n(i.helper),u=n(this).data("draggable").options;r.css("zIndex")&&(u._zIndex=r.css("zIndex"));r.css("zIndex",u.zIndex)},stop:function(t,i){var r=n(this).data("draggable").options;r._zIndex&&n(i.helper).css("zIndex",r._zIndex)}})}(jQuery),function(n){n.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0;this.isout=1;this.accept=n.isFunction(i)?i:function(n){return n.is(i)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};n.ui.ddmanager.droppables[t.scope]=n.ui.ddmanager.droppables[t.scope]||[];n.ui.ddmanager.droppables[t.scope].push(this);t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var i=n.ui.ddmanager.droppables[this.options.scope],t=0;t<i.length;t++)i[t]==this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){t=="accept"&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)});n.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u;return!r||(r.currentItem||r.element)[0]==this.element[0]?!1:(u=!1,this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=n.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(t,{offset:t.element.offset()}),t.options.tolerance))return u=!0,!1}),u?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.ui.intersect=function(t,i,r){if(!i.offset)return!1;var e=(t.positionAbs||t.position.absolute).left,s=e+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,h=o+t.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,f=i.offset.top,l=f+i.proportions.height;switch(r){case"fit":return u<=e&&s<=c&&f<=o&&h<=l;case"intersect":return u<e+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&f<o+t.helperProportions.height/2&&h-t.helperProportions.height/2<l;case"pointer":var a=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,v=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top;return n.ui.isOver(v,a,f,u,i.proportions.height,i.proportions.width);case"touch":return(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l)&&(e>=u&&e<=c||s>=u&&s<=c||e<u&&s>c);default:return!1}};n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(droppable)").andSelf(),r,f;n:for(r=0;r<u.length;r++)if(!u[r].options.disabled&&(!t||u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]==u[r].element[0]){u[r].proportions.height=0;continue n}(u[r].visible=u[r].element.css("display")!="none",u[r].visible)&&(o=="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions={width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){var f,u,r,o,e;this.options.disabled||this.greedyChild||!this.visible||(f=n.ui.intersect(t,this,this.options.tolerance),u=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null,u)&&(this.options.greedy&&(o=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return n.data(this,"droppable").options.scope===o}),e.length&&(r=n.data(e[0],"droppable"),r.greedyChild=u=="isover"?1:0)),r&&u=="isover"&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[u]=1,this[u=="isout"?"isover":"isout"]=0,this[u=="isover"?"_over":"_out"].call(this,i),r&&u=="isout"&&(r.isout=0,r.isover=1,r._over.call(r,i)))})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){n.widget("ui.resizable",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var i=this,t=this.options,f,r;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n('<div class="ui-wrapper" style="overflow: hidden;"><\/div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for(this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),f=this.handles.split(","),this.handles={},r=0;r<f.length;r++){var u=n.trim(f[r]),o="ui-resizable-"+u,e=n('<div class="ui-resizable-handle '+o+'"><\/div>');e.css({zIndex:t.zIndex});"se"==u&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[u]=".ui-resizable-"+u;this.element.append(e)}this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor==String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),u=0,u=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),f=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(f,u),this._proportionallyResize()),!n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!i.resizing){if(this.className)var n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);i.axis=n&&n[1]?n[1]:"se"}});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),i._handles.show())}).mouseleave(function(){t.disabled||i.resizing||(n(this).addClass("ui-resizable-autohide"),i._handles.hide())}));this._mouseInit()},_destroy:function(){var i,t;return this._mouseDestroy(),i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()},this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)n(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var u=this.options,s=this.element.position(),r=this.element,f,e,o;return this.resizing=!0,this.documentScroll={top:n(document).scrollTop(),left:n(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof u.aspectRatio=="number"?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",o=="auto"?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(n){var u=this.helper,s=this.options,h=this,i=this.originalMousePosition,f=this.axis,e=n.pageX-i.left||0,o=n.pageY-i.top||0,r=this._change[f],t;return r?(t=r.apply(this,[n,e,o]),this._updateVirtualBoundaries(n.shiftKey),(this._aspectRatio||n.shiftKey)&&(t=this._updateRatio(t,n)),t=this._respectSize(t,n),this._propagate("resize",n),u.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(t),this._trigger("resize",n,this.ui()),!1):!1},_mouseStop:function(t){var r,i;if(this.resizing=!1,r=this.options,i=this,this._helper){var u=this._proportionallyResizeElements,f=u.length&&/textarea/i.test(u[0].nodeName),e=f&&n.ui.hasScroll(u[0],"left")?0:i.sizeDiff.height,o=f?0:i.sizeDiff.width,s={width:i.helper.width()-o,height:i.helper.height()-e},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;r.animate||this.element.css(n.extend(s,{top:c,left:h}));i.helper.height(i.size.height);i.helper.width(i.size.width);this._helper&&!r.animate&&this._proportionallyResize()}return n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var r=this.options,u,f,e,o,i;i={minWidth:t(r.minWidth)?r.minWidth:0,maxWidth:t(r.maxWidth)?r.maxWidth:Infinity,minHeight:t(r.minHeight)?r.minHeight:0,maxHeight:t(r.maxHeight)?r.maxHeight:Infinity};(this._aspectRatio||n)&&(u=i.minHeight*this.aspectRatio,e=i.minWidth/this.aspectRatio,f=i.maxHeight*this.aspectRatio,o=i.maxWidth/this.aspectRatio,u>i.minWidth&&(i.minWidth=u),e>i.minHeight&&(i.minHeight=e),f<i.maxWidth&&(i.maxWidth=f),o<i.maxHeight&&(i.maxHeight=o));this._vBoundaries=i},_updateCache:function(n){var i=this.options;this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var f=this.options,i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),u=="sw"&&(n.left=i.left+(r.width-n.width),n.top=null),u=="nw"&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n,i){var y=this.helper,r=this._vBoundaries,p=this._aspectRatio||i.shiftKey,f=this.axis,e=t(n.width)&&r.maxWidth&&r.maxWidth<n.width,o=t(n.height)&&r.maxHeight&&r.maxHeight<n.height,s=t(n.width)&&r.minWidth&&r.minWidth>n.width,h=t(n.height)&&r.minHeight&&r.minHeight>n.height,u;s&&(n.width=r.minWidth);h&&(n.height=r.minHeight);e&&(n.width=r.maxWidth);o&&(n.height=r.maxHeight);var c=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,a=/sw|nw|w/.test(f),v=/nw|ne|n/.test(f);return s&&a&&(n.left=c-r.minWidth),e&&a&&(n.left=c-r.maxWidth),h&&v&&(n.top=l-r.minHeight),o&&v&&(n.top=l-r.maxHeight),u=!n.width&&!n.height,u&&!n.left&&n.top?n.top=null:u&&!n.top&&n.left&&(n.left=null),n},_proportionallyResize:function(){var e=this.options,r,i,t,u,f;if(this._proportionallyResizeElements.length)for(r=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++)t=this._proportionallyResizeElements[i],this.borderDif||(u=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],f=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")],this.borderDif=n.map(u,function(n,t){var i=parseInt(n,10)||0,r=parseInt(f[t],10)||0;return i+r})),t.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var r=this.element,u=this.options,t,i;this.elementOffset=r.offset();this._helper?(this.helper=this.helper||n('<div style="overflow:hidden;"><\/div>'),t=n.ui.ie6?1:0,i=n.ui.ie6?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-t+"px",top:this.elementOffset.top-t+"px",zIndex:++u.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var u=this.options,i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var f=this.options,r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).data("resizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof t.alsoResize=="object"&&!t.alsoResize.parentNode?t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)}):i(t.alsoResize)},resize:function(t,i){var r=n(this).data("resizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,r){n(t).each(function(){var t=n(this),f=n(this).data("resizable-alsoresize"),u={},e=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(e,function(n,t){var i=(f[t]||0)+(s[t]||0);i&&i>=0&&(u[t]=i||null)});t.css(u)})};typeof u.alsoResize=="object"&&!u.alsoResize.nodeType?n.each(u.alsoResize,function(n,t){o(n,t)}):o(u.alsoResize)},stop:function(){n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("resizable"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var t=n(this).data("resizable"),s=t.options,h=t.element,u=s.containment,r=u instanceof n?u.get(0):/parent/.test(u)?h.parent().get(0):u,f,e;if(r)if(t.containerElement=n(r),/document/.test(u)||u==document)t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight};else{f=n(r);e=[];n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(f.css("padding"+t))});t.containerOffset=f.offset();t.containerPosition=f.position();t.containerSize={height:f.innerHeight()-e[3],width:f.innerWidth()-e[1]};var o=t.containerOffset,c=t.containerSize.height,l=t.containerSize.width,a=n.ui.hasScroll(r,"left")?r.scrollWidth:l,v=n.ui.hasScroll(r)?r.scrollHeight:c;t.parentData={element:r,left:o.left,top:o.top,width:a,height:v}}},resize:function(t){var i=n(this).data("resizable"),c=i.options,v=i.containerSize,r=i.containerOffset,y=i.size,o=i.position,f=i._aspectRatio||t.shiftKey,u={top:0,left:0},s=i.containerElement;s[0]!=document&&/static/.test(s.css("position"))&&(u=r);o.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),f&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=c.helper?r.left:0);o.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;var e=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width),h=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height),l=i.containerElement.get(0)==i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position"));l&&a&&(e-=i.parentData.left);e+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-e,f&&(i.size.height=i.size.width/i.aspectRatio));h+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-h,f&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("resizable"),r=t.options,c=t.position,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(t){var i=n(this).data("resizable"),r=i.options,h=i.size,u=i.originalSize,o=i.originalPosition,s=i.axis,c=r._aspectRatio||t.shiftKey,f,e;r.grid=typeof r.grid=="number"?[r.grid,r.grid]:r.grid;f=Math.round((h.width-u.width)/(r.grid[0]||1))*(r.grid[0]||1);e=Math.round((h.height-u.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e):/^(ne)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e):/^(sw)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.left=o.left-f):(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e,i.position.left=o.left-f)}});var i=function(n){return parseInt(n,10)||0},t=function(n){return!isNaN(parseInt(n,10))}}(jQuery),function(n){n.widget("ui.selectable",n.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var i=this,t;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t=n(i.options.filter,i.element[0]);t.addClass("ui-selectee");t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this.selectees=t.addClass("ui-selectee");this._mouseInit();this.helper=n("<div class='ui-selectable-helper'><\/div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(t){var r=this,i;(this.opos=[t.pageX,t.pageY],this.options.disabled)||(i=this.options,this.selectees=n(i.filter,this.element[0]),this._trigger("start",t),n(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=n.data(this,"selectable-item");i.startselected=!0;t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,r._trigger("unselecting",t,{unselecting:i.element}))}),n(t.target).parents().andSelf().each(function(){var i=n.data(this,"selectable-item"),u;if(i)return u=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),i.unselecting=!u,i.selecting=u,i.selected=u,u?r._trigger("selecting",t,{selecting:i.element}):r._trigger("unselecting",t,{unselecting:i.element}),!1}))},_mouseDrag:function(t){var e=this,o;if(this.dragged=!0,!this.options.disabled){var s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(o=u,u=i,i=o),r>f&&(o=f,f=r,r=o),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var o=n.data(this,"selectable-item"),h;o&&o.element!=e.element[0]&&(h=!1,s.tolerance=="touch"?h=!(o.left>u||o.right<i||o.top>f||o.bottom<r):s.tolerance=="fit"&&(h=o.left>i&&o.right<u&&o.top>r&&o.bottom<f),h?(o.selected&&(o.$element.removeClass("ui-selected"),o.selected=!1),o.unselecting&&(o.$element.removeClass("ui-unselecting"),o.unselecting=!1),o.selecting||(o.$element.addClass("ui-selecting"),o.selecting=!0,e._trigger("selecting",t,{selecting:o.element}))):(o.selecting&&((t.metaKey||t.ctrlKey)&&o.startselected?(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.$element.addClass("ui-selected"),o.selected=!0):(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.startselected&&(o.$element.addClass("ui-unselecting"),o.unselecting=!0),e._trigger("unselecting",t,{unselecting:o.element}))),o.selected&&!t.metaKey&&!t.ctrlKey&&!o.startselected&&(o.$element.removeClass("ui-selected"),o.selected=!1,o.$element.addClass("ui-unselecting"),o.unselecting=!0,e._trigger("unselecting",t,{unselecting:o.element}))))}),!1}},_mouseStop:function(t){var i=this,r;return this.dragged=!1,r=this.options,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(n){n.widget("ui.sortable",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var n=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?n.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){t==="disabled"?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var u=this,r,e,f;return this.reverting?!1:this.options.disabled||this.options.type=="static"?!1:(this._refreshItems(t),r=null,e=n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")==u)return r=n(this),!1}),n.data(t.target,u.widgetName+"-item")==u&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(f=!1,n(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(f=!0)}),!f)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){var u=this.options,f;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&(n("body").css("cursor")&&(this._storedCursor=n("body").css("cursor")),n("body").css("cursor",u.cursor)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,r,f;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(i=this.options,r=!1,this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),f=this.items.length-1;f>=0;f--){var u=this.items[f],e=u.item[0],o=this._intersectsWithPointer(u);if(o&&u.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[o==1?"next":"prev"]()[0]!=e&&!n.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!n.contains(this.element[0],e):!0)){if(this.direction=o==1?"down":"up",this.options.tolerance!="pointer"&&!this._intersectsWithSides(u))break;this._rearrange(t,u);this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var u=this,r=this.placeholder.offset();this.reverting=!0;n(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){u._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=i+o>u&&i+o<e&&t+s>r&&t+s<f;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?l:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(t){var u=this.options.axis==="x"||n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),f=this.options.axis==="y"||n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),e=u&&f,i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return e?this.floating?r&&r=="right"||i=="down"?2:1:i&&(i=="down"?2:1):!1},_intersectsWithSides:function(t){var u=n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),f=n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?r=="right"&&f||r=="left"&&!f:i&&(i=="down"&&u||i=="up"&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!=0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!=0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor==String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){var s=[],u=[],e=this._connectWith(),o,f,i,r;if(e&&t)for(r=e.length-1;r>=0;r--)for(o=n(e[r]),f=o.length-1;f>=0;f--)i=n.data(o[f],this.widgetName),i&&i!=this&&!i.options.disabled&&u.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(u.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=u.length-1;r>=0;r--)u[r][0].each(function(){s.push(this)});return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;i<t.length;i++)if(t[i]==n.item[0])return!1;return!0})},_refreshItems:function(t){var o,i,r,s,h,u,l,c;this.items=[];this.containers=[this];var a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(r=e.length-1;r>=0;r--)for(o=n(e[r]),u=o.length-1;u>=0;u--)i=n.data(o[u],this.widgetName),i&&i!=this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(s=f[r][1],h=f[r][0],u=0,l=h.length;u<l;u++)c=n(h[u]),c.data(this.widgetName+"-item",s),a.push({item:c,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var r,f,i,u;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(r=this.items[i],r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,r;t=t||this;i=t.options;i.placeholder&&i.placeholder.constructor!=String||(r=i.placeholder,i.placeholder={element:function(){var i=n(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(i.style.visibility="hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var u,f,c,e=null,i=null,r=this.containers.length-1;r>=0;r--)if(!n.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(e&&n.contains(this.containers[r].element[0],e.element[0]))continue;e=this.containers[r];i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(e)if(this.containers.length===1)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else{var l=1e4,o=null,h=this.containers[i].floating?"left":"top",a=this.containers[i].floating?"width":"height",s=this.positionAbs[h]+this.offset.click[h];for(u=this.items.length-1;u>=0;u--)n.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]&&(f=this.items[u].item.offset()[h],c=!1,Math.abs(f-s)>Math.abs(f+this.items[u][a]-s)&&(c=!0,f+=this.items[u][a]),Math.abs(f-s)<l&&(l=Math.abs(f-s),o=this.items[u],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i];o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[i].element,!0);this._trigger("change",t,this._uiHash());this.containers[i]._trigger("change",t,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",t,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper=="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||n(r.appendTo!="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(i[0].style.width==""||r.forceHelperSize)&&i.width(this.currentItem.width()),(i[0].style.height==""||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options;if(i.containment=="parent"&&(i.containment=this.helper[0].parentNode),(i.containment=="document"||i.containment=="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n(i.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(n(i.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(i.containment)){var t=n(i.containment)[0],r=n(i.containment).offset(),u=n(t).css("overflow")!="hidden";this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var i=this.options,o=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName),f,e,r,u;return this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),f=t.pageX,e=t.pageY,this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3]?r-this.offset.click.top<this.containment[1]?r+i.grid[1]:r-i.grid[1]:r:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left<this.containment[0]||u-this.offset.click.left>this.containment[2]?u-this.offset.click.left<this.containment[0]?u+i.grid[0]:u-i.grid[0]:u:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u==this.counter&&this.refreshPositions(!r)})},_clear:function(t,i){var u,r;if(this.reverting=!1,u=[],!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(r in this._storedCSS)(this._storedCSS[r]=="auto"||this._storedCSS[r]=="static")&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!i&&u.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&u.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(i||(u.push(function(n){this._trigger("remove",n,this._uiHash())}),u.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),u.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)i||u.push(function(n){return function(t){n._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(u.push(function(n){return function(t){n._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&n("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery);jQuery.effects||function(n,t){var i=n.uiBackCompat!==!1,r="ui-effects-";n.effects={effect:{}},function(t,i){function e(n,t,i){var r=c[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n)?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n)}function h(n){var i=r(),e=i._rgba=[];return n=n.toLowerCase(),u(p,function(t,r){var u,s=r.re.exec(n),h=s&&r.parse(s),o=r.space||"rgba";if(h)return u=i[o](h),i[f[o].cache]=u[f[o].cache],e=i._rgba=u._rgba,!1}),e.length?(e.join()==="0,0,0,0"&&t.extend(e,o.transparent),i):o[n]}function s(n,t,i){return i=(i+1)%1,i*6<1?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var v="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),y=/^([\-+])=\s*(\d+\.?\d*)/,p=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],r=t.Color=function(n,i,r,u){return new t.Color.fn.parse(n,i,r,u)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=r.support={},a=t("<p>")[0],o,u=t.each;a.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=a.style.backgroundColor.indexOf("rgba")>-1;u(f,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});r.fn=t.extend(r.prototype,{parse:function(s,c,l,a){if(s===i)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(c),c=i);var v=this,y=t.type(s),p=this._rgba=[];return(c!==i&&(s=[s,c,l,a],y="array"),y==="string")?this.parse(h(s)||o._default):y==="array"?(u(f.rgba.props,function(n,t){p[t.idx]=e(s[t.idx],t)}),this):y==="object"?(s instanceof r?u(f,function(n,t){s[t.cache]&&(v[t.cache]=s[t.cache].slice())}):u(f,function(t,i){var r=i.cache;u(i.props,function(n,t){if(!v[r]&&i.to){if(n==="alpha"||s[n]==null)return;v[r]=i.to(v._rgba)}v[r][t.idx]=e(s[n],t,!0)});v[r]&&n.inArray(null,v[r].slice(0,3))<0&&(v[r][3]=1,i.from&&(v._rgba=i.from(v[r])))}),this):void 0},is:function(n){var e=r(n),t=!0,i=this;return u(f,function(n,r){var o,f=e[r.cache];return f&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],u(r.props,function(n,i){if(f[i.idx]!=null)return t=f[i.idx]===o[i.idx],t})),t}),t},_space:function(){var n=[],t=this;return u(f,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var i=r(n),h=i._space(),o=f[h],l=this.alpha()===0?r("transparent"):this,a=l[o.cache]||o.to(l._rgba),s=a.slice();return i=i[o.cache],u(o.props,function(n,r){var h=r.idx,u=a[h],f=i[h],o=c[r.type]||{};f!==null&&(u===null?s[h]=f:(o.mod&&(f-u>o.mod/2?u+=o.mod:u-f>o.mod/2&&(u-=o.mod)),s[h]=e((f-u)*t+u,r)))}),this[h](s)},blend:function(n){if(this._rgba[3]===1)return this;var i=this._rgba.slice(),u=i.pop(),f=r(n)._rgba;return r(t.map(i,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",n=t.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return n[3]===1&&(n.pop(),i="rgb("),i+n.join()+")"},toHslaString:function(){var i="hsla(",n=t.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return n[3]===1&&(n.pop(),i="hsl("),i+n.join()+")"},toHexString:function(n){var i=this._rgba.slice(),r=i.pop();return n&&i.push(~~(r*255)),"#"+t.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});r.fn.parse.prototype=r.fn;f.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var t=n[0]/255,i=n[1]/255,e=n[2]/255,h=n[3],r=Math.max(t,i,e),o=Math.min(t,i,e),u=r-o,s=r+o,f=s*.5,c,l;return c=o===r?0:t===r?60*(i-e)/u+360:i===r?60*(e-t)/u+120:60*(t-i)/u+240,l=f===0||f===1?f:f<=.5?u/s:u/(2-s),[Math.round(c)%360,l,f,h==null?1:h]};f.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(s(f,i,r+1/3)*255),Math.round(s(f,i,r)*255),Math.round(s(f,i,r-1/3)*255),e]};u(f,function(n,f){var s=f.props,o=f.cache,h=f.to,c=f.from;r.fn[n]=function(n){if(h&&!this[o]&&(this[o]=h(this._rgba)),n===i)return this[o].slice();var l,a=t.type(n),v=a==="array"||a==="object"?n:arguments,f=this[o].slice();return u(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=r(c(f)),l[o]=f,l):r(f)};u(s,function(i,u){r.fn[i]||(r.fn[i]=function(r){var f=t.type(r),h=i==="alpha"?this._hsla?"hsla":"rgba":n,o=this[h](),s=o[u.idx],e;return f==="undefined"?s:(f==="function"&&(r=r.call(this,s),f=t.type(r)),r==null&&u.empty?this:(f==="string"&&(e=y.exec(r),e&&(r=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[u.idx]=r,this[h](o)))})})});u(v,function(n,i){t.cssHooks[i]={set:function(n,u){var o,f,e="";if(t.type(u)!=="string"||(o=h(u))){if(u=r(o||u),!l.rgba&&u._rgba[3]!==1){for(f=i==="backgroundColor"?n.parentNode:n;(e===""||e==="transparent")&&f&&f.style;)try{e=t.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{n.style[i]=u}catch(c){}}};t.fx.step[i]=function(n){n.colorInit||(n.start=r(n.elem,i),n.end=r(n.end),n.colorInit=!0);t.cssHooks[i].set(n.elem,n.start.transition(n.end,n.pos))}});t.cssHooks.borderColor={expand:function(n){var t={};return u(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={},i,u;if(t&&t.length&&t[0]&&t[t[0]])for(u=t.length;u--;)i=t[u],typeof t[i]=="string"&&(r[n.camelCase(i)]=t[i]);else for(i in t)typeof t[i]=="string"&&(r[i]=t[i]);return r}function r(t,i){var e={},r,u;for(r in i)u=i[r],t[r]===u||f[r]||!n.fx.step[r]&&isNaN(parseFloat(u))||(e[r]=u);return e}var u=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){(n.end==="none"||n.setAttr)&&(n.pos!==1||n.setAttr)||(jQuery.style(n.elem,i,n.end),n.setAttr=!0)}});n.effects.animateClass=function(t,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var e=n(this),h=e.attr("class")||"",o,f=s.children?e.find("*").andSelf():e;f=f.map(function(){var t=n(this);return{el:t,start:i.call(this)}});o=function(){n.each(u,function(n,i){t[i]&&e[i+"Class"](t[i])})};o();f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=r(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=jQuery.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({_addClass:n.fn.addClass,addClass:function(t,i,r,u){return i?n.effects.animateClass.call(this,{add:t},i,r,u):this._addClass(t)},_removeClass:n.fn.removeClass,removeClass:function(t,i,r,u){return i?n.effects.animateClass.call(this,{remove:t},i,r,u):this._removeClass(t)},_toggleClass:n.fn.toggleClass,toggleClass:function(i,r,u,f,e){return typeof r=="boolean"||r===t?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):this._toggleClass(i,r):n.effects.animateClass.call(this,{toggle:i},r,u,f)},switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function u(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},i==null&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function f(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects.effect[t]?i&&n.effects[t]?!1:!0:!1}n.extend(n.effects,{version:"1.9.2",save:function(n,t){for(var i=0;i<t.length;i++)t[i]!==null&&n.data(r+t[i],n[0].style[t[i]])},restore:function(n,i){for(var f,u=0;u<i.length;u++)i[u]!==null&&(f=n.data(r+i[u]),f===t&&(f=""),n.css(i[u],f))},setMode:function(n,t){return t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),t.css("position")==="static"?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function f(i){function f(){n.isFunction(e)&&e.call(u[0]);n.isFunction(i)&&i()}var u=n(this),e=t.complete,o=t.mode;(u.is(":hidden")?o==="hide":o==="show")?f():r.call(u[0],t,f)}var t=u.apply(this,arguments),e=t.mode,o=t.queue,r=n.effects.effect[t.effect],s=!r&&i&&n.effects[t.effect];return n.fx.off||!r&&!s?e?this[e](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):r?o===!1?this.each(f):this.queue(o||"fx",f):s.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:n.fn.show,show:function(n){if(f(n))return this._show.apply(this,arguments);var t=u.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:n.fn.hide,hide:function(n){if(f(n))return this._hide.apply(this,arguments);var t=u.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:n.fn.toggle,toggle:function(t){if(f(t)||typeof t=="boolean"||n.isFunction(t))return this.__toggle.apply(this,arguments);var i=u.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return n<.5?i(n*2)/2:1-i(n*-2+2)/2}})}()}(jQuery),function(n){var r=0,t={},i={};t.height=t.paddingTop=t.paddingBottom=t.borderTopWidth=t.borderBottomWidth="hide";i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show";n.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var i=this.accordionId="ui-accordion-"+(this.element.attr("id")||++r),t=this.options;this.prevShow=this.prevHide=n();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(t.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0);t.active<0&&(t.active+=this.headers.length);this.active=this._findActive(t.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(t){var r=n(this),u=r.attr("id"),e=r.next(),f=e.attr("id");u||(u=i+"-header-"+t,r.attr("id",u));f||(f=i+"-panel-"+t,e.attr("id",f));r.attr("aria-controls",f);e.attr("aria-labelledby",u)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(t.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():n()}},_createIcons:function(){var t=this.options.icons;t&&(n("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();n=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this.options.heightStyle!=="content"&&n.css("height","")},_setOption:function(n,t){if(n==="active"){this._activate(t);return}n==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t));this._super(n,t);n==="collapsible"&&!t&&this.options.active===!1&&this._activate(0);n==="icons"&&(this._destroyIcons(),t&&this._createIcons());n==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().focus()},refresh:function(){var t,r,u=this.options.heightStyle,i=this.element.parent();u==="fill"?(n.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");r!=="absolute"&&r!=="fixed"&&(t-=i.outerHeight(!0))}),r&&i.css("overflow",r),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):u==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):n()},_setupEvents:function(t){var i={};t&&(n.each(t.split(" "),function(n,t){i[t]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],e=f&&i.collapsible,s=e?n():r.next(),h=u.next(),o={oldHeader:u,oldPanel:h,newHeader:e?n():r,newPanel:s};(t.preventDefault(),(!f||i.collapsible)&&this._trigger("beforeActivate",t,o)!==!1)&&(i.active=e?!1:this.headers.index(r),this.active=f?n():r,this._toggle(o),u.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),f||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=r;this.prevHide=i;this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t));i.attr({"aria-expanded":"false","aria-hidden":"true"});i.prev().attr("aria-selected","false");r.length&&i.length?i.prev().attr("tabIndex",-1):r.length&&this.headers.filter(function(){return n(this).attr("tabIndex")===0}).attr("tabIndex",-1);r.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(n,r,u){var l,f,e,a=this,h=0,v=n.length&&(!r.length||n.index()<r.index()),s=this.options.animate||{},o=v&&s.down||s,c=function(){a._toggleComplete(u)};if(typeof o=="number"&&(e=o),typeof o=="string"&&(f=o),f=f||o.easing||s.easing,e=e||o.duration||s.duration,!r.length)return n.animate(i,e,f,c);if(!n.length)return r.animate(t,e,f,c);l=n.show().outerHeight();r.animate(t,{duration:e,easing:f,step:function(n,t){t.now=Math.round(n)}});n.hide().animate(i,{duration:e,easing:f,complete:c,step:function(n,t){t.now=Math.round(n);t.prop!=="height"?h+=t.now:a.options.heightStyle!=="content"&&(t.now=Math.round(l-r.outerHeight()-h),h=0)}})},_toggleComplete:function(n){var t=n.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,n)}});n.uiBackCompat!==!1&&(function(n,t){n.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var f=this,t=this.element.find(this.options.header),r=t.next(),u=t.add(r).find("a").filter(this.options.navigationFilter)[0];u&&t.add(r).each(function(t){if(n.contains(this,u))return f.options.active=Math.floor(t/2),!1})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(n,t){n.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,r=t._setOption;n.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();i.call(this)},_setOption:function(n){(n==="autoHeight"||n==="clearStyle"||n==="fillSpace")&&(this.options.heightStyle=this._mergeHeightStyle());r.apply(this,arguments)},_mergeHeightStyle:function(){var n=this.options;return n.fillSpace?"fill":n.clearStyle?"content":n.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(n,t){n.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(n,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(n){return n===-1&&(n=!1),n&&typeof n!="number"&&(n=this.headers.index(this.headers.filter(n)),n===-1&&(n=!1)),i.call(this,n)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(n,t){n.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(n,t,r){var u=i.apply(this,arguments);return u?(n==="beforeActivate"?u=i.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):n==="activate"&&(u=i.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),u):!1}}(jQuery,jQuery.ui.accordion.prototype),function(n,t){n.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var n=this.options;n.animate===null&&(n.animate=n.animated?n.animated==="slide"?300:n.animated==="bounceslide"?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:n.animated:!1);i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(n){var t=0;n.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,r;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly")){t=!0;r=!0;i=!0;return}t=!1;r=!1;i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0;this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0;this._move("nextPage",u);break;case f.UP:t=!0;this._keyEvent("previous",u);break;case f.DOWN:t=!0;this._keyEvent("next",u);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0;this._searchTimeout(u)}},keypress:function(r){if(t){t=!1;r.preventDefault();return}if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){if(r){r=!1;n.preventDefault();return}this._searchTimeout(n)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(n);this._change(n)}});this._initSource();this.menu=n("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:n(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];n(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===i||n.contains(i,r.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)});return}var r=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(n,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r;this.selectedItem=i}));!1!==this._trigger("select",n,{item:i})&&this._value(i.value);this.term=this._value();this.close(n);this.selectedItem=i}});this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);n.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t);n==="source"&&this._initSource();n==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]);n==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):typeof this.options.source=="string"?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort();t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return(n=n!=null?n:this._value(),this.term=this._value(),n.length<this.options.minLength)?this.close(t):this._trigger("search",t)===!1?void 0:this._search(n)},_search:function(n){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:n},this._response())},_response:function(){var n=this,i=++t;return function(r){i===t&&n.__response(r);n.pending--;n.pending||n.element.removeClass("ui-autocomplete-loading")}},__response:function(n){n&&(n=this._normalize(n));this._trigger("response",null,{content:n});!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0;this._close(n)},_close:function(n){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return typeof t=="string"?{label:t,value:t}:n.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t);this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").append(n("<a>").text(i.label)).appendTo(t)},_move:function(n,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)){this._value(this.term);this.menu.blur();return}this.menu[n](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}});n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(n){var t;(this._superApply(arguments),this.options.disabled||this.cancelSearch)||(t=n&&n.length?this.options.messages.results(n.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(n){var i,r,u,t,f="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",e="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=n(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},o=function(t){var i=t.name,r=t.form,u=n([]);return i&&(u=r?n(r).find("[name='"+i+"']"):n("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),u};n.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h);typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var s=this,e=this.options,c=this.type==="checkbox"||this.type==="radio",a=c?"":"ui-state-active",l="ui-state-focus";e.label===null&&(e.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===i&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||n(this).removeClass(a)}).bind("click"+this.eventNamespace,function(n){e.disabled&&(n.preventDefault(),n.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(l)});c&&(this.element.bind("change"+this.eventNamespace,function(){t||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(n){e.disabled||(t=!1,r=n.pageX,u=n.pageY)}).bind("mouseup"+this.eventNamespace,function(n){e.disabled||(r!==n.pageX||u!==n.pageY)&&(t=!0)}));this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||t)return!1;n(this).toggleClass("ui-state-active");s.buttonElement.attr("aria-pressed",s.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||t)return!1;n(this).addClass("ui-state-active");s.buttonElement.attr("aria-pressed","true");var i=s.element[0];o(i).not(i).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(e.disabled)return!1;n(this).addClass("ui-state-active");i=this;s.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(e.disabled)return!1;n(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(e.disabled)return!1;(t.keyCode===n.ui.keyCode.SPACE||t.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===n.ui.keyCode.SPACE&&n(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){var n,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";this.type==="checkbox"||this.type==="radio"?(n=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=n.find(t),this.buttonElement.length||(n=n.length?n.siblings():this.element.siblings(),this.buttonElement=n.filter(t),this.buttonElement.length||(this.buttonElement=n.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(f+" "+s+" "+e).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(n,t){if(this._super(n,t),n==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t);this.type==="radio"?o(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var i=this.buttonElement.removeClass(e),f=n("<span><\/span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(),t=this.options.icons,u=t.primary&&t.secondary,r=[];t.primary||t.secondary?(this.options.text&&r.push("ui-button-text-icon"+(u?"s":t.primary?"-primary":"-secondary")),t.primary&&i.prepend("<span class='ui-button-icon-primary ui-icon "+t.primary+"'><\/span>"),t.secondary&&i.append("<span class='ui-button-icon-secondary ui-icon "+t.secondary+"'><\/span>"),this.options.text||(r.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||i.attr("title",n.trim(f)))):r.push("ui-button-text-only");i.addClass(r.join(" "))}});n.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(n,t){n==="disabled"&&this.buttons.button("option",n,t);this._super(n,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(n,t){function e(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.dpDiv=o(n('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><\/div>'))}function o(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){n(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&n(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&n(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){n.datepicker._isDisabledDatepicker(f.inline?t.parent()[0]:f.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&n(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&n(this).addClass("ui-datepicker-next-hover"))})}function u(i,r){n.extend(i,r);for(var u in r)(r[u]==null||r[u]==t)&&(i[u]=r[u]);return i}n.extend(n.ui,{datepicker:{version:"1.9.2"}});var i="datepicker",r=(new Date).getTime(),f;n.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return u(this._defaults,n||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null,attrName,attrValue,nodeName,inline,inst;for(attrName in this._defaults)if(attrValue=target.getAttribute("date:"+attrName),attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}nodeName=target.nodeName.toLowerCase();inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);inst=this._newInst(n(target),inline);inst.settings=n.extend({},settings||{},inlineSettings||{});nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?o(n('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><\/div>')):this.dpDiv}},_connectDatepicker:function(t,r){var u=n(t);(r.append=n([]),r.trigger=n([]),u.hasClass(this.markerClassName))||(this._attachments(u,r),u.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(n,t,i){r.settings[t]=i}).bind("getData.datepicker",function(n,t){return this._get(r,t)}),this._autoSize(r),n.data(t,i,r),r.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var e=this._get(i,"appendText"),o=this._get(i,"isRTL"),u,r,f;i.append&&i.append.remove();e&&(i.append=n('<span class="'+this._appendClass+'">'+e+"<\/span>"),t[o?"before":"after"](i.append));t.unbind("focus",this._showDatepicker);i.trigger&&i.trigger.remove();u=this._get(i,"showOn");(u=="focus"||u=="both")&&t.focus(this._showDatepicker);(u=="button"||u=="both")&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n('<button type="button"><\/button>').addClass(this._triggerClass).html(f==""?r:n("<img/>").attr({src:f,alt:r,title:r}))),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput==t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!=t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){var t,i,r;this._get(n,"autoSize")&&!n.inline&&(t=new Date(2009,11,20),i=this._get(n,"dateFormat"),i.match(/[DM]/)&&(r=function(n){for(var i=0,r=0,t=0;t<n.length;t++)n[t].length>i&&(i=n[t].length,r=t);return r},t.setMonth(r(this._get(n,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(n,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())),n.input.attr("size",this._formatDate(n,t).length))},_inlineDatepicker:function(t,r){var u=n(t);u.hasClass(this.markerClassName)||(u.addClass(this.markerClassName).append(r.dpDiv).bind("setData.datepicker",function(n,t,i){r.settings[t]=i}).bind("getData.datepicker",function(n,t){return this._get(r,t)}),n.data(t,i,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block"))},_dialogDatepicker:function(t,r,f,e,o){var s=this._dialogInst,h;if(s||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=n('<input type="text" id="'+h+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},n.data(this._dialogInput[0],i,s)),u(s.settings,e||{}),r=r&&r.constructor==Date?this._formatDate(s,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var c=document.documentElement.clientWidth,l=document.documentElement.clientHeight,a=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[c/2-100+a,l/2-150+v]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=f,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],i,s),this},_destroyDatepicker:function(t){var u=n(t),f=n.data(t,i),r;u.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),n.removeData(t,i),r=="input"?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&u.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var f=n(t),e=n.data(t,i),r,u;f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),r=="input"?(t.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(r=="div"||r=="span")&&(u=f.children("."+this._inlineClass),u.children().removeClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==t?null:n}))},_disableDatepicker:function(t){var f=n(t),e=n.data(t,i),r,u;f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),r=="input"?(t.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(r=="div"||r=="span")&&(u=f.children("."+this._inlineClass),u.children().addClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==n)return!0;return!1},_getInst:function(t){try{return n.data(t,i)}catch(r){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(i,r,f){var e=this._getInst(i),o;if(arguments.length==2&&typeof r=="string")return r=="defaults"?n.extend({},n.datepicker._defaults):e?r=="all"?n.extend({},e.settings):this._get(e,r):null;if(o=r||{},typeof r=="string"&&(o={},o[r]=f),e){this._curInst==e&&this._hideDatepicker();var c=this._getDateDatepicker(i,!0),s=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max");u(e.settings,o);s!==null&&o.dateFormat!==t&&o.minDate===t&&(e.settings.minDate=this._formatDate(e,s));h!==null&&o.dateFormat!==t&&o.maxDate===t&&(e.settings.maxDate=this._formatDate(e,h));this._attachments(n(i),e);this._autoSize(e);this._setDate(e,c);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i=n.datepicker._getInst(t.target),r=!0,e=i.dpDiv.is(".ui-datepicker-rtl"),u,f,o;if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return u=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),u[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,u[0]),f=n.datepicker._get(i,"onSelect"),f?(o=n.datepicker._formatDate(i),f.apply(i.input?i.input[0]:null,[o,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,e?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,e?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode==36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var f=n.datepicker._getInst(i.target),r,u;if(n.datepicker._get(f,"constrainInput"))return r=n.datepicker._possibleChars(n.datepicker._get(f,"dateFormat")),u=String.fromCharCode(i.charCode==t?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||u<" "||!r||r.indexOf(u)>-1},_doKeyUp:function(t){var i=n.datepicker._getInst(t.target),r;if(i.input.val()!=i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){n.datepicker.log(u)}return!0},_showDatepicker:function(t){var i,o,s,f,e;if((t=t.target||t,t.nodeName.toLowerCase()!="input"&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!=t)&&(i=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!=i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),o=n.datepicker._get(i,"beforeShow"),s=o?o.apply(t,[t,i]):{},s!==!1)&&(u(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),f=!1,n(t).parents().each(function(){return f|=n(this).css("position")=="fixed",!f}),e={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),e=n.datepicker._checkOffset(i,e,f),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":f?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"}),!i.inline)){var r=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),c=function(){var r=i.dpDiv.find("iframe.ui-datepicker-cover"),t;!r.length||(t=n.datepicker._getBorders(i.dpDiv),r.css({left:-t[0],top:-t[1],width:i.dpDiv.outerWidth(),height:i.dpDiv.outerHeight()}))};i.dpDiv.zIndex(n(t).zIndex()+1);n.datepicker._datepickerShowing=!0;n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.show(r,n.datepicker._get(i,"showOptions"),h,c):i.dpDiv[r||"show"](r?h:null,c);(!r||!h)&&c();i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus();n.datepicker._curInst=i}},_updateDatepicker:function(t){var i,r,o;this.maxRows=4;i=n.datepicker._getBorders(t.dpDiv);f=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);r=t.dpDiv.find("iframe.ui-datepicker-cover");r.length&&r.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()});t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var u=this._getNumberOfMonths(t),e=u[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");e>1&&t.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");t.dpDiv[(u[0]!=1||u[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t==n.datepicker._curInst&&n.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus();t.yearshtml&&(o=t.yearshtml,setTimeout(function(){o===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);o=t.yearshtml=null},0))},_getBorders:function(n){var t=function(n){return{thin:1,medium:2,thick:3}[n]||n};return[parseFloat(t(n.css("border-left-width"))),parseFloat(t(n.css("border-top-width")))]},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left==t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top==t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var r=this._getInst(t),u=this._get(r,"isRTL"),i;t&&(t.type=="hidden"||t.nodeType!=1||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var r=this._curInst,e;if(r&&(!t||r==n.data(t,i))&&this._datepickerShowing){var u=this._get(r,"showAnim"),o=this._get(r,"duration"),f=function(){n.datepicker._tidyDialog(r)};n.effects&&(n.effects.effect[u]||n.effects[u])?r.dpDiv.hide(u,n.datepicker._get(r,"showOptions"),o,f):r.dpDiv[u=="slideDown"?"slideUp":u=="fadeIn"?"fadeOut":"hide"](u?o:null,f);u||f();this._datepickerShowing=!1;e=this._get(r,"onClose");e&&e.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id==n.datepicker._mainDivId||i.parents("#"+n.datepicker._mainDivId).length!=0||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst==r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+(r=="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var u=n(t),i=this._getInst(u[0]),r;this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+(r=="M"?"Month":"Year")]=u["draw"+(r=="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var e=n(t),f;n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t),r=this._getInst(i[0]);this._selectDate(i,"")},_selectDate:function(t,i){var f=n(t),r=this._getInst(f[0]),u;i=i!=null?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i=this._get(t,"altField");if(i){var r=this._get(t,"altFormat")||this._get(t,"dateFormat"),u=this._getDate(t),f=this.formatDate(r,u,this._getFormatConfig(t));n(i).each(function(){n(this).val(f)})}},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(n){var t=new Date(n.getTime()),i;return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){var c,s,w,b,u;if(t==null||i==null)throw"Invalid arguments";if(i=typeof i=="object"?i.toString():i+"",i=="")return null;c=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff;c=typeof c!="string"?c:(new Date).getFullYear()%100+parseInt(c,10);var d=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,g=(r?r.dayNames:null)||this._defaults.dayNames,nt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,tt=(r?r.monthNames:null)||this._defaults.monthNames,f=-1,o=-1,h=-1,v=-1,y=!1,a=function(n){var i=s+1<t.length&&t.charAt(s+1)==n;return i&&s++,i},l=function(n){var r=a(n),u=n=="@"?14:n=="!"?20:n=="y"&&r?4:n=="o"?3:2,f=new RegExp("^\\d{1,"+u+"}"),t=i.substring(e).match(f);if(!t)throw"Missing number at position "+e;return e+=t[0].length,parseInt(t[0],10)},k=function(t,r,u){var o=n.map(a(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)}),f=-1;if(n.each(o,function(n,t){var r=t[1];if(i.substr(e,r.length).toLowerCase()==r.toLowerCase())return f=t[0],e+=r.length,!1}),f!=-1)return f+1;throw"Unknown name at position "+e;},p=function(){if(i.charAt(e)!=t.charAt(s))throw"Unexpected literal at position "+e;e++},e=0;for(s=0;s<t.length;s++)if(y)t.charAt(s)=="'"&&!a("'")?y=!1:p();else switch(t.charAt(s)){case"d":h=l("d");break;case"D":k("D",d,g);break;case"o":v=l("o");break;case"m":o=l("m");break;case"M":o=k("M",nt,tt);break;case"y":f=l("y");break;case"@":u=new Date(l("@"));f=u.getFullYear();o=u.getMonth()+1;h=u.getDate();break;case"!":u=new Date((l("!")-this._ticksTo1970)/1e4);f=u.getFullYear();o=u.getMonth()+1;h=u.getDate();break;case"'":a("'")?p():y=!0;break;default:p()}if(e<i.length&&(w=i.substr(e),!/^\s+/.test(w)))throw"Extra/unparsed characters found in date: "+w;if(f==-1?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),v>-1){o=1;h=v;do{if(b=this._getDaysInMonth(f,o-1),h<=b)break;o++;h-=b}while(1)}if(u=this._daylightSavingAdjust(new Date(f,o-1,h)),u.getFullYear()!=f||u.getMonth()+1!=o||u.getDate()!=h)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864e9,formatDate:function(n,t,i){var u;if(!t)return"";var h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)==t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))while(r.length<i)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)n.charAt(u)=="'"&&!f("'")?o=!1:r+=n.charAt(u);else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=t.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=t+1<n.length&&n.charAt(t+1)==i;return r&&t++,r},t=0;t<n.length;t++)if(r)n.charAt(t)=="'"&&!u("'")?r=!1:i+=n.charAt(t);else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,i){return n.settings[i]!==t?n.settings[i]:this._defaults[i]},_setDateFromField:function(n,t){var u,r,i,f,e;if(n.input.val()!=n.lastVal){u=this._get(n,"dateFormat");r=n.lastVal=n.input?n.input.val():null;i=f=this._getDefaultDate(n);e=this._getFormatConfig(n);try{i=this.parseDate(u,r,e)||f}catch(o){this.log(o);r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=i==null||i===""?r:typeof i=="string"?e(i):typeof i=="number"?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&u.toString()=="Invalid Date"?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();(f!=n.selectedMonth||e!=n.selectedYear)&&!i&&this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()==""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var u=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-u,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+u,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var l=new Date,d,h,ut,c,p,ot,w,st,ht,ct,r,at,vt,s;l=this._daylightSavingAdjust(new Date(l.getFullYear(),l.getMonth(),l.getDate()));var e=this._get(t,"isRTL"),fi=this._get(t,"showButtonPanel"),pt=this._get(t,"hideIfNoPrevNext"),tt=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),ei=this._get(t,"showCurrentAtPos"),wt=this._get(t,"stepMonths"),it=o[0]!=1||o[1]!=1,rt=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),y=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),i=t.drawMonth-ei,u=t.drawYear;if(i<0&&(i+=12,u--),a)for(d=this._daylightSavingAdjust(new Date(a.getFullYear(),a.getMonth()-o[0]*o[1]+1,a.getDate())),d=y&&d<y?y:d;this._daylightSavingAdjust(new Date(u,i,1))>d;)i--,i<0&&(i=11,u--);t.drawMonth=i;t.drawYear=u;h=this._get(t,"prevText");h=tt?this.formatDate(h,this._daylightSavingAdjust(new Date(u,i-wt,1)),this._getFormatConfig(t)):h;ut=this._canAdjustMonth(t,-1,u,i)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+h+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+h+"<\/span><\/a>":pt?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+h+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+h+"<\/span><\/a>";c=this._get(t,"nextText");c=tt?this.formatDate(c,this._daylightSavingAdjust(new Date(u,i+wt,1)),this._getFormatConfig(t)):c;var bt=this._canAdjustMonth(t,1,u,i)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+c+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+c+"<\/span><\/a>":pt?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+c+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+c+"<\/span><\/a>",g=this._get(t,"currentText"),kt=this._get(t,"gotoCurrent")&&t.currentDay?rt:l;g=tt?this.formatDate(g,kt,this._getFormatConfig(t)):g;var dt=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"<\/button>",oi=fi?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(e?dt:"")+(this._isInRange(t,kt)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+g+"<\/button>":"")+(e?"":dt)+"<\/div>":"",v=parseInt(this._get(t,"firstDay"),10);v=isNaN(v)?0:v;var gt=this._get(t,"showWeek"),si=this._get(t,"dayNames"),vi=this._get(t,"dayNamesShort"),hi=this._get(t,"dayNamesMin"),ci=this._get(t,"monthNames"),li=this._get(t,"monthNamesShort"),ni=this._get(t,"beforeShowDay"),ft=this._get(t,"showOtherMonths"),ai=this._get(t,"selectOtherMonths"),yi=this._get(t,"calculateWeek")||this.iso8601Week,ti=this._getDefaultDate(t),et="";for(p=0;p<o[0];p++){for(ot="",this.maxRows=4,w=0;w<o[1];w++){var ii=this._daylightSavingAdjust(new Date(u,i,t.selectedDay)),b=" ui-corner-all",f="";if(it){if(f+='<div class="ui-datepicker-group',o[1]>1)switch(w){case 0:f+=" ui-datepicker-group-first";b=" ui-corner-"+(e?"right":"left");break;case o[1]-1:f+=" ui-datepicker-group-last";b=" ui-corner-"+(e?"left":"right");break;default:f+=" ui-datepicker-group-middle";b=""}f+='">'}for(f+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+b+'">'+(/all|left/.test(b)&&p==0?e?bt:ut:"")+(/all|right/.test(b)&&p==0?e?ut:bt:"")+this._generateMonthYearHeader(t,i,u,y,a,p>0||w>0,ci,li)+'<\/div><table class="ui-datepicker-calendar"><thead><tr>',st=gt?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"<\/th>":"",s=0;s<7;s++)ht=(s+v)%7,st+="<th"+((s+v+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+si[ht]+'">'+hi[ht]+"<\/span><\/th>";f+=st+"<\/tr><\/thead><tbody>";ct=this._getDaysInMonth(u,i);u==t.selectedYear&&i==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,ct));var ri=(this._getFirstDayOfMonth(u,i)-v+7)%7,lt=Math.ceil((ri+ct)/7),ui=it?this.maxRows>lt?this.maxRows:lt:lt;for(this.maxRows=ui,r=this._daylightSavingAdjust(new Date(u,i,1-ri)),at=0;at<ui;at++){for(f+="<tr>",vt=gt?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(r)+"<\/td>":"",s=0;s<7;s++){var nt=ni?ni.apply(t.input?t.input[0]:null,[r]):[!0,""],k=r.getMonth()!=i,yt=k&&!ai||!nt[0]||y&&r<y||a&&r>a;vt+='<td class="'+((s+v+6)%7>=5?" ui-datepicker-week-end":"")+(k?" ui-datepicker-other-month":"")+(r.getTime()==ii.getTime()&&i==t.selectedMonth&&t._keyEvent||ti.getTime()==r.getTime()&&ti.getTime()==ii.getTime()?" "+this._dayOverClass:"")+(yt?" "+this._unselectableClass+" ui-state-disabled":"")+(k&&!ft?"":" "+nt[1]+(r.getTime()==rt.getTime()?" "+this._currentClass:"")+(r.getTime()==l.getTime()?" ui-datepicker-today":""))+'"'+((!k||ft)&&nt[2]?' title="'+nt[2]+'"':"")+(yt?"":' data-handler="selectDay" data-event="click" data-month="'+r.getMonth()+'" data-year="'+r.getFullYear()+'"')+">"+(k&&!ft?"&#xa0;":yt?'<span class="ui-state-default">'+r.getDate()+"<\/span>":'<a class="ui-state-default'+(r.getTime()==l.getTime()?" ui-state-highlight":"")+(r.getTime()==rt.getTime()?" ui-state-active":"")+(k?" ui-priority-secondary":"")+'" href="#">'+r.getDate()+"<\/a>")+"<\/td>";r.setDate(r.getDate()+1);r=this._daylightSavingAdjust(r)}f+=vt+"<\/tr>"}i++;i>11&&(i=0,u++);f+="<\/tbody><\/table>"+(it?"<\/div>"+(o[0]>0&&w==o[1]-1?'<div class="ui-datepicker-row-break"><\/div>':""):"");ot+=f}et+=ot}return et+=oi+(n.ui.ie6&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"><\/iframe>':""),t._keyEvent=!1,et},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var v=this._get(n,"changeMonth"),y=this._get(n,"changeYear"),p=this._get(n,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',l="",w,b,h;if(f||!v)l+='<span class="ui-datepicker-month">'+e[t]+"<\/span>";else{for(w=r&&r.getFullYear()==i,b=u&&u.getFullYear()==i,l+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',h=0;h<12;h++)(!w||h>=r.getMonth())&&(!b||h<=u.getMonth())&&(l+='<option value="'+h+'"'+(h==t?' selected="selected"':"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(p||(c+=l+(f||!v||!y?"&#xa0;":"")),!n.yearshtml)if(n.yearshtml="",f||!y)c+='<span class="ui-datepicker-year">'+i+"<\/span>";else{var k=this._get(n,"yearRange").split(":"),d=(new Date).getFullYear(),g=function(n){var t=n.match(/c[+-].*/)?i+parseInt(n.substring(1),10):n.match(/[+-].*/)?d+parseInt(n,10):parseInt(n,10);return isNaN(t)?d:t},s=g(k[0]),a=Math.max(s,g(k[1]||""));for(s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';s<=a;s++)n.yearshtml+='<option value="'+s+'"'+(s==i?' selected="selected"':"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),p&&(c+=(f||!v||!y?"&#xa0;":"")+l),c+="<\/div>",c},_adjustInstDate:function(n,t,i){var u=n.drawYear+(i=="Y"?t:0),f=n.drawMonth+(i=="M"?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+(i=="D"?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();(i=="M"||i=="Y")&&this._notifyChange(n)},_restrictMinMax:function(n,t){var r=this._getMinMaxDate(n,"min"),u=this._getMinMaxDate(n,"max"),i=r&&t<r?r:t;return i=u&&i>u?u:i,i},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[0]*f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max");return(!i||t.getTime()>=i.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick).find(document.body).append(n.datepicker.dpDiv),n.datepicker.initialized=!0);var i=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!="isDisabled"&&t!="getDate"&&t!="widget"?t=="option"&&arguments.length==2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)}):n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i))};n.datepicker=new e;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.9.2";window["DP_jQuery_"+r]=n}(jQuery),function(n,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},u={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};n.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;i<0&&n(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title");typeof this.originalTitle!="string"&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var e=this,t=this.options,h=t.title||"&#160;",r,u,f,o,s;r=(this.uiDialog=n("<div>")).addClass(i+t.dialogClass).css({display:"none",outline:0,zIndex:t.zIndex}).attr("tabIndex",-1).keydown(function(i){t.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===n.ui.keyCode.ESCAPE&&(e.close(i),i.preventDefault())}).mousedown(function(n){e.moveToTop(!1,n)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(r);u=(this.uiDialogTitlebar=n("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){r.focus()}).prependTo(r);f=n("<a href='#'><\/a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(n){n.preventDefault();e.close(n)}).appendTo(u);(this.uiDialogTitlebarCloseText=n("<span>")).addClass("ui-icon ui-icon-closethick").text(t.closeText).appendTo(f);o=n("<span>").uniqueId().addClass("ui-dialog-title").html(h).prependTo(u);s=(this.uiDialogButtonPane=n("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=n("<div>")).addClass("ui-dialog-buttonset").appendTo(s);r.attr({role:"dialog","aria-labelledby":o.attr("id")});u.find("*").add(u).disableSelection();this._hoverable(f);this._focusable(f);t.draggable&&n.fn.draggable&&this._makeDraggable();t.resizable&&n.fn.resizable&&this._makeResizable();this._createButtons(t.buttons);this._isOpen=!1;n.fn.bgiframe&&r.bgiframe();this._on(r,{keydown:function(i){if(t.modal&&i.keyCode===n.ui.keyCode.TAB){var u=n(":tabbable",r),f=u.filter(":first"),e=u.filter(":last");return i.target===e[0]&&!i.shiftKey?(f.focus(1),!1):i.target===f[0]&&i.shiftKey?(e.focus(1),!1):void 0}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var n,t=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);n=t.parent.children().eq(t.index);n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var u=this,i,r;if(this._isOpen)return!1===this._trigger("beforeClose",t)?void 0:(this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){u._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),n.ui.dialog.overlay.resize(),this.options.modal&&(i=0,n(".ui-dialog").each(function(){this!==u.uiDialog[0]&&(r=n(this).css("z-index"),isNaN(r)||(i=Math.max(i,r)))}),n.ui.dialog.maxZ=i),this)},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var r=this.options,u;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",i):(r.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=r.zIndex),this.overlay&&(n.ui.dialog.maxZ+=1,n.ui.dialog.overlay.maxZ=n.ui.dialog.maxZ,this.overlay.$el.css("z-index",n.ui.dialog.overlay.maxZ)),u={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},n.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",n.ui.dialog.maxZ),this.element.attr(u),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,r=this.uiDialog;return this._size(),this._position(i.position),r.show(i.show),this.overlay=i.modal?new n.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,r=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();typeof t=="object"&&t!==null&&n.each(t,function(){return!(r=!0)});r?(n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r;r=n.extend({type:"button"},r);f=r.click;r.click=function(){f.apply(i.element[0],arguments)};u=n("<button><\/button>",r).appendTo(i.uiButtonSet);n.fn.button&&u.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){n(this).addClass("ui-dialog-dragging");t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){r.position=[f.position.left-t.document.scrollLeft(),f.position.top-t.document.scrollTop()];n(this).removeClass("ui-dialog-dragging");t._trigger("dragStop",u,i(f));n.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function u(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}i=i===t?this.options.resizable:i;var f=this,r=this.options,e=this.uiDialog.css("position"),o=typeof i=="string"?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,i){n(this).addClass("ui-dialog-resizing");f._trigger("resizeStart",t,u(i))},resize:function(n,t){f._trigger("resize",n,u(t))},stop:function(t,i){n(this).removeClass("ui-dialog-resizing");r.height=n(this).height();r.width=n(this).width();f._trigger("resizeStop",t,u(i));n.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var n=this.options;return n.height==="auto"?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(t){var i=[],r=[0,0],u;t?((typeof t=="string"||typeof t=="object"&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],i.length===1&&(i[1]=i[0]),n.each(["left","top"],function(n,t){+i[n]===i[n]&&(r[n]=i[n],i[n]=t)}),t={my:i[0]+(r[0]<0?r[0]:"+"+r[0])+" "+i[1]+(r[1]<0?r[1]:"+"+r[1]),at:i.join(" ")}),t=n.extend({},n.ui.dialog.prototype.options.position,t)):t=n.ui.dialog.prototype.options.position;u=this.uiDialog.is(":visible");u||this.uiDialog.show();this.uiDialog.position(t);u||this.uiDialog.hide()},_setOptions:function(t){var e=this,i={},f=!1;n.each(t,function(n,t){e._setOption(n,t);n in r&&(f=!0);n in u&&(i[n]=t)});f&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(t,r){var e,f,u=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":u.removeClass(this.options.dialogClass).addClass(i+r);break;case"disabled":r?u.addClass("ui-dialog-disabled"):u.removeClass("ui-dialog-disabled");break;case"draggable":e=u.is(":data(draggable)");e&&!r&&u.draggable("destroy");!e&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":f=u.is(":data(resizable)");f&&!r&&u.resizable("destroy");f&&typeof r=="string"&&u.resizable("option","handles",r);!f&&r!==!1&&this._makeResizable(r);break;case"title":n(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var i,r,u,t=this.options,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});t.minWidth>t.width&&(t.width=t.minWidth);i=this.uiDialog.css({height:"auto",width:t.width}).outerHeight();r=Math.max(0,t.minHeight-i);t.height==="auto"?n.support.minHeight?this.element.css({minHeight:r,height:"auto"}):(this.uiDialog.show(),u=this.element.css("height","auto").height(),f||this.uiDialog.hide(),this.element.height(Math.max(u,r))):this.element.height(Math.max(t.height-i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});n.extend(n.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(n){var t=n.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=n.ui.dialog.overlay.create(t)}});n.extend(n.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(n){return n+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(t){if(n(t.target).zIndex()<n.ui.dialog.overlay.maxZ)return!1})},1),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||n("<div>").addClass("ui-widget-overlay");return n(document).bind("keydown.dialog-overlay",function(r){var u=n.ui.dialog.overlay.instances;u.length!==0&&u[u.length-1]===i&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===n.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),n.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var r=n.inArray(t,this.instances),i=0;r!==-1&&this.oldInstances.push(this.instances.splice(r,1)[0]);this.instances.length===0&&n([document,window]).unbind(".dialog-overlay");t.height(0).width(0).remove();n.each(this.instances,function(){i=Math.max(i,this.css("z-index"))});this.maxZ=i},height:function(){var t,i;return n.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<i?n(window).height()+"px":t+"px"):n(document).height()+"px"},width:function(){var t,i;return n.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<i?n(window).width()+"px":t+"px"):n(document).width()+"px"},resize:function(){var t=n([]);n.each(n.ui.dialog.overlay.instances,function(){t=t.add(this)});t.css({width:0,height:0}).css({width:n.ui.dialog.overlay.width(),height:n.ui.dialog.overlay.height()})}});n.extend(n.ui.dialog.overlay.prototype,{destroy:function(){n.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(n){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;n.effects.effect.blind=function(r,u){var f=n(this),c=["position","top","bottom","left","right","height","width"],p=n.effects.setMode(f,r.mode||"hide"),w=r.direction||"up",o=t.test(w),l=o?"height":"width",a=o?"top":"left",b=i.test(w),v={},y=p==="show",e,s,h;f.parent().is(".ui-effects-wrapper")?n.effects.save(f.parent(),c):n.effects.save(f,c);f.show();e=n.effects.createWrapper(f).css({overflow:"hidden"});s=e[l]();h=parseFloat(e.css(a))||0;v[l]=y?s:0;b||(f.css(o?"bottom":"right",0).css(o?"top":"left","auto").css({position:"absolute"}),v[a]=y?h:s+h);y&&(e.css(l,0),b||e.css(a,h+s));e.animate(v,{duration:r.duration,easing:r.easing,queue:!1,complete:function(){p==="hide"&&f.hide();n.effects.restore(f,c);n.effects.removeWrapper(f);u()}})}}(jQuery),function(n){n.effects.effect.bounce=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=k==="hide",y=k==="show",h=t.direction||"up",u=t.distance,p=t.times||5,d=p*2+(y||f?1:0),c=t.duration/d,l=t.easing,e=h==="up"||h==="down"?"top":"left",w=h==="up"||h==="left",b,o,s,a=r.queue(),g=a.length;for((y||f)&&v.push("opacity"),n.effects.save(r,v),r.show(),n.effects.createWrapper(r),u||(u=r[e==="top"?"outerHeight":"outerWidth"]()/3),y&&(s={opacity:1},s[e]=0,r.css("opacity",0).css(e,w?-u*2:u*2).animate(s,c,l)),f&&(u/=Math.pow(2,p-1)),s={},s[e]=0,b=0;b<p;b++)o={},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l).animate(s,c,l),u=f?u*2:u/2;f&&(o={opacity:0},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l));r.queue(function(){f&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});g>1&&a.splice.apply(a,[1,0].concat(a.splice(g,d+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.clip=function(t,i){var r=n(this),h=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),f=v==="show",y=t.direction||"vertical",c=y==="vertical",o=c?"height":"width",l=c?"top":"left",s={},a,u,e;n.effects.save(r,h);r.show();a=n.effects.createWrapper(r).css({overflow:"hidden"});u=r[0].tagName==="IMG"?a:r;e=u[o]();f&&(u.css(o,0),u.css(l,e/2));s[o]=f?e:0;s[l]=f?0:e/2;u.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.drop=function(t,i){var r=n(this),h=["position","top","bottom","left","right","opacity","height","width"],c=n.effects.setMode(r,t.mode||"hide"),e=c==="show",u=t.direction||"left",o=u==="up"||u==="down"?"top":"left",s=u==="up"||u==="left"?"pos":"neg",l={opacity:e?1:0},f;n.effects.save(r,h);r.show();n.effects.createWrapper(r);f=t.distance||r[o==="top"?"outerHeight":"outerWidth"](!0)/2;e&&r.css("opacity",0).css(o,s==="pos"?-f:f);l[o]=(e?s==="pos"?"+=":"-=":s==="pos"?"-=":"+=")+f;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c==="hide"&&r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.explode=function(t,i){function b(){l.push(this);l.length===o*c&&k()}function k(){r.css({visibility:"visible"});n(l).remove();u||r.hide();i()}for(var o=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=o,r=n(this),d=n.effects.setMode(r,t.mode||"hide"),u=d==="show",w=r.show().css("visibility","hidden").offset(),s=Math.ceil(r.outerWidth()/c),h=Math.ceil(r.outerHeight()/o),l=[],e,a,v,y,p,f=0;f<o;f++)for(v=w.top+f*h,p=f-(o-1)/2,e=0;e<c;e++)a=w.left+e*s,y=e-(c-1)/2,r.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-e*s,top:-f*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:a+(u?y*s:0),top:v+(u?p*h:0),opacity:u?0:1}).animate({left:a+(u?0:y*s),top:v+(u?0:p*h),opacity:u?1:0},t.duration||500,t.easing,b)}}(jQuery),function(n){n.effects.effect.fade=function(t,i){var r=n(this),u=n.effects.setMode(r,t.mode||"toggle");r.animate({opacity:u},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(n){n.effects.effect.fold=function(t,i){var r=n(this),s=["position","top","bottom","left","right","height","width"],h=n.effects.setMode(r,t.mode||"hide"),e=h==="show",c=h==="hide",f=t.size||15,l=/([0-9]+)%/.exec(f),a=!!t.horizFirst,v=e!==a,y=v?["width","height"]:["height","width"],p=t.duration/2,u,o,w={},b={};n.effects.save(r,s);r.show();u=n.effects.createWrapper(r).css({overflow:"hidden"});o=v?[u.width(),u.height()]:[u.height(),u.width()];l&&(f=parseInt(l[1],10)/100*o[c?0:1]);e&&u.css(a?{height:0,width:f}:{height:f,width:0});w[y[0]]=e?o[0]:f;b[y[1]]=e?o[1]:0;u.animate(w,p,t.easing).animate(b,p,t.easing,function(){c&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()})}}(jQuery),function(n){n.effects.effect.highlight=function(t,i){var r=n(this),u=["backgroundImage","backgroundColor","opacity"],f=n.effects.setMode(r,t.mode||"show"),e={backgroundColor:r.css("backgroundColor")};f==="hide"&&(e.opacity=0);n.effects.save(r,u);r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f==="hide"&&r.hide();n.effects.restore(r,u);i()}})}}(jQuery),function(n){n.effects.effect.pulsate=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"show"),h=e==="show",a=e==="hide",v=h||e==="hide",o=(t.times||5)*2+(v?1:0),c=t.duration/o,u=0,f=r.queue(),l=f.length,s;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),s=1;s<o;s++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing);r.queue(function(){a&&r.hide();i()});l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,o+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.puff=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"hide"),o=e==="hide",s=parseInt(t.percent,10)||150,f=s/100,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};n.extend(t,{effect:"scale",queue:!1,fade:!0,mode:e,complete:i,percent:o?s:100,from:o?u:{height:u.height*f,width:u.width*f,outerHeight:u.outerHeight*f,outerWidth:u.outerWidth*f}});r.effect(t)};n.effects.effect.scale=function(t,i){var u=n(this),r=n.extend(!0,{},t),f=n.effects.setMode(u,t.mode||"effect"),s=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:f==="hide"?0:100),h=t.direction||"both",c=t.origin,e={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},o={y:h!=="horizontal"?s/100:1,x:h!=="vertical"?s/100:1};r.effect="size";r.queue=!1;r.complete=i;f!=="effect"&&(r.origin=c||["middle","center"],r.restore=!0);r.from=t.from||(f==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:e);r.to={height:e.height*o.y,width:e.width*o.x,outerHeight:e.outerHeight*o.y,outerWidth:e.outerWidth*o.x};r.fade&&(f==="show"&&(r.from.opacity=0,r.to.opacity=1),f==="hide"&&(r.from.opacity=1,r.to.opacity=0));u.effect(r)};n.effects.effect.size=function(t,i){var f,l,u,r=n(this),w=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],v=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=n.effects.setMode(r,t.mode||"effect"),y=t.restore||h!=="effect",c=t.scale||"both",b=t.origin||["middle","center"],k=r.css("position"),s=y?w:["position","top","bottom","left","right","overflow","opacity"],p={height:0,width:0,outerHeight:0,outerWidth:0};h==="show"&&r.show();f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};t.mode==="toggle"&&h==="show"?(r.from=t.to||p,r.to=t.from||f):(r.from=t.from||(h==="show"?p:f),r.to=t.to||(h==="hide"?p:f));u={from:{y:r.from.height/f.height,x:r.from.width/f.width},to:{y:r.to.height/f.height,x:r.to.width/f.width}};(c==="box"||c==="both")&&(u.from.y!==u.to.y&&(s=s.concat(e),r.from=n.effects.setTransition(r,e,u.from.y,r.from),r.to=n.effects.setTransition(r,e,u.to.y,r.to)),u.from.x!==u.to.x&&(s=s.concat(o),r.from=n.effects.setTransition(r,o,u.from.x,r.from),r.to=n.effects.setTransition(r,o,u.to.x,r.to)));(c==="content"||c==="both")&&u.from.y!==u.to.y&&(s=s.concat(v).concat(a),r.from=n.effects.setTransition(r,v,u.from.y,r.from),r.to=n.effects.setTransition(r,v,u.to.y,r.to));n.effects.save(r,s);r.show();n.effects.createWrapper(r);r.css("overflow","hidden").css(r.from);b&&(l=n.effects.getBaseline(b,f),r.from.top=(f.outerHeight-r.outerHeight())*l.y,r.from.left=(f.outerWidth-r.outerWidth())*l.x,r.to.top=(f.outerHeight-r.to.outerHeight)*l.y,r.to.left=(f.outerWidth-r.to.outerWidth)*l.x);r.css(r.from);(c==="content"||c==="both")&&(e=e.concat(["marginTop","marginBottom"]).concat(v),o=o.concat(["marginLeft","marginRight"]),a=w.concat(e).concat(o),r.find("*[width]").each(function(){var i=n(this),r={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};y&&n.effects.save(i,a);i.from={height:r.height*u.from.y,width:r.width*u.from.x,outerHeight:r.outerHeight*u.from.y,outerWidth:r.outerWidth*u.from.x};i.to={height:r.height*u.to.y,width:r.width*u.to.x,outerHeight:r.height*u.to.y,outerWidth:r.width*u.to.x};u.from.y!==u.to.y&&(i.from=n.effects.setTransition(i,e,u.from.y,i.from),i.to=n.effects.setTransition(i,e,u.to.y,i.to));u.from.x!==u.to.x&&(i.from=n.effects.setTransition(i,o,u.from.x,i.from),i.to=n.effects.setTransition(i,o,u.to.x,i.to));i.css(i.from);i.animate(i.to,t.duration,t.easing,function(){y&&n.effects.restore(i,a)})}));r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){r.to.opacity===0&&r.css("opacity",r.from.opacity);h==="hide"&&r.hide();n.effects.restore(r,s);y||(k==="static"?r.css({position:"relative",top:r.to.top,left:r.to.left}):n.each(["top","left"],function(n,t){r.css(t,function(t,i){var f=parseInt(i,10),u=n?r.to.left:r.to.top;return i==="auto"?u+"px":f+u+"px"})}));n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.shake=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=t.direction||"left",o=t.distance||20,y=t.times||3,p=y*2+1,u=Math.round(t.duration/p),s=f==="up"||f==="down"?"top":"left",h=f==="up"||f==="left",c={},l={},w={},a,e=r.queue(),b=e.length;for(n.effects.save(r,v),r.show(),n.effects.createWrapper(r),c[s]=(h?"-=":"+=")+o,l[s]=(h?"+=":"-=")+o*2,w[s]=(h?"-=":"+=")+o*2,r.animate(c,u,t.easing),a=1;a<y;a++)r.animate(l,u,t.easing).animate(w,u,t.easing);r.animate(l,u,t.easing).animate(c,u/2,t.easing).queue(function(){k==="hide"&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,p+1)));r.dequeue()}}(jQuery),function(n){n.effects.effect.slide=function(t,i){var r=n(this),s=["position","top","bottom","left","right","width","height"],h=n.effects.setMode(r,t.mode||"show"),c=h==="show",f=t.direction||"left",e=f==="up"||f==="down"?"top":"left",o=f==="up"||f==="left",u,l={};n.effects.save(r,s);r.show();u=t.distance||r[e==="top"?"outerHeight":"outerWidth"](!0);n.effects.createWrapper(r).css({overflow:"hidden"});c&&r.css(e,o?isNaN(u)?"-"+u:-u:u);l[e]=(c?o?"+=":"-=":o?"-=":"+=")+u;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){h==="hide"&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})}}(jQuery),function(n){n.effects.effect.transfer=function(t,i){var u=n(this),r=n(t.to),f=r.css("position")==="fixed",e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n('<div class="ui-effects-transfer"><\/div>').appendTo(document.body).addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove();i()})}}(jQuery),function(n){var t=!1;n.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,n.proxy(function(n){this.options.disabled&&n.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(n){n.preventDefault()},"click .ui-state-disabled > a":function(n){n.preventDefault()},"click .ui-menu-item:has(a)":function(i){var r=n(i.target).closest(".ui-menu-item");!t&&r.not(".ui-state-disabled").length&&(t=!0,this.select(i),r.has(".ui-menu").length?this.expand(i):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=n(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){n.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(i){n(i.target).closest(".ui-menu").length||this.collapseAll(i);t=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=n(this);t.data("ui-menu-submenu-carat")&&t.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,f,r,e,u,s=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1;f=this.previousFilter||"";r=String.fromCharCode(t.keyCode);e=!1;clearTimeout(this.filterTimer);r===f?e=!0:r=f+r;u=new RegExp("^"+o(r),"i");i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())});i=e&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;i.length||(r=String.fromCharCode(t.keyCode),u=new RegExp("^"+o(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())}));i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(n){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(n):this.select(n))},refresh:function(){var t,r=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.prev("a"),u=n("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(u);t.attr("aria-labelledby",i.attr("id"))});t=i.add(this.element);t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});t.children(":not(.ui-menu-item)").each(function(){var t=n(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")});t.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(n,t){var i,r;this.blur(n,n&&n.type==="focus");this._scrollIntoView(t);this.active=t.first();r=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",r.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");n&&n.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay);i=t.children(".ui-menu");i.length&&/^mouse/.test(n.type)&&this._startOpening(i);this.activeMenu=t.parent();this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.height(),i<0?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){(t||clearTimeout(this.timer),this.active)&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",n,{item:this.active}))},_startOpening:function(n){(clearTimeout(this.timer),n.attr("aria-hidden")==="true")&&(this.timer=this._delay(function(){this._close();this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element);this._close(r);this.blur(t);this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element);n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r=n==="first"||n==="last"?this.active[n==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0));r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]());this.focus(i,r)},nextPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r-u<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0);this._trigger("select",t,i)}})}(jQuery),function(n,t){function e(n,t,i){return[parseInt(n[0],10)*(a.test(n[0])?t/100:1),parseInt(n[1],10)*(a.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}n.ui=n.ui||{};var f,u=Math.max,i=Math.abs,o=Math.round,s=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+%?/,l=/^\w+/,a=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:u?n.position.scrollbarWidth():0,height:f?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}};n.fn.position=function(t){if(!t||!t.of)return v.apply(this,arguments);t=n.extend({},t);var b,f,a,p,w,y=n(t.of),nt=n.position.getWithinInfo(t.within),tt=n.position.getScrollInfo(nt),k=y[0],d=(t.collision||"flip").split(" "),g={};return k.nodeType===9?(f=y.width(),a=y.height(),p={top:0,left:0}):n.isWindow(k)?(f=y.width(),a=y.height(),p={top:y.scrollTop(),left:y.scrollLeft()}):k.preventDefault?(t.at="left top",f=a=0,p={top:k.pageY,left:k.pageX}):(f=y.outerWidth(),a=y.outerHeight(),p=y.offset()),w=n.extend({},p),n.each(["my","at"],function(){var n=(t[this]||"").split(" "),i,r;n.length===1&&(n=s.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]);n[0]=s.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";i=c.exec(n[0]);r=c.exec(n[1]);g[this]=[i?i[0]:0,r?r[0]:0];t[this]=[l.exec(n[0])[0],l.exec(n[1])[0]]}),d.length===1&&(d[1]=d[0]),t.at[0]==="right"?w.left+=f:t.at[0]==="center"&&(w.left+=f/2),t.at[1]==="bottom"?w.top+=a:t.at[1]==="center"&&(w.top+=a/2),b=e(g.at,f,a),w.left+=b[0],w.top+=b[1],this.each(function(){var k,it,h=n(this),c=h.outerWidth(),l=h.outerHeight(),rt=r(this,"marginLeft"),ut=r(this,"marginTop"),ft=c+rt+r(this,"marginRight")+tt.width,et=l+ut+r(this,"marginBottom")+tt.height,s=n.extend({},w),v=e(g.my,h.outerWidth(),h.outerHeight());t.my[0]==="right"?s.left-=c:t.my[0]==="center"&&(s.left-=c/2);t.my[1]==="bottom"?s.top-=l:t.my[1]==="center"&&(s.top-=l/2);s.left+=v[0];s.top+=v[1];n.support.offsetFractions||(s.left=o(s.left),s.top=o(s.top));k={marginLeft:rt,marginTop:ut};n.each(["left","top"],function(i,r){n.ui.position[d[i]]&&n.ui.position[d[i]][r](s,{targetWidth:f,targetHeight:a,elemWidth:c,elemHeight:l,collisionPosition:k,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:nt,elem:h})});n.fn.bgiframe&&h.bgiframe();t.using&&(it=function(n){var r=p.left-s.left,v=r+f-c,e=p.top-s.top,w=e+a-l,o={target:{element:y,left:p.left,top:p.top,width:f,height:a},element:{element:h,left:s.left,top:s.top,width:c,height:l},horizontal:v<0?"left":r>0?"right":"center",vertical:w<0?"top":e>0?"bottom":"middle"};f<c&&i(r+v)<f&&(o.horizontal="center");a<l&&i(e+w)<a&&(o.vertical="middle");o.important=u(i(r),i(v))>u(i(e),i(w))?"horizontal":"vertical";t.using.call(this,n,o)});h.offset(n.extend(s,{using:it}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,r=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=r-s,f=s+t.collisionWidth-o-r,h;t.collisionWidth>o?i>0&&f<=0?(h=n.left+i+t.collisionWidth-o-r,n.left+=i-h):n.left=f>0&&i<=0?r:i>f?r+o-t.collisionWidth:r:i>0?n.left+=i:f>0?n.left-=f:n.left=u(n.left-s,n.left)},top:function(n,t){var o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=r-s,f=s+t.collisionHeight-e-r,h;t.collisionHeight>e?i>0&&f<=0?(h=n.top+i+t.collisionHeight-e-r,n.top+=i-h):n.top=f>0&&i<=0?r:i>f?r+e-t.collisionHeight:r:i>0?n.top+=i:f>0?n.top-=f:n.top=u(n.top-s,n.top)}},flip:{left:function(n,t){var r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-o,v=l+t.collisionWidth-c-o,u=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,f=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,e=-2*t.offset[0],s,h;a<0?(s=n.left+u+f+e+t.collisionWidth-c-y,(s<0||s<i(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-t.collisionPosition.marginLeft+u+f+e-o,(h>0||i(h)<v)&&(n.left+=u+f+e))},top:function(n,t){var r=t.within,y=r.offset.top+r.scrollTop,a=r.height,o=r.isWindow?r.scrollTop:r.offset.top,v=n.top-t.collisionPosition.marginTop,s=v-o,h=v+t.collisionHeight-a-o,p=t.my[1]==="top",u=p?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,f=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,e=-2*t.offset[1],c,l;s<0?(l=n.top+u+f+e+t.collisionHeight-a-y,n.top+u+f+e>s&&(l<0||l<i(s))&&(n.top+=u+f+e)):h>0&&(c=n.top-t.collisionPosition.marginTop+u+f+e-o,n.top+u+f+e>h&&(c>0||i(c)<h)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,f,e=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(e?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in r)t.style[f]=r[f];t.appendChild(o);i=e||document.documentElement;i.insertBefore(t,i.firstChild);o.style.cssText="position: absolute; left: 10.7432222px;";u=n(o).offset().left;n.support.offsetFractions=u>10&&u<11;t.innerHTML="";i.removeChild(t)}();n.uiBackCompat!==!1&&function(n){var i=n.fn.position;n.fn.position=function(r){if(!r||!r.offset)return i.call(this,r);var u=r.offset.split(" "),f=r.at.split(" ");return u.length===1&&(u[1]=u[0]),/^\d/.test(u[0])&&(u[0]="+"+u[0]),/^\d/.test(u[1])&&(u[1]="+"+u[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),i.call(this,n.extend(r,{at:f[0]+u[0]+" "+f[1]+u[1],offset:t}))}}(jQuery)}(jQuery),function(n,t){n.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(n){return n===t?this._value():(this._setOption("value",n),this)},_setOption:function(n,t){n==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(n,t)},_value:function(){var n=this.options.value;return typeof n!="number"&&(n=0),Math.min(this.options.max,Math.max(this.min,n))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var n=this.value(),t=this._percentage();this.oldValue!==n&&(this.oldValue=n,this._trigger("change"));this.valueDiv.toggle(n>this.min).toggleClass("ui-corner-right",n===this.options.max).width(t.toFixed(0)+"%");this.element.attr("aria-valuenow",n)}})}(jQuery),function(n){var t=5;n.widget("ui.slider",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var r,u,i=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),e=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=n([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=n("<div><\/div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),u=i.values&&i.values.length||1,r=f.length;r<u;r++)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'><\/a>");this.handles=f.add(n(e.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(n){n.preventDefault()}).mouseenter(function(){i.disabled||n(this).addClass("ui-state-hover")}).mouseleave(function(){n(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?n(this).blur():(n(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),n(this).addClass("ui-state-focus"))}).blur(function(){n(this).removeClass("ui-state-focus")});this.handles.each(function(t){n(this).data("ui-slider-handle-index",t)});this._on(this.handles,{keydown:function(i){var o,u,r,f,e=n(i.target).data("ui-slider-handle-index");switch(i.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,n(i.target).addClass("ui-state-active"),o=this._start(i,e),o===!1))return}f=this.options.step;u=this.options.values&&this.options.values.length?r=this.values(e):r=this.value();switch(i.keyCode){case n.ui.keyCode.HOME:r=this._valueMin();break;case n.ui.keyCode.END:r=this._valueMax();break;case n.ui.keyCode.PAGE_UP:r=this._trimAlignValue(u+(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(u-(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(u===this._valueMax())return;r=this._trimAlignValue(u+f);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(u===this._valueMin())return;r=this._trimAlignValue(u-f)}this._slide(i,e,r)},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),n(t.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(t){var s,u,f,i,r,h,e,c,l=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},u=this._normValueFromMouse(s),f=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(u-l.values(t));f>e&&(f=e,i=n(this),r=t)}),o.range===!0&&this.values(1)===o.min&&(r+=1,i=n(this.handles[r])),h=this._start(t,r),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,u),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return this.orientation==="horizontal"?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),t<0&&(t=0),this.orientation==="vertical"&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",n,i)},_slide:function(n,t,i){var r,f,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&i>r||t===1&&i<r)&&(i=r),i!==this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i,!0))):i!==this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this.value(i))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("stop",n,i)},_change:function(n,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("change",n,i)}},value:function(n){if(arguments.length){this.options.value=this._trimAlignValue(n);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,i){var u,f,r;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(i);this._refreshValue();this._change(null,t);return}if(!arguments.length)return this._values();if(!n.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(u=this.options.values,f=arguments[0],r=0;r<u.length;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var r,u=0;n.isArray(this.options.values)&&(u=this.options.values.length);n.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<u;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0;this._refreshValue();this._animateOff=!1}},_value:function(){var n=this.options.value;return n=this._trimAlignValue(n),n},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],r=this._trimAlignValue(r),r;for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t},_trimAlignValue:function(n){if(n<=this._valueMin())return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(f){t=(r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=t+"%";n(this).stop(1,1)[u?"animate":"css"](o,i.animate);r.options.range===!0&&(r.orientation==="horizontal"?(f===0&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(f===0&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate})));s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?(c-f)/(h-f)*100:0,o[this.orientation==="horizontal"?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),e==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),e==="max"&&this.orientation==="horizontal"&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:i.animate}),e==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),e==="max"&&this.orientation==="vertical"&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:i.animate}))}})}(jQuery),function(n){function t(n){return function(){var t=this.element.val();n.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}n.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);u!==undefined&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh();this.previous!==this.element.val()&&this._trigger("change",n)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100);n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var n=this.element[0]===this.document[0].activeElement;n||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;(i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur;r.call(this)}),this._start(t)!==!1)&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active")){if(this._start(t)===!1)return!1;this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var n=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=n.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(n.height()*.5)&&n.height()>0&&n.height(n.height());this.options.disabled&&this.disable()},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;<\/span><\/a>"},_start:function(n){return!this.spinning&&this._trigger("start",n)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(n,t,i){n=n||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},n);this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1);i=this._adjustValue(i+n*this._increment(this.counter));this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return this.options.min!==null&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=n.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return r=t.min!==null?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),t.max!==null&&n>t.max?t.max:t.min!==null&&n<t.min?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){if(n==="culture"||n==="numberFormat"){var i=this._parse(this.element.val());this.options[n]=t;this.element.val(this._format(i));return}(n==="max"||n==="min"||n==="step")&&typeof t=="string"&&(t=this._parse(t));this._super(n,t);n==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(n){this._super(n);this._value(this.element.val())}),_parse:function(n){return typeof n=="string"&&n!==""&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),n===""||isNaN(n)?null:n},_format:function(n){return n===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(n,t){var i;n!==""&&(i=this._parse(n),i!==null&&(t||(i=this._adjustValue(i)),n=this._format(i)));this.element.val(n);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:t(function(n){this._stepUp(n)}),_stepUp:function(n){this._spin((n||1)*this.options.step)},stepDown:t(function(n){this._stepDown(n)}),_stepDown:function(n){this._spin((n||1)*-this.options.step)},pageUp:t(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:t(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,n)},widget:function(){return this.uiSpinner}})}(jQuery),function(n,t){function i(){return++f}function r(n){return n.hash.length>1&&n.href.replace(u,"")===location.href.replace(u,"").replace(/\s/g,"%20")}var f=0,u=/#.*$/;n.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var u=this,i=this.options,t=i.active,r=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();t===null&&(r&&this.tabs.each(function(i,u){if(n(u).attr("aria-controls")===r)return t=i,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(t===null||t===-1)&&(t=this.tabs.length?0:!1));t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=i.collapsible?!1:0));i.active=t;!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0);n.isArray(i.disabled)&&(i.disabled=n.unique(i.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return u.tabs.index(n)}))).sort());this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):n();this._refresh();this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(t){var r=n(this.document[0].activeElement).closest("li"),i=this.tabs.index(r),u=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:i++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:u=!1;i--;break;case n.ui.keyCode.END:i=this.anchors.length-1;break;case n.ui.keyCode.HOME:i=0;break;case n.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(i);return;case n.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(i===this.options.active?!1:i);return;default:return}t.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,u);t.ctrlKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function u(){return t>r&&(t=0),t<0&&(t=r),t}for(var r=this.tabs.length-1;n.inArray(u(),this.options.disabled)!==-1;)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).focus(),n},_setOption:function(n,t){if(n==="active"){this._activate(t);return}if(n==="disabled"){this._setupDisabled(t);return}this._super(n,t);n==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0));n==="event"&&this._setupEvents(t);n==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(n){return n.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)});this._processTabs();t.active===!1||!this.anchors.length?(t.active=!1,this.active=n()):this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return n("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=n();this.anchors.each(function(i,u){var e,f,s,h=n(u).uniqueId().attr("id"),o=n(u).closest("li"),c=o.attr("aria-controls");r(u)?(e=u.hash,f=t.element.find(t._sanitizeSelector(e))):(s=t._tabId(o),e="#"+s,f=t.element.find(e),f.length||(f=t._createPanel(s),f.insertAfter(t.panels[i-1]||t.tablist)),f.attr("aria-live","polite"));f.length&&(t.panels=t.panels.add(f));c&&o.data("ui-tabs-aria-controls",c);o.attr({"aria-controls":e.substring(1),"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i=0,r;r=this.tabs[i];i++)t===!0||n.inArray(i,t)!==-1?n(r).addClass("ui-state-disabled").attr("aria-disabled","true"):n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(n){n.preventDefault()}};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,u,r=this.element.parent();t==="fill"?(n.support.minHeight||(u=r.css("overflow"),r.css("overflow","hidden")),i=r.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");r!=="absolute"&&r!=="fixed"&&(i-=t.outerHeight(!0))}),u&&r.css("overflow",u),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):t==="auto"&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};(t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1)||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),!s.length&&!o.length&&n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){u.running=!1;u._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");r.length&&u.options.show?u._show(r,u.options.show,e):(r.show(),e())}var u=this,r=i.newPanel,f=i.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o());f.attr({"aria-expanded":"false","aria-hidden":"true"});i.oldTab.attr("aria-selected","false");r.length&&f.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return n(this).attr("tabIndex")===0}).attr("tabIndex",-1);r.attr({"aria-expanded":"true","aria-hidden":"false"});i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(n){return typeof n=="string"&&(n=this.anchors.index(this.anchors.filter("[href$='"+n+"']"))),n},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")});this.panels.show();this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(i){var r=this.options.disabled;r!==!1&&(i===t?r=!1:(i=this._getIndex(i),r=n.isArray(r)?n.map(r,function(n){return n!==i?n:null}):n.map(this.tabs,function(n,t){return t!==i?t:null})),this._setupDisabled(r))},disable:function(i){var r=this.options.disabled;if(r!==!0){if(i===t)r=!0;else{if(i=this._getIndex(i),n.inArray(i,r)!==-1)return;r=n.isArray(r)?n.merge([i],r).sort():[i]}this._setupDisabled(r)}},load:function(t,i){t=this._getIndex(t);var f=this,u=this.tabs.eq(t),o=u.find(".ui-tabs-anchor"),e=this._getPanelForTab(u),s={tab:u,panel:e};r(o[0])||(this.xhr=n.ajax(this._ajaxSettings(o,i,s)),this.xhr&&this.xhr.statusText!=="canceled"&&(u.addClass("ui-tabs-loading"),e.attr("aria-busy","true"),this.xhr.success(function(n){setTimeout(function(){e.html(n);f._trigger("load",i,s)},1)}).complete(function(n,t){setTimeout(function(){t==="abort"&&f.panels.stop(!1,!0);u.removeClass("ui-tabs-loading");e.removeAttr("aria-busy");n===f.xhr&&delete f.xhr},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href"),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});n.uiBackCompat!==!1&&(n.ui.tabs.prototype._ui=function(n,t){return{tab:n,panel:t,index:this.anchors.index(n)}},n.widget("ui.tabs",n.ui.tabs,{url:function(n,t){this.anchors.eq(n).attr("href",t)}}),n.widget("ui.tabs",n.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,r){if(n.data(r.tab[0],"cache.tabs")){i.preventDefault();return}r.jqXHR.success(function(){t.options.cache&&n.data(r.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,i,r){var u=this.options.ajaxOptions;return n.extend({},u,{error:function(n,t){try{u.error(n,t,r.tab.closest("li").index(),r.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(n,t){n==="cache"&&t===!1&&this.anchors.removeData("cache.tabs");this._super(n,t)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(n){this.anchors.eq(n).removeData("cache.tabs");this._superApply(arguments)}}),n.widget("ui.tabs",n.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),n.widget("ui.tabs",n.ui.tabs,{options:{spinner:"<em>Loading&#8230;<\/em>"},_create:function(){this._super();this._on({tabsbeforeload:function(n,t){if(n.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),r=i.html();i.html(this.options.spinner);t.jqXHR.complete(function(){i.html(r)})}}})}}),n.widget("ui.tabs",n.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i=this.options,r;(t&&i.disabled===!0||n.isArray(i.disabled)&&n.inArray(t,i.disabled)!==-1)&&(r=!0);this._superApply(arguments);r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i=this.options,r;(t&&i.disabled===!1||n.isArray(i.disabled)&&n.inArray(t,i.disabled)===-1)&&(r=!0);this._superApply(arguments);r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),n.widget("ui.tabs",n.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}<\/span><\/a><\/li>"},add:function(i,r,u){u===t&&(u=this.anchors.length);var s,f,o=this.options,e=n(o.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,r)),h=i.indexOf("#")?this._tabId(e):i.replace("#","");return e.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),e.attr("aria-controls",h),s=u>=this.tabs.length,f=this.element.find("#"+h),f.length||(f=this._createPanel(h),s?u>0?f.insertAfter(this.panels.eq(-1)):f.appendTo(this.element):f.insertBefore(this.panels[u])),f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?e.appendTo(this.tablist):e.insertBefore(this.tabs[u]),o.disabled=n.map(o.disabled,function(n){return n>=u?++n:n}),this.refresh(),this.tabs.length===1&&o.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[u],this.panels[u])),this},remove:function(t){t=this._getIndex(t);var r=this.options,i=this.tabs.eq(t).remove(),u=this._getPanelForTab(i).remove();return i.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),r.disabled=n.map(n.grep(r.disabled,function(n){return n!==t}),function(n){return n>=t?--n:n}),this.refresh(),this._trigger("remove",null,this._ui(i.find("a")[0],u[0])),this}}),n.widget("ui.tabs",n.ui.tabs,{length:function(){return this.anchors.length}}),n.widget("ui.tabs",n.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var r=t.is("li")?t.find("a[href]"):t;return r=r[0],n(r).closest("li").attr("aria-controls")||r.title&&r.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),n.widget("ui.tabs",n.ui.tabs,{options:{panelTemplate:"<div><\/div>"},_createPanel:function(t){return n(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),n.widget("ui.tabs",n.ui.tabs,{_create:function(){var n=this.options;n.active===null&&n.selected!==t&&(n.active=n.selected===-1?!1:n.selected);this._super();n.selected=n.active;n.selected===!1&&(n.selected=-1)},_setOption:function(n,t){if(n!=="selected")return this._super(n,t);var i=this.options;this._super("active",t===-1?!1:t);i.selected=i.active;i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;this.options.selected===!1&&(this.options.selected=-1)}}),n.widget("ui.tabs",n.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(n,t,i){var u,f,r=this._superApply(arguments);return r?(n==="beforeActivate"?(u=i.newTab.length?i.newTab:i.oldTab,f=i.newPanel.length?i.newPanel:i.oldPanel,r=this._super("select",t,{tab:u.find(".ui-tabs-anchor")[0],panel:f[0],index:u.closest("li").index()})):n==="activate"&&i.newTab.length&&(r=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),r):!1}}),n.widget("ui.tabs",n.ui.tabs,{select:function(n){if(n=this._getIndex(n),n===-1){if(!this.options.collapsible||this.options.selected===-1)return;n=this.options.selected}this.anchors.eq(n).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;n.widget("ui.tabs",n.ui.tabs,{options:{cookie:null},_create:function(){var t=this.options,n;t.active==null&&t.cookie&&(n=parseInt(this._cookie(),10),n===-1&&(n=!1),t.active=n);this._super()},_cookie:function(i){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(i===!1?-1:i),r.push(this.options.cookie)),n.cookie.apply(null,r)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),n.widget("ui.tabs",n.ui.tabs,{_trigger:function(t,i,r){var u=n.extend({},r);return t==="load"&&(u.panel=u.panel[0],u.tab=u.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,u)}}),n.widget("ui.tabs",n.ui.tabs,{options:{fx:null},_getFx:function(){var i,r,t=this.options.fx;return t&&(n.isArray(t)?(i=t[0],r=t[1]):i=r=t),t?{show:r,hide:i}:null},_toggle:function(n,t){function e(){r.running=!1;r._trigger("activate",n,t)}function o(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active");u.length&&i.show?u.animate(i.show,i.show.duration,function(){e()}):(u.show(),e())}var r=this,u=t.newPanel,f=t.oldPanel,i=this._getFx();if(!i)return this._super(n,t);r.running=!0;f.length&&i.hide?f.animate(i.hide,i.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");o()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o())}}))}(jQuery),function(n){function t(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))}function i(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);r!==-1&&i.splice(r,1);t.removeData("ui-tooltip-id");i=n.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var r=0;n.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return n(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(t,i){var r=this;if(t==="disabled"){this[i?"_disable":"_enable"]();this.options[t]=i;return}this._super(t,i);t==="content"&&n.each(this.tooltips,function(n,t){r._updateContent(t)})},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0];t.close(u,!0)});this.element.find(this.options.items).andSelf().each(function(){var t=n(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&i.parents().each(function(){var t=n(this),i;t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0));t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(n,t){var i,r=this.options.content,u=this,f=t?t.type:null;if(typeof r=="string")return this._open(t,n,r);i=r.call(n[0],function(i){n.data("ui-tooltip-open")&&u._delay(function(){t&&(t.type=f);this._open(t,n,i)})});i&&this._open(t,n,i)},_open:function(i,r,u){function o(n){(s.of=n,f.is(":hidden"))||f.position(s)}var f,e,h,s=n.extend({},this.options.position);if(u){if(f=this._find(r),f.length){f.find(".ui-tooltip-content").html(u);return}r.is("[title]")&&(i&&i.type==="mouseover"?r.attr("title",""):r.removeAttr("title"));f=this._tooltip(r);t(r,f.attr("id"));f.find(".ui-tooltip-content").html(u);this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):f.position(n.extend({of:r},this.options.position));f.hide();this._show(f,this.options.show);this.options.show&&this.options.show.delay&&(h=setInterval(function(){f.is(":visible")&&(o(s.of),clearInterval(h))},n.fx.interval));this._trigger("open",i,{tooltip:f});e={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var i=n.Event(t);i.currentTarget=r[0];this.close(i,!0)}},remove:function(){this._removeTooltip(f)}};i&&i.type!=="mouseover"||(e.mouseleave="close");i&&i.type!=="focusin"||(e.focusout="close");this._on(!0,r,e)}},close:function(t){var f=this,r=n(t?t.currentTarget:this.element),u=this._find(r);this.closing||(r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title);delete f.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:u}),this.closing=!1)},_tooltip:function(t){var u="ui-tooltip-"+r++,i=n("<div>").attr({id:u,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return n("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),n.fn.bgiframe&&i.bgiframe(),this.tooltips[u]=t,i},_find:function(t){var i=t.data("ui-tooltip-id");return i?n("#"+i):n()},_removeTooltip:function(n){n.remove();delete this.tooltips[n.attr("id")]},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0];t.close(u,!0);n("#"+i).remove();r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery);